!function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/",__webpack_require__(__webpack_require__.s=128)}([function(e,t,n){!function(){"use strict";function VNode(){}function h(e,o){var i,a,u,s,l=r;for(s=arguments.length;s-- >2;)n.push(arguments[s]);for(o&&null!=o.children&&(n.length||n.push(o.children),delete o.children);n.length;)if((a=n.pop())&&void 0!==a.pop)for(s=a.length;s--;)n.push(a[s]);else!0!==a&&!1!==a||(a=null),(u="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(u=!1)),u&&i?l[l.length-1]+=a:l===r?l=[a]:l.push(a),i=u;var c=new VNode;return c.nodeName=e,c.children=l,c.attributes=null==o?void 0:o,c.key=null==o?void 0:o.key,void 0!==t.vnode&&t.vnode(c),c}function extend(e,t){for(var n in t)e[n]=t[n];return e}function cloneElement(e,t){return h(e.nodeName,extend(extend({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function enqueueRender(e){!e.__d&&(e.__d=!0)&&1==i.push(e)&&(t.debounceRendering||setTimeout)(rerender)}function rerender(){var e,t=i;for(i=[];e=t.pop();)e.__d&&renderComponent(e)}function isSameNodeType(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&isNamedNode(e,t.nodeName):n||e._componentConstructor===t.nodeName}function isNamedNode(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function getNodeProps(e){var t=extend({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function createNode(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function removeNode(e){e.parentNode&&e.parentNode.removeChild(e)}function setAccessor(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===o.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var u=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,eventProxy,u):e.removeEventListener(t,eventProxy,u),(e.__l||(e.__l={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)setProperty(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var s=i&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function setProperty(e,t,n){try{e[t]=n}catch(e){}}function eventProxy(e){return this.__l[e.type](t.event&&t.event(e)||e)}function flushMounts(){for(var e;e=a.pop();)t.afterMount&&t.afterMount(e),e.componentDidMount&&e.componentDidMount()}function diff(e,t,n,r,o,i){u++||(s=null!=o&&void 0!==o.ownerSVGElement,l=null!=e&&!("__preactattr_"in e));var a=idiff(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--u||(l=!1,i||flushMounts()),a}function idiff(e,t,n,r,o){var i=e,a=s;if(null==t&&(t=""),"string"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),recollectNodeTree(e,!0))),i.__preactattr_=!0,i;if("function"==typeof t.nodeName)return buildComponentFromVNode(e,t,n,r);if(s="svg"===t.nodeName||"foreignObject"!==t.nodeName&&s,(!e||!isNamedNode(e,String(t.nodeName)))&&(i=createNode(String(t.nodeName),s),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),recollectNodeTree(e,!0)}var u=i.firstChild,c=i.__preactattr_||(i.__preactattr_={}),f=t.children;return!l&&f&&1===f.length&&"string"==typeof f[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||null!=u)&&innerDiffNode(i,f,n,r,l||null!=c.dangerouslySetInnerHTML),diffAttributes(i,t.attributes,c),s=a,i}function innerDiffNode(e,t,n,r,o){var i,a,u,s,l=e.childNodes,c=[],f={},p=0,d=0,h=l.length,_=0,y=t?t.length:0;if(0!==h)for(var b=0;b<h;b++){var m=l[b],v=m.__preactattr_,g=y&&v?m._component?m._component.__k:v.key:null;null!=g?(p++,f[g]=m):(v||(void 0!==m.splitText?!o||m.nodeValue.trim():o))&&(c[_++]=m)}if(0!==y)for(var b=0;b<y;b++){u=t[b],s=null;var g=u.key;if(null!=g)p&&void 0!==f[g]&&(s=f[g],f[g]=void 0,p--);else if(!s&&d<_)for(i=d;i<_;i++)if(void 0!==c[i]&&isSameNodeType(a=c[i],u,o)){s=a,c[i]=void 0,i===_-1&&_--,i===d&&d++;break}s=idiff(s,u,n,r),s&&s!==e&&(b>=h?e.appendChild(s):s!==l[b]&&(s===l[b+1]?removeNode(l[b]):e.insertBefore(s,l[b]||null)))}if(p)for(var b in f)void 0!==f[b]&&recollectNodeTree(f[b],!1);for(;d<=_;)void 0!==(s=c[_--])&&recollectNodeTree(s,!1)}function recollectNodeTree(e,t){var n=e._component;n?unmountComponent(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||removeNode(e),removeChildren(e))}function removeChildren(e){for(e=e.lastChild;e;){var t=e.previousSibling;recollectNodeTree(e,!0),e=t}}function diffAttributes(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||setAccessor(e,r,n[r],n[r]=void 0,s);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||setAccessor(e,r,n[r],n[r]=t[r],s)}function collectComponent(e){var t=e.constructor.name;(c[t]||(c[t]=[])).push(e)}function createComponent(e,t,n){var r,o=c[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),Component.call(r,t,n)):(r=new Component(t,n),r.constructor=e,r.render=doRender),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.__b=o[i].__b,o.splice(i,1);break}return r}function doRender(e,t,n){return this.constructor(e,n)}function setComponentProps(e,n,r,o,i){e.__x||(e.__x=!0,(e.__r=n.ref)&&delete n.ref,(e.__k=n.key)&&delete n.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,o),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=n,e.__x=!1,0!==r&&(1!==r&&!1===t.syncComponentUpdates&&e.base?enqueueRender(e):renderComponent(e,1,i)),e.__r&&e.__r(e))}function renderComponent(e,n,r,o){if(!e.__x){var i,s,l,c=e.props,f=e.state,p=e.context,d=e.__p||c,h=e.__s||f,_=e.__c||p,y=e.base,b=e.__b,m=y||b,v=e._component,g=!1;if(y&&(e.props=d,e.state=h,e.context=_,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,f,p)?g=!0:e.componentWillUpdate&&e.componentWillUpdate(c,f,p),e.props=c,e.state=f,e.context=p),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!g){i=e.render(c,f,p),e.getChildContext&&(p=extend(extend({},p),e.getChildContext()));var O,C,w=i&&i.nodeName;if("function"==typeof w){var S=getNodeProps(i);s=v,s&&s.constructor===w&&S.key==s.__k?setComponentProps(s,S,1,p,!1):(O=s,e._component=s=createComponent(w,S,p),s.__b=s.__b||b,s.__u=e,setComponentProps(s,S,0,p,!1),renderComponent(s,1,r,!0)),C=s.base}else l=m,O=v,O&&(l=e._component=null),(m||1===n)&&(l&&(l._component=null),C=diff(l,i,p,r||!y,m&&m.parentNode,!0));if(m&&C!==m&&s!==v){var T=m.parentNode;T&&C!==T&&(T.replaceChild(C,m),O||(m._component=null,recollectNodeTree(m,!1)))}if(O&&unmountComponent(O),e.base=C,C&&!o){for(var E=e,P=e;P=P.__u;)(E=P).base=C;C._component=E,C._componentConstructor=E.constructor}}if(!y||r?a.unshift(e):g||(flushMounts(),e.componentDidUpdate&&e.componentDidUpdate(d,h,_),t.afterUpdate&&t.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);u||o||flushMounts()}}function buildComponentFromVNode(e,t,n,r){for(var o=e&&e._component,i=o,a=e,u=o&&e._componentConstructor===t.nodeName,s=u,l=getNodeProps(t);o&&!s&&(o=o.__u);)s=o.constructor===t.nodeName;return o&&s&&(!r||o._component)?(setComponentProps(o,l,3,n,r),e=o.base):(i&&!u&&(unmountComponent(i),e=a=null),o=createComponent(t.nodeName,l,n),e&&!o.__b&&(o.__b=e,a=null),setComponentProps(o,l,1,n,r),e=o.base,a&&e!==a&&(a._component=null,recollectNodeTree(a,!1))),e}function unmountComponent(e){t.beforeUnmount&&t.beforeUnmount(e);var n=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?unmountComponent(r):n&&(n.__preactattr_&&n.__preactattr_.ref&&n.__preactattr_.ref(null),e.__b=n,removeNode(n),collectComponent(e),removeChildren(n)),e.__r&&e.__r(null)}function Component(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function render(e,t,n){return diff(n,e,{},!1,t,!1)}var t={},n=[],r=[],o=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,i=[],a=[],u=0,s=!1,l=!1,c={};extend(Component.prototype,{setState:function(e,t){var n=this.state;this.__s||(this.__s=extend({},n)),extend(n,"function"==typeof e?e(n,this.props):e),t&&(this.__h=this.__h||[]).push(t),enqueueRender(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),renderComponent(this,2)},render:function(){}});var f={h:h,createElement:h,cloneElement:cloneElement,Component:Component,render:render,rerender:rerender,options:t};e.exports=f}()},function(e,t,n){var r,o,i;!function(n,a){o=[t,e],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";function getIteratorFn(e){var t=e&&(a&&e[a]||e[u]);if("function"==typeof t)return t}function createChainableTypeChecker(e){function checkType(t,n,r,i,a,u){if(i=i||s,u=u||r,null==n[r]){var l=o[a];return t?new Error("Required "+l+" `"+u+"` was not specified in `"+i+"`."):null}return e(n,r,i,a,u)}var t=checkType.bind(null,!1);return t.isRequired=checkType.bind(null,!0),t}function createPrimitiveTypeChecker(e){function validate(t,n,r,i,a){var u=t[n];if(getPropType(u)!==e){var s=o[i],l=getPreciseType(u);return new Error("Invalid "+s+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return createChainableTypeChecker(validate)}function createArrayOfTypeChecker(e){function validate(t,n,r,i,a){var u=t[n];if(!Array.isArray(u)){var s=o[i],l=getPropType(u);return new Error("Invalid "+s+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<u.length;c++){var f=e(u,c,r,i,a+"["+c+"]");if(f instanceof Error)return f}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(e){function validate(t,n,r,i,a){if(!(t[n]instanceof e)){var u=o[i],l=e.name||s,c=getClassName(t[n]);return new Error("Invalid "+u+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected instance of `"+l+"`.")}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(e){function validate(t,n,r,i,a){for(var u=t[n],s=0;s<e.length;s++)if(u===e[s])return null;var l=o[i],c=JSON.stringify(e);return new Error("Invalid "+l+" `"+a+"` of value `"+u+"` supplied to `"+r+"`, expected one of "+c+".")}return createChainableTypeChecker(Array.isArray(e)?validate:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function validate(t,n,r,i,a){var u=t[n],s=getPropType(u);if("object"!==s){var l=o[i];return new Error("Invalid "+l+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected an object.")}for(var c in u)if(u.hasOwnProperty(c)){var f=e(u,c,r,i,a+"."+c);if(f instanceof Error)return f}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(e){function validate(t,n,r,i,a){for(var u=0;u<e.length;u++){if(null==(0,e[u])(t,n,r,i,a))return null}var s=o[i];return new Error("Invalid "+s+" `"+a+"` supplied to `"+r+"`.")}return createChainableTypeChecker(Array.isArray(e)?validate:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createShapeTypeChecker(e){function validate(t,n,r,i,a){var u=t[n],s=getPropType(u);if("object"!==s){var l=o[i];return new Error("Invalid "+l+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.")}for(var c in e){var f=e[c];if(f){var p=f(u,c,r,i,a+"."+c);if(p)return p}}return null}return createChainableTypeChecker(validate)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||r.isValidElement(e))return!0;var t=getIteratorFn(e);if(!t)return!1;var n,o=t.call(e);if(t!==e.entries){for(;!(n=o.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=o.next()).done;){var i=n.value;if(i&&!isNode(i[1]))return!1}return!0;default:return!1}}function isSymbol(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function getPropType(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":isSymbol(t,e)?"symbol":t}function getPreciseType(e){var t=getPropType(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:s}var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,r={};r.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n};var o={prop:"prop",context:"context",childContext:"child context"},i={thatReturns:function(e){return function(){return e}}},a="function"==typeof Symbol&&Symbol.iterator,u="@@iterator",s="<<anonymous>>",l={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:function(){return createChainableTypeChecker(i.thatReturns(null))}(),arrayOf:createArrayOfTypeChecker,element:function(){function validate(e,t,n,i,a){if(!r.isValidElement(e[t])){var u=o[i];return new Error("Invalid "+u+" `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(validate)}(),instanceOf:createInstanceTypeChecker,node:function(){function validate(e,t,n,r,i){if(!isNode(e[t])){var a=o[r];return new Error("Invalid "+a+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return createChainableTypeChecker(validate)}(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};t.exports=l})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.styles=e;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.classes=n.filter(function(t){return e[t]}).map(function(t){return e[t]})};r.prototype.add=function(e){return"string"==typeof e&&this.styles[e]&&this.classes.push(this.styles[e]),this},r.prototype.addIf=function(e,t){return t?this.add(e):this},r.prototype.addResolved=function(e){return e&&e.length&&this.classes.push(e),this},r.prototype.getClasses=function(){return this.classes.join(" ")},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AUTH_COLLECTION="AUTH_COLLECTION",t.BATCH_ACTIONS="BATCH_ACTIONS",t.ERROR_DOCUMENT_NOT_FOUND="ERROR_DOCUMENT_NOT_FOUND",t.ERROR_MISSING_FIELDS="ERROR_MISSING_FIELDS",t.ERROR_PASSWORD_MISMATCH="ERROR_PASSWORD_MISMATCH",t.ERROR_ROUTE_NOT_FOUND="ERROR_ROUTE_NOT_FOUND",t.ERROR_WRONG_PASSWORD="ERROR_WRONG_PASSWORD",t.MEDIA_COLLECTION="mediaStore",t.NETWORK_OK="NETWORK_OK",t.NETWORK_NO_INTERNET_CONNECTION="NETWORK_NO_INTERNET_CONNECTION",t.NETWORK_SERVER_UNRESPONSIVE="NETWORK_SERVER_UNRESPONSIVE",t.NOTIFICATION_TYPE_SUCCESS="NOTIFICATION_TYPE_SUCCESS",t.NOTIFICATION_TYPE_ERROR="NOTIFICATION_TYPE_ERROR",t.NOTIFICATION_TYPE_WARNING="NOTIFICATION_TYPE_WARNING",t.PASSWORD_MISMATCH="PASSWORD_MISMATCH",t.STATUS_AUTHORISED="STATUS_AUTHORISED",t.STATUS_COMPLETE="STATUS_COMPLETE",t.STATUS_DELETING_SINGLE="STATUS_DELETING_SINGLE",t.STATUS_DELETING_MULTIPLE="STATUS_DELETING_MULTIPLE",t.STATUS_FAILED="STATUS_FAILED",t.STATUS_IDLE="STATUS_IDLE",t.STATUS_LOADING="STATUS_LOADING",t.STATUS_NOT_FOUND="STATUS_NOT_FOUND",t.STATUS_SAVING="STATUS_SAVING",t.STATUS_LOADED="STATUS_LOADED"},function(e,t,n){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function connectHelper(e,t){return(0,i.connect)(function(t){return{state:e(t)}},function(e){return t?{actions:t(e)}:{dispatch:e}})}function getUniqueId(){return u+"-"+a++}function objectToArray(e,t){return e?Object.keys(e).map(function(n){var r;return Object.assign({},(r={},_defineProperty(r,t||"key",n),_defineProperty(r,"value",e[n]),r))}):[]}function arrayToObject(e,t){return e.length?Object.assign.apply(Object,[{}].concat(_toConsumableArray(e.map(function(e){return _defineProperty({},e[t]||"key",e.value)})))):null}function isValidJSON(e){if(e&&"string"==typeof e)return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function isEmpty(e){return!e||"object"===(void 0===e?"undefined":r(e))&&e.length<1}function debounce(e,t,n){var r=void 0;return function(){var o=this,i=arguments,a=function(){r=null,n||e.apply(o,i)},u=n&&!r;clearTimeout(r),r=setTimeout(a,t),u&&e.apply(o,i)}}function throttle(e,t){var n=void 0,r=void 0;return function(){var o=this,i=(new Date).getTime(),a=arguments;n&&i<n+t?(clearTimeout(r),r=setTimeout(function(){n=i,e.apply(o,a)},t)):(n=i,e.apply(this,a))}}function setPageTitle(e){document.title=(e?e+" / ":"")+"DADI Publish"}function filterHiddenFields(e,t){return"string"!=typeof t?e:Object.assign.apply(Object,[{}].concat(_toConsumableArray(Object.keys(e).filter(function(n){return!e[n].publish||!e[n].publish.display||e[n].publish.display[t]}).map(function(t){return _defineProperty({},t,e[t])}))))}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.connectHelper=connectHelper,t.getUniqueId=getUniqueId,t.objectToArray=objectToArray,t.arrayToObject=arrayToObject,t.isValidJSON=isValidJSON,t.isEmpty=isEmpty,t.debounce=debounce,t.throttle=throttle,t.setPageTitle=setPageTitle,t.filterHiddenFields=filterHiddenFields;var o=n(3),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(o),n(5),n(8)),a=0,u="c"},function(e,t,n){"use strict";function isCrushed(){}Object.defineProperty(t,"__esModule",{value:!0});var r=n(66),o=n(215),i=n(214),a=n(213),u=n(65),s=n(67);n.d(t,"createStore",function(){return r.a}),n.d(t,"combineReducers",function(){return o.a}),n.d(t,"bindActionCreators",function(){return i.a}),n.d(t,"applyMiddleware",function(){return a.a}),n.d(t,"compose",function(){return u.a}),"production"!=={NODE_ENV:"production"}.NODE_ENV&&"string"==typeof isCrushed.name&&"isCrushed"!==isCrushed.name&&n.i(s.a)("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build.")},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(151),p=_interopRequireDefault(f),d=(o=r=function(e){function Button(){return _classCallCheck(this,Button),_possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).apply(this,arguments))}return _inherits(Button,e),i(Button,[{key:"render",value:function(){var e=this.props,t=e.accent,n=e.className,r=e.children,o=e.disabled,i=e.forId,u=e.href,s=e.inGroup,l=e.onClick,f=e.size,d=e.type,h=new c.default(p.default,"button");return h.add("button-"+String(t)).addIf("button-in-group-"+String(s),s).addIf("button-mock","mock"===d).addIf("button-"+String(f),"normal"!==f).addResolved(n),i?(0,a.h)("label",{class:h.getClasses(),for:i},r):"mock"===d?(0,a.h)("span",{class:h.getClasses()},r):u?(0,a.h)("a",{class:h.getClasses(),href:u},r):(0,a.h)("button",{class:h.getClasses(),disabled:o,onClick:l,type:d},r)}}]),Button}(a.Component),r.propTypes={accent:s.default.oneOf(["data","destruct","inherit","neutral","save","system"]),children:s.default.node,className:s.default.string,disabled:s.default.bool,forId:s.default.string,href:s.default.string,inGroup:s.default.oneOf(["left","middle","right"]),onClick:s.default.func,size:s.default.oneOf(["normal","small"]),type:s.default.oneOf(["button","mock","submit"])},r.defaultProps={accent:"neutral",className:"",disabled:!1,inGroup:null,size:"normal",type:"button"},o);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BATCH_ACTIONS="BATCH_ACTIONS",t.SET_APP_CONFIG="SET_APP_CONFIG",t.SET_APP_STATUS="SET_APP_STATUS",t.SET_NETWORK_STATUS="SET_NETWORK_STATUS",t.SET_NOTIFICATION="SET_NOTIFICATION",t.SET_SCREEN_WIDTH="SET_SCREEN_WIDTH",t.REGISTER_NETWORK_CALL="REGISTER_NETWORK_CALL",t.REGISTER_FAILED_SIGN_IN="REGISTER_FAILED_SIGN_IN",t.REQUEST_PASSWORD_RESET="REQUEST_PASSWORD_RESET",t.REQUEST_PASSWORD_RESET_SUCCESS="REQUEST_PASSWORD_RESET_SUCCESS",t.SET_REMOTE_USER="SET_REMOTE_USER",t.SET_USER_STATUS="SET_USER_STATUS",t.SIGN_OUT="SIGN_OUT",t.UPDATE_LOCAL_USER="UPDATE_LOCAL_USER",t.SET_API="SET_API",t.SET_API_LIST="SET_API_LIST",t.SET_API_STATUS="SET_API_STATUS",t.ATTEMPT_SAVE_DOCUMENT="ATTEMPT_SAVE_DOCUMENT",t.DELETE_DOCUMENTS="DELETE_DOCUMENTS",t.CLEAR_DOCUMENT_LIST="CLEAR_DOCUMENT_LIST",t.SET_DOCUMENT_SELECTION="SET_DOCUMENT_SELECTION",t.SET_DOCUMENT_LIST_STATUS="SET_DOCUMENT_LIST_STATUS",t.SET_DOCUMENT_LIST="SET_DOCUMENT_LIST",t.CLEAR_REMOTE_DOCUMENT="CLEAR_REMOTE_DOCUMENT",t.DISCARD_UNSAVED_CHANGES="DISCARD_UNSAVED_CHANGES",t.SAVE_DOCUMENT="SAVE_DOCUMENT",t.SET_DOCUMENT_PEERS="SET_DOCUMENT_PEERS",t.SET_ERRORS_FROM_REMOTE_API="SET_ERRORS_FROM_REMOTE_API",t.SET_FIELD_ERROR_STATUS="SET_FIELD_ERROR_STATUS",t.SET_REMOTE_DOCUMENT="SET_REMOTE_DOCUMENT",t.SET_REMOTE_DOCUMENT_STATUS="SET_REMOTE_DOCUMENT_STATUS",t.START_NEW_DOCUMENT="START_NEW_DOCUMENT",t.UPDATE_LOCAL_DOCUMENT="UPDATE_LOCAL_DOCUMENT",t.USER_LEAVING_DOCUMENT="USER_LEAVING_DOCUMENT",t.LOCATION_CHANGE="LOCATION_CHANGE",t.ROOM_CHANGE="ROOM_CHANGE"},function(e,t,n){!function(t,r){e.exports=r(n(0),n(5))}(0,function(e,t){function proptype(){}function warning(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function warnAboutReceivingStore(){l||(l=!0,warning("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions."))}function shallowEqual(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}function wrapActionCreators(e){return function(n){return t.bindActionCreators(e,n)}}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function isObjectLike(e){return!!e&&"object"==typeof e}function isPlainObject(e){if(!isObjectLike(e)||m.call(e)!=p||isHostObject(e))return!1;var t=f(e);if(null===t)return!0;var n=y.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&_.call(n)==b}function invariant(){}function getDisplayName(e){return e.displayName||e.name||"Component"}function tryCatch(e,t){try{return e.apply(t)}catch(e){return S.value=e,S}}function connect(t,n,r){var l=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],c=Boolean(t),f=t||O,p=void 0;p="function"==typeof n?n:n?wrapActionCreators(n):C;var d=r||w,h=l.pure,_=void 0===h||h,y=l.withRef,b=void 0!==y&&y,m=_&&d!==w,v=T++;return function(t){function checkStateShape(e,t){isPlainObject(e)||warning(t+"() in "+n+" must return a plain object. Instead received "+e+".")}function computeMergedProps(e,t,n){var r=d(e,t,n);return checkStateShape(r,"mergeProps"),r}var n="Connect("+getDisplayName(t)+")",r=function(r){function Connect(e,t){i(this,Connect);var o=s(this,r.call(this,e,t));o.version=v,o.store=e.store||t.store,invariant(o.store,'Could not find "store" in either the context or props of "'+n+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+n+'".');var a=o.store.getState();return o.state={storeState:a},o.clearCache(),o}return u(Connect,r),Connect.prototype.shouldComponentUpdate=function(){return!_||this.haveOwnPropsChanged||this.hasStoreStateChanged},Connect.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return checkStateShape(r,"mapStateToProps"),r},Connect.prototype.configureFinalMapState=function(e,t){var n=f(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:f,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):(checkStateShape(n,"mapStateToProps"),n)},Connect.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return checkStateShape(r,"mapDispatchToProps"),r},Connect.prototype.configureFinalMapDispatch=function(e,t){var n=p(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:p,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):(checkStateShape(n,"mapDispatchToProps"),n)},Connect.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!shallowEqual(e,this.stateProps))&&(this.stateProps=e,!0)},Connect.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!shallowEqual(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},Connect.prototype.updateMergedPropsIfNeeded=function(){var e=computeMergedProps(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&m&&shallowEqual(e,this.mergedProps))&&(this.mergedProps=e,!0)},Connect.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},Connect.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},Connect.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},Connect.prototype.componentDidMount=function(){this.trySubscribe()},Connect.prototype.componentWillReceiveProps=function(e){_&&shallowEqual(e,this.props)||(this.haveOwnPropsChanged=!0)},Connect.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},Connect.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},Connect.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!_||t!==e){if(_&&!this.doStatePropsDependOnOwnProps){var n=tryCatch(this.updateStatePropsIfNeeded,this);if(!n)return;n===S&&(this.statePropsPrecalculationError=S.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},Connect.prototype.getWrappedInstance=function(){return invariant(b,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},Connect.prototype.render=function(){var n=this.haveOwnPropsChanged,r=this.hasStoreStateChanged,o=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,u=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,i)throw i;var s=!0,l=!0;_&&u&&(s=r||n&&this.doStatePropsDependOnOwnProps,l=n&&this.doDispatchPropsDependOnOwnProps);var c=!1,f=!1;o?c=!0:s&&(c=this.updateStatePropsIfNeeded()),l&&(f=this.updateDispatchPropsIfNeeded());return!(!!(c||f||n)&&this.updateMergedPropsIfNeeded())&&u?u:(this.renderedElement=b?e.h(t,a({},this.mergedProps,{ref:"wrappedInstance"})):e.h(t,this.mergedProps),this.renderedElement)},Connect}(e.Component);return r.displayName=n,r.WrappedComponent=t,r.contextTypes={store:o},r.prototype.componentWillUpdate=function(){this.version!==v&&(this.version=v,this.trySubscribe(),this.clearCache())},g(r,t)}}var n={only:function(e){return e&&e[0]||null}};proptype.isRequired=proptype;var r={element:proptype,func:proptype,shape:function(){return proptype}},o=r.shape({subscribe:r.func.isRequired,dispatch:r.func.isRequired,getState:r.func.isRequired}),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=!1,c=function(e){function Provider(t,n){i(this,Provider);var r=s(this,e.call(this,t,n));return r.store=t.store,r}return u(Provider,e),Provider.prototype.getChildContext=function(){return{store:this.store}},Provider.prototype.render=function(){var e=this.props.children;return n.only(e)},Provider}(e.Component);c.prototype.componentWillReceiveProps=function(e){this.store!==e.store&&warnAboutReceivingStore()},c.childContextTypes={store:o.isRequired};var f=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),p="[object Object]",d=Function.prototype,h=Object.prototype,_=d.toString,y=h.hasOwnProperty,b=_.call(Object),m=h.toString,v=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},r="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,o,i){if("string"!=typeof o){var a=Object.getOwnPropertyNames(o);r&&(a=a.concat(Object.getOwnPropertySymbols(o)));for(var u=0;u<a.length;++u)if(!(t[a[u]]||n[a[u]]||i&&i[a[u]]))try{e[a[u]]=o[a[u]]}catch(e){}}return e}}),g=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(v),O=function(e){return{}},C=function(e){return{dispatch:e}},w=function(e,t,n){return a({},n,e,t)},S={value:null},T=0;return{Provider:c,connect:connect}})},function(e,t,n){"use strict";function assign(e,t){for(var n in t)e[n]=t[n];return e}function exec(e,t,n){void 0===n&&(n=o);var r,i=/(?:\?([^#]*))?(#.*)?$/,a=e.match(i),u={};if(a&&a[1])for(var s=a[1].split("&"),l=0;l<s.length;l++){var c=s[l].split("=");u[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=segmentize(e.replace(i,"")),t=segmentize(t||"");for(var f=Math.max(e.length,t.length),p=0;p<f;p++)if(t[p]&&":"===t[p].charAt(0)){var d=t[p].replace(/(^\:|[+*?]+$)/g,""),h=(t[p].match(/[+*?]+$/)||o)[0]||"",_=~h.indexOf("+"),y=~h.indexOf("*"),b=e[p]||"";if(!b&&!y&&(h.indexOf("?")<0||_)){r=!1;break}if(u[d]=decodeURIComponent(b),_||y){u[d]=e.slice(p).map(decodeURIComponent).join("/");break}}else if(t[p]!==e[p]){r=!1;break}return(!0===n.default||!1!==r)&&u}function pathRankSort(e,t){var n=e.attributes||o,r=t.attributes||o;return n.default?1:r.default?-1:rank(n.path)-rank(r.path)||n.path.length-r.path.length}function segmentize(e){return strip(e).split("/")}function rank(e){return(strip(e).match(/\/+/g)||"").length}function strip(e){return e.replace(/(^\/+|\/+$)/g,"")}function isPreactElement(e){return null!=e.__preactattr_||"undefined"!=typeof Symbol&&null!=e[Symbol.for("preactattr")]}function setUrl(e,t){void 0===t&&(t="push"),i&&i[t]?i[t](e):"undefined"!=typeof history&&history[t+"State"]&&history[t+"State"](null,null,e)}function getCurrentUrl(){var e;return e=i&&i.location?i.location:i&&i.getCurrentLocation?i.getCurrentLocation():"undefined"!=typeof location?location:s,""+(e.pathname||"")+(e.search||"")}function route(e,t){return void 0===t&&(t=!1),"string"!=typeof e&&e.url&&(t=e.replace,e=e.url),canRoute(e)&&setUrl(e,t?"replace":"push"),routeTo(e)}function canRoute(e){for(var t=a.length;t--;)if(a[t].canRoute(e))return!0;return!1}function routeTo(e){for(var t=!1,n=0;n<a.length;n++)!0===a[n].routeTo(e)&&(t=!0);for(var r=u.length;r--;)u[r](e);return t}function routeFromLink(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return route(t)}}function handleLinkClick(e){if(0==e.button)return routeFromLink(e.currentTarget||e.target||this),prevent(e)}function prevent(e){return e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault()),!1}function delegateLinkHandler(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||0!==e.button)){var t=e.target;do{if("A"===String(t.nodeName).toUpperCase()&&t.getAttribute("href")&&isPreactElement(t)){if(t.hasAttribute("native"))return;if(routeFromLink(t))return prevent(e)}}while(t=t.parentNode)}}function initEventListeners(){l||("function"==typeof addEventListener&&(i||addEventListener("popstate",function(){return routeTo(getCurrentUrl())}),addEventListener("click",delegateLinkHandler)),l=!0)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n.n(r);n.d(t,"subscribers",function(){return u}),n.d(t,"getCurrentUrl",function(){return getCurrentUrl}),n.d(t,"route",function(){return route}),n.d(t,"Router",function(){return c}),n.d(t,"Route",function(){return p}),n.d(t,"Link",function(){return f});var o={},i=null,a=[],u=[],s={},l=!1,c=function(e){function Router(t){e.call(this,t),t.history&&(i=t.history),this.state={url:t.url||getCurrentUrl()},initEventListeners()}return e&&(Router.__proto__=e),Router.prototype=Object.create(e&&e.prototype),Router.prototype.constructor=Router,Router.prototype.shouldComponentUpdate=function(e){return!0!==e.static||(e.url!==this.props.url||e.onChange!==this.props.onChange)},Router.prototype.canRoute=function(e){return this.getMatchingChildren(this.props.children,e,!1).length>0},Router.prototype.routeTo=function(e){return this._didRoute=!1,this.setState({url:e}),this.updating?this.canRoute(e):(this.forceUpdate(),this._didRoute)},Router.prototype.componentWillMount=function(){a.push(this),this.updating=!0},Router.prototype.componentDidMount=function(){var e=this;i&&(this.unlisten=i.listen(function(t){e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.updating=!1},Router.prototype.componentWillUnmount=function(){"function"==typeof this.unlisten&&this.unlisten(),a.splice(a.indexOf(this),1)},Router.prototype.componentWillUpdate=function(){this.updating=!0},Router.prototype.componentDidUpdate=function(){this.updating=!1},Router.prototype.getMatchingChildren=function(e,t,o){return e.slice().sort(pathRankSort).map(function(e){var i=e.attributes||{},a=i.path,u=exec(t,a,i);if(u){if(!1!==o){var s={url:t,matches:u};return assign(s,u),n.i(r.cloneElement)(e,s)}return e}return!1}).filter(Boolean)},Router.prototype.render=function(e,t){var n=e.children,r=e.onChange,o=t.url,i=this.getMatchingChildren(n,o,!0),a=i[0]||null;this._didRoute=!!a;var u=this.previousUrl;return o!==u&&(this.previousUrl=o,"function"==typeof r&&r({router:this,url:o,previous:u,active:i,current:a})),a},Router}(r.Component),f=function(e){return n.i(r.h)("a",assign({onClick:handleLinkClick},e))},p=function(e){return n.i(r.h)(e.component,e)};c.subscribers=u,c.getCurrentUrl=getCurrentUrl,c.route=route,c.Router=c,c.Route=p,c.Link=f,t.default=c},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(180),p=_interopRequireDefault(f),d=(o=r=function(e){function TextInput(e){_classCallCheck(this,TextInput);var t=_possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).call(this,e));return t.state.value=e.value||"",t}return _inherits(TextInput,e),i(TextInput,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.id,r=e.inLabel,o=e.placeholder,i=e.readonly,u=e.required,s=e.type,l=e.value,f=new c.default(p.default,"input");return f.addIf("input-in-label",r),f.addResolved(t),"multiline"===s?(0,a.h)("textarea",{class:f.getClasses(),id:n,onBlur:this.handleEvent.bind(this,"onBlur"),onChange:this.handleChange.bind(this),onFocus:this.handleEvent.bind(this,"onFocus"),onKeyUp:this.handleChange.bind(this),placeholder:o,readonly:i,required:u,rows:10},l):(0,a.h)("input",{class:f.getClasses(),id:n,onBlur:this.handleEvent.bind(this,"onBlur"),onChange:this.handleChange.bind(this),onFocus:this.handleEvent.bind(this,"onFocus"),onKeyUp:this.handleChange.bind(this),placeholder:o,readonly:i,required:u,type:s,value:l})}},{key:"handleChange",value:function(e){var t=this.props,n=t.onChange,r=t.onKeyUp,o=t.validation;return e.isValid=!o||o(e.target.value),"change"===e.type&&"function"==typeof n&&n.call(this,e),"keyup"===e.type&&"function"==typeof r&&r.call(this,e),!0}},{key:"handleEvent",value:function(e,t){"function"==typeof this.props[e]&&this.props[e].call(this,t)}}]),TextInput}(a.Component),r.propTypes={className:s.default.string,id:s.default.string,inLabel:s.default.bool,onBlur:s.default.func,onChange:s.default.func,onFocus:s.default.func,onKeyUp:s.default.func,placeholder:s.default.string,readonly:s.default.bool,required:s.default.bool,type:s.default.oneOf(["email","multiline","number","password","tel","text","url"]),validation:s.default.func,value:s.default.string},r.defaultProps={inLabel:!1,multiline:!1,readonly:!1,type:"text"},o);t.default=d},function(e,t,n){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function router(e){var t=(e.path,e.params,e.update,createRoute.apply(void 0,arguments));(0,o.route)(t)}function createRoute(e){var t=e.path,n=void 0===t?window.location.pathname:t,o=e.params,a=void 0===o?null:o,u=e.update,s=void 0!==u&&u,l=void 0,c="object"===(void 0===n?"undefined":r(n))?buildUrl.apply(void 0,_toConsumableArray(n)):n;if(s&&window.location.search&&(l=(0,i.urlHelper)().paramsToObject(window.location.search)),a&&(l=Object.assign({},l,a)),l&&Object.keys(l).length){var f=(0,i.urlHelper)().paramsToString(l);return String(c)+(f?"?"+String(f):"")}return""+String(c)}function buildUrl(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(/^(http|https)/.test(t[0])?"":"/")+t.filter(function(e){return("string"==typeof e||"number"==typeof e)&&""!==e}).join("/").replace(/^\/|\/$/g,"")}function redirectIf(e,t){e&&(0,o.route)(t)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.router=router,t.createRoute=createRoute,t.buildUrl=buildUrl,t.redirectIf=redirectIf;var o=n(9),i=n(57)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function registerNetworkCall(e,t){return{onComplete:t,status:e,type:a.REGISTER_NETWORK_CALL}}function loadAppConfig(e){return function(e,t){e(setAppStatus(o.STATUS_LOADING)),fetch("/config",{headers:{"Content-Type":"application/json"},method:"GET"}).then(function(e){return e.json()}).then(function(t){e({config:t,type:a.SET_APP_CONFIG})}).catch(function(t){e(setAppStatus(o.STATUS_FAILED))})}}function setAppStatus(e){return{status:e,type:a.SET_APP_STATUS}}function setNetworkStatus(e){return{networkStatus:e,type:a.SET_NETWORK_STATUS}}function setNotification(e){return{notification:Object.assign({},u,e,{timestamp:(new Date).getTime()}),type:a.SET_NOTIFICATION}}function setScreenWidth(e){return{type:a.SET_SCREEN_WIDTH,width:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerNetworkCall=registerNetworkCall,t.loadAppConfig=loadAppConfig,t.setAppStatus=setAppStatus,t.setNetworkStatus=setNetworkStatus,t.setNotification=setNotification,t.setScreenWidth=setScreenWidth,n(22);var r=n(3),o=_interopRequireWildcard(r),i=n(7),a=_interopRequireWildcard(i),u={dismissAfterRouteChange:!0,dismissAfterSeconds:10,dismissOnHover:!0,options:{},type:o.NOTIFICATION_TYPE_WARNING}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(4),p=n(168),d=_interopRequireDefault(p),h=(o=r=function(e){function Label(){return _classCallCheck(this,Label),_possibleConstructorReturn(this,(Label.__proto__||Object.getPrototypeOf(Label)).apply(this,arguments))}return _inherits(Label,e),i(Label,[{key:"componentWillMount",value:function(){this.id=(0,f.getUniqueId)()}},{key:"renderChildren",value:function(){var e=this,t=this.props,n=t.children,r=t.error,o=t.required;return n.map(function(t){return t&&(t.attributes=t.attributes||{},t.attributes.id=t.attributes.id||e.id,t.attributes.inLabel=!0,r&&(t.attributes.error=!0),o&&(t.attributes.required=!0)),t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.comment,r=e.compact,o=e.label,i=e.error,u=e.errorMessage,s=new c.default(d.default,"container").addIf("container-compact",r).addIf("container-error",i).addIf("container-error-message",u).addIf("container-with-comment",n).addResolved(t);return(0,a.h)("div",{class:s.getClasses()},this.renderChildren(),(0,a.h)("label",{for:this.id,class:d.default.label},o),n&&(0,a.h)("sub",{class:d.default.comment},n),u&&(0,a.h)("p",{class:d.default["error-message"]},u))}}]),Label}(a.Component),r.propTypes={className:s.default.string,comment:s.default.string,compact:s.default.bool,error:s.default.bool,errorMessage:s.default.string,label:s.default.string,children:s.default.node},r.defaultProps={compact:!1,error:!1,errorMessage:null,optional:!1,required:!1},o);t.default=h},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function clearRemoteDocument(){return{type:s.CLEAR_REMOTE_DOCUMENT}}function discardUnsavedChanges(e){var t=e.collection,n=e.group;return function(e,r){var o=getLocalStorageKey({collection:t,group:n,state:r()});a.clearDocument(o),e({type:s.DISCARD_UNSAVED_CHANGES})}}function fetchDocument(e){var t=e.api,n=e.collection,r=e.id,i=e.fields;return function(e){var a=(0,c.default)({api:t,collection:n}).whereFieldIsEqualTo("_id",r);i&&a.useFields(i),e(setRemoteDocumentStatus(o.STATUS_LOADING)),a.find().then(function(t){e(t.results.length?setRemoteDocument(t.results[0]):setRemoteDocumentStatus(o.STATUS_NOT_FOUND))}).catch(function(t){e(setRemoteDocumentStatus(o.STATUS_FAILED))})}}function getLocalStorageKey(e){var t=e.collection,n=e.documentId,r=e.group,o=e.state;return n||(o.document.remote?o.document.remote._id:JSON.stringify({collection:t,group:r}))}function registerSaveAttempt(){return{type:s.ATTEMPT_SAVE_DOCUMENT}}function registerUserLeavingDocument(e){var t=e.collection,n=e.documentId,r=e.group;return function(e,o){writeDocumentToLocalStorage({key:getLocalStorageKey({collection:t,documentId:n,group:r,state:o()}),state:o()}),e({type:s.USER_LEAVING_DOCUMENT})}}function saveDocument(e){var t=e.api,n=e.collection,r=e.document,i=e.documentId,u=e.group,l=e.urlCollection,f=function(e,t){return JSON.stringify(e)!==JSON.stringify(t)};return function(e,p){var d=p().document.remote,h=Boolean(i),_={},y=(0,c.default)({api:t,collection:n});if(e(setRemoteDocumentStatus(o.STATUS_SAVING)),h)Object.keys(r).forEach(function(e){f(r[e],d[e])&&(_[e]=r[e])}),y=y.whereFieldIsEqualTo("_id",i);else{_=Object.assign({},d,r);Object.keys(n.fields).filter(function(e){var t=n.fields[e];return t.required&&"Boolean"===t.type}).forEach(function(e){void 0===_[e]&&(_[e]=!1)})}var b=c.default.getBundler(),m=[];Object.keys(_).forEach(function(e){var r=n.fields[e];if(r){var i=r.settings&&r.settings.collection;if(_[e]&&"Reference"===r.type){var a=_[e],u=Array.isArray(a)?a:[a],s=r.settings&&void 0!==r.settings.limit&&r.settings.limit>0?r.settings.limit:1/0;if(i===o.MEDIA_COLLECTION)_[e]=u.map(function(n,r){return n._id?n._id:(b.add((0,c.default)({api:t,inBundle:!0}).inMedia().getSignedUrl({contentLength:n.contentLength,fileName:n.fileName,mimetype:n.mimetype})),m.push({field:e,index:r,mediaUpload:!0}),n)});else{var l=i&&t.collections.find(function(e){return e.slug===i});if(!l)return;_[e]=s>1?[]:null,u.forEach(function(n){n._id&&(b.add((0,c.default)({api:t,collection:l,inBundle:!0}).whereFieldIsEqualTo("_id",n._id).update(n)),m.push({field:e,limit:s}))})}}}}),b.run().then(function(n){var r=[];return n.forEach(function(e,n){var o=m[n],i=o.field,a=o.limit;if(o.mediaUpload){var u=uploadMedia(t,e.url,_[i][o.index]).then(function(e){e.results&&e.results.length&&(_[i][o.index]=e.results[0]._id)});r.push(u)}else e.results&&(_[i]=1===a?e.results[0]._id:_[i].concat(e.results.map(function(e){return e._id})))}),Promise.all(r).then(function(){return y=h?y.update(_):y.create(_),y.then(function(t){if(t.results&&t.results.length){e(setRemoteDocument(t.results[0],{clearLocal:!0,forceUpdate:!0}));var n=h?i:JSON.stringify({collection:l,group:u});a.clearDocument(n)}else e(setRemoteDocumentStatus(o.STATUS_FAILED))})}).catch(function(t){e(t.errors&&t.errors.length?{errors:t.errors,type:s.SET_ERRORS_FROM_REMOTE_API}:setRemoteDocumentStatus(o.STATUS_FAILED))})}).catch(function(t){e(setRemoteDocumentStatus(o.STATUS_FAILED))})}}function setDocumentPeers(e){return{peers:e,type:s.SET_DOCUMENT_PEERS}}function setFieldErrorStatus(e,t,n){return{error:n,field:e,type:s.SET_FIELD_ERROR_STATUS,value:t}}function setRemoteDocument(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clearLocal,r=void 0!==n&&n,o=t.fieldsNotInLocalStorage,i=void 0===o?[]:o,u=t.forceUpdate,l=void 0===u||u;return function(t,n){var o=e._id;r&&o&&a.clearDocument(o);var u=a.readDocument(o);t({clearLocal:r,fieldsNotInLocalStorage:i,forceUpdate:l,fromLocalStorage:u,remote:e,type:s.SET_REMOTE_DOCUMENT})}}function setRemoteDocumentStatus(e){return{status:e,type:s.SET_REMOTE_DOCUMENT_STATUS}}function startNewDocument(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collection,n=e.group;return function(e,r){var o=JSON.stringify({collection:t,group:n});e({document:a.readDocument(o)||{},type:s.START_NEW_DOCUMENT})}}function updateLocalDocument(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.collection,r=t.group,o=t.persistInLocalStorage,i=void 0===o||o;return function(t,o){writeDocumentToLocalStorage({document:Object.assign({},o().document.local,e),fieldsNotPersistedInLocalStorage:i?o().document.fieldsNotPersistedInLocalStorage:o().document.fieldsNotPersistedInLocalStorage.concat(Object.keys(e)),key:getLocalStorageKey({collection:n,group:r,state:o()}),state:o()}),t({change:e,persistInLocalStorage:i,type:s.UPDATE_LOCAL_DOCUMENT})}}function uploadMedia(e,t,n){var r=String(e.host)+":"+String(e.port)+String(t),o=new FormData;return o.append("file",n._file),fetch(r,{body:o,method:"POST"}).then(function(e){return e.json()})}function writeDocumentToLocalStorage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.document,n=e.fieldsNotPersistedInLocalStorage,r=e.key,o=e.state;if(t=t||o.document.local,n=n||o.document.fieldsNotPersistedInLocalStorage,t){var i={};Object.keys(t).forEach(function(e){n.includes(e)||(i[e]=t[e])}),Object.keys(i).length>0&&a.writeDocument(r,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.clearRemoteDocument=clearRemoteDocument,t.discardUnsavedChanges=discardUnsavedChanges,t.fetchDocument=fetchDocument,t.registerSaveAttempt=registerSaveAttempt,t.registerUserLeavingDocument=registerUserLeavingDocument,t.saveDocument=saveDocument,t.setDocumentPeers=setDocumentPeers,t.setFieldErrorStatus=setFieldErrorStatus,t.setRemoteDocument=setRemoteDocument,t.setRemoteDocumentStatus=setRemoteDocumentStatus,t.startNewDocument=startNewDocument,t.updateLocalDocument=updateLocalDocument,n(22);var r=n(3),o=_interopRequireWildcard(r),i=n(129),a=_interopRequireWildcard(i),u=n(7),s=_interopRequireWildcard(u),l=n(21),c=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function loadUserFromSession(){return function(e,t){runSessionQuery().then(function(t){e(setRemoteUser(t))}).catch(function(t){e(setUserStatus(o.STATUS_FAILED))})}}function registerFailedSignInAttempt(){return{type:a.REGISTER_FAILED_SIGN_IN}}function setPasswordReset(){return{resetEmail:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resetEmail,type:a.REQUEST_PASSWORD_RESET}}function setPasswordResetSuccess(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.response;return{error:t.error,success:t.success,type:a.REQUEST_PASSWORD_RESET_SUCCESS}}function requestPasswordReset(e){return function(t,n){return runSessionQuery({path:"/session/reset-token",payload:{email:e}}).then(function(n){t(setPasswordReset({resetEmail:e}))})}}function passwordReset(e,t){return function(n,r){return runSessionQuery({path:"/session/password-reset",payload:{password:t,token:e}}).then(function(e){return n(setPasswordResetSuccess({response:e}))})}}function runSessionQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.method,n=void 0===t?"GET":t,r=e.path,o=void 0===r?"/session":r,i=e.payload,a=void 0===i?null:i,u={credentials:"same-origin",headers:{"Content-Type":"application/json"},method:n};return a&&("GET"===u.method&&(u.method="POST"),u.body=JSON.stringify(a)),fetch(o,u).then(function(e){return e.json().then(function(t){return 200===e.status?t:Promise.reject(t)})})}function saveUser(e){var t=e.api,n=e.collection,r=e.user;return function(e,i){var a=i().user.remote;e(s.setRemoteDocumentStatus(o.STATUS_SAVING)),(0,c.default)({api:t,collection:n}).whereFieldIsEqualTo("_id",a._id).whereFieldIsEqualTo("email",a.email).update(r).then(function(t){if(t.results&&t.results.length){var n=t.results[0];e(s.setRemoteDocument(n,{clearLocal:!0})),e(setRemoteUser(n)),updateLocalUser(n)}else e(s.setRemoteDocumentStatus(o.STATUS_FAILED))}).catch(function(t){var r=Object.keys(n.fields).find(function(e){return n.fields[e].publish&&"Password"===n.fields[e].publish.subType});if(r){var a=i().document.validationErrors[r]||[];Array.isArray(t)&&(t.forEach(function(e){e.details&&e.details.includes("'WRONG_PASSWORD'")&&a.push(o.ERROR_WRONG_PASSWORD)}),e(s.setFieldErrorStatus(r,null,a)))}})}}function setRemoteUser(e){return{type:a.SET_REMOTE_USER,user:e}}function setUserStatus(e){return{status:e,type:a.SET_USER_STATUS}}function signIn(e,t){return function(n,r){runSessionQuery({method:"POST",payload:{password:t,username:e}}).then(function(e){n(setRemoteUser(e))}).catch(function(e){switch(e.err){case"MISSING_AUTH_API":n(setUserStatus(o.STATUS_NOT_FOUND));break;default:n(registerFailedSignInAttempt())}})}}function signOut(){return function(e,t){runSessionQuery({method:"DELETE"}).then(function(t){e({type:a.SIGN_OUT})})}}function updateLocalUser(e){return runSessionQuery({method:"PUT",payload:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserFromSession=loadUserFromSession,t.registerFailedSignInAttempt=registerFailedSignInAttempt,t.setPasswordReset=setPasswordReset,t.setPasswordResetSuccess=setPasswordResetSuccess,t.requestPasswordReset=requestPasswordReset,t.passwordReset=passwordReset,t.saveUser=saveUser,t.setRemoteUser=setRemoteUser,t.setUserStatus=setUserStatus,t.signIn=signIn,t.signOut=signOut,n(22);var r=n(3),o=_interopRequireWildcard(r),i=n(7),a=_interopRequireWildcard(i),u=n(15),s=_interopRequireWildcard(u),l=(n(19),n(21)),c=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(1),a=(_interopRequireDefault(i),n(170)),u=_interopRequireDefault(a),s=n(171),l=(_interopRequireDefault(s),n(123)),c=_interopRequireDefault(l),f=n(124),p=_interopRequireDefault(f),d=function(e){function Main(){return _classCallCheck(this,Main),_possibleConstructorReturn(this,(Main.__proto__||Object.getPrototypeOf(Main)).apply(this,arguments))}return _inherits(Main,e),r(Main,[{key:"render",value:function(){return(0,o.h)("main",{className:u.default.main},this.props.children,(0,o.h)(c.default,null),(0,o.h)(p.default,null))}}]),Main}(o.Component);t.default=d},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=(n(9),n(1)),s=_interopRequireDefault(u),l=n(5),c=n(16),f=_interopRequireWildcard(c),p=n(4),d=n(3),h=(_interopRequireWildcard(d),n(120)),_=_interopRequireDefault(h),y=n(107),b=_interopRequireDefault(y),m=n(108),v=_interopRequireDefault(m),g=n(2),O=_interopRequireDefault(g),C=n(184),w=_interopRequireDefault(C),S=(o=r=function(e){function Header(e){_classCallCheck(this,Header);var t=_possibleConstructorReturn(this,(Header.__proto__||Object.getPrototypeOf(Header)).call(this,e));return t.state.expanded=!1,t}return _inherits(Header,e),i(Header,[{key:"render",value:function(){var e=this.props.state,t=null===e.app.breakpoint,n=e.user.remote;if(!n)return null;var r=new O.default(w.default,"content");return r.addIf("content-compact",t),r.addIf("content-expanded",this.state.expanded),(0,a.h)("header",{class:w.default.header},t&&(0,a.h)("button",{type:"button",class:w.default.toggle,onClick:this.toggleCollapsed.bind(this,void 0)},(0,a.h)("span",{class:w.default["toggle-icon"]},this.state.expanded?(0,a.h)(v.default,{width:"16",height:"16"}):(0,a.h)(b.default,{width:"12",height:"16"})),(0,a.h)("span",{class:w.default["toggle-label"]},"Menu")),(0,a.h)("div",{class:r.getClasses(),onClick:this.toggleCollapsed.bind(this,!1)},(0,a.h)("div",{class:w.default.masthead},(0,a.h)("a",{href:"/"},(0,a.h)("img",{class:w.default.logo,src:"/images/publish.png"})),n&&!n.error&&(0,a.h)("div",{class:w.default.controls},(0,a.h)("button",{class:w.default.signout,onClick:this.handleSignOut.bind(this)},"Sign out"),(0,a.h)("a",{href:"/profile",class:w.default.user},String(n.first_name)+" "+String(n.last_name)))),(0,a.h)(_.default,null)))}},{key:"handleSignOut",value:function(){this.props.actions.signOut()}},{key:"toggleCollapsed",value:function(e,t){void 0===e&&(e=!this.state.expanded),this.setState({expanded:e})}}]),Header}(a.Component),r.propTypes={actions:s.default.object,state:s.default.object},o);t.default=(0,p.connectHelper)(function(e){return{app:e.app,user:e.user}},function(e){return(0,l.bindActionCreators)(f,e)})(S)},function(e,t,n){"use strict";function getApiForUrlParams(e,t){var n=t.collection,r=t.group;if(n===o.AUTH_COLLECTION)return e.find(function(e){return e._isAuthApi});var a=n.match(/(.*)-([0-9]+)/),u=a?a[1]:n,s=a?parseInt(a[2]):1,l=0;return e.find(function(e){if(e.collections&&e.collections.find(function(e){return e.slug===u})){var t=(e.menu||[]).find(function(e){return e.collections&&e.collections.includes(u)});if(!r&&!t)return++l===s;if(r&&t&&i.Format.slugify(t.title)===r)return++l===s}})}function getCollectionForUrlParams(e,t){var n=t.collection,r=t.group,i=t.useApi,a=t.referencedField,u=i||getApiForUrlParams(e,{collection:n,group:r});if(!u||!u.collections)return null;var s=void 0;if(n===o.AUTH_COLLECTION)s=u.collections.find(function(e){return e._isAuthCollection});else{var l=n.match(/(.*)-([0-9]+)/),c=l?l[1]:n;s=u.collections.find(function(e){return e.slug===c})}if(a){var f=s.fields[a],p=f&&f.settings&&f.settings.collection;p&&(s=p===o.MEDIA_COLLECTION?o.MEDIA_COLLECTION:u.collections.find(function(e){return e.slug===p}))}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.getApiForUrlParams=getApiForUrlParams,t.getCollectionForUrlParams=getCollectionForUrlParams;var r=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(25)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(1),a=(_interopRequireDefault(i),n(2)),u=(_interopRequireDefault(a),n(175)),s=_interopRequireDefault(u),l=function(e){function Page(){return _classCallCheck(this,Page),_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).apply(this,arguments))}return _inherits(Page,e),r(Page,[{key:"render",value:function(){return(0,o.h)("div",{class:s.default.container},this.props.children)}}]),Page}(o.Component);t.default=l},function(e,t,n){"use strict";function throttleAllow(){return clearInterval(l),l=setTimeout(function(){return u=0},1e3),++u<=a}n(22);var r=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(77),a=50,u=0,s=null,l=null,c=function(e){return throttleAllow()?fetch("/api",{body:JSON.stringify(e),credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return 200===e.status?e.json():e.json().then(function(e){var t=e.error||"";try{t=JSON.parse(t)}catch(e){}return Promise.reject(t)})}):Promise.reject("API_CALL_QUOTA_EXCEEDED")},f=function(e){var t=this,n=e.api,r=e.collection,a=void 0===r?{}:r,u=e.inBundle,l=void 0!==u&&u;if(!n)throw"apiBridgeFactory: Missing API";var f=n.publishId,p=n.host,d=n.port,h=a.database,_=a.version,y=function(e){var t=Object.assign({},e,{publishId:f});return l?t:b(t)},b=function(e){return"function"==typeof s&&s.call(t,o.STATUS_LOADING),c(e).then(function(e){if("function"==typeof s){var n=s.bind(t,o.STATUS_COMPLETE);s.call(t,o.STATUS_IDLE,n)}return e}).catch(function(e){return"function"==typeof s&&s.call(t,o.STATUS_FAILED),Promise.reject(e)})},m={callback:y,database:h,port:d,uri:p,version:_},v=new i(m).withComposition();return a.slug&&(v=v.in(a.slug)),v};e.exports=f,e.exports.getBundler=function(){var e=function(e){this.queries=[]};return e.prototype.add=function(e){this.queries.push(e)},e.prototype.run=function(){var e=this;return"function"==typeof s&&s.call(this,o.STATUS_LOADING),0===this.queries.length?Promise.resolve([]):c(this.queries).then(function(t){if("function"==typeof s){var n=s.bind(e,o.STATUS_COMPLETE);s.call(e,o.STATUS_IDLE,n)}return t}).catch(function(t){return"function"==typeof s&&s.call(e,o.STATUS_FAILED),Promise.reject(t)})},new e},e.exports.registerProgressCallback=function(e){s=e}},function(e,t,n){window.fetch||(window.fetch=n(70).default||n(70))},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function clearDocumentList(){return{type:a.CLEAR_DOCUMENT_LIST}}function deleteDocuments(e){var t=e.api,n=e.collection,r=e.ids;return function(e){var i=(0,s.default)({api:t,collection:n}).whereFieldIsOneOf("_id",r),u=r.length>1?o.STATUS_DELETING_MULTIPLE:o.STATUS_DELETING_SINGLE;e(setDocumentListStatus(u)),i.delete().then(function(t){e({ids:r,type:a.DELETE_DOCUMENTS})})}}function fetchDocuments(e){var t=e.api,n=e.collection,r=(e.count,e.filters),i=e.page,a=e.parentDocumentId,u=e.parentCollection,f=e.referencedField,p=e.sortBy,d=e.sortOrder;return function(e){var h=s.default.getBundler(),_=void 0;_=n===o.MEDIA_COLLECTION?(0,s.default)({api:t,inBundle:!0}).inMedia():(0,s.default)({api:t,collection:n,inBundle:!0}),_=_.goToPage(i).sortBy(p||"createdAt",d||"desc").where(r).find(),h.add(_),f&&u&&h.add((0,s.default)({api:t,collection:u,inBundle:!0}).whereFieldIsEqualTo("_id",a).find()),e(setDocumentListStatus(o.STATUS_LOADING)),h.run().then(function(t){var n=t[0],o=[setDocumentList(n,r)];if(f){var i=t[1].results[0];o.push((0,c.setRemoteDocument)(i,{forceUpdate:!1}))}e((0,l.batchActions)(o))})}}function setDocumentList(e,t){return{documents:e,query:t,type:a.SET_DOCUMENT_LIST}}function setDocumentSelection(e){return{selectedDocuments:e,type:a.SET_DOCUMENT_SELECTION}}function setDocumentListStatus(e){return{status:e,type:a.SET_DOCUMENT_LIST_STATUS}}Object.defineProperty(t,"__esModule",{value:!0}),t.clearDocumentList=clearDocumentList,t.deleteDocuments=deleteDocuments,t.fetchDocuments=fetchDocuments,t.setDocumentList=setDocumentList,t.setDocumentSelection=setDocumentSelection,t.setDocumentListStatus=setDocumentListStatus;var r=n(3),o=_interopRequireWildcard(r),i=n(7),a=_interopRequireWildcard(i),u=n(21),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(39),c=(n(12),n(15))},function(e,t,n){"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function(){function Keys(){_classCallCheck(this,Keys)}return r(Keys,[{key:"find",value:function(e){var t=this;return e.map(function(e){return t.keys[e]}).filter(function(e){return e})}},{key:"keys",get:function(){for(var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},t=97;t<123;t++)e[String.fromCharCode(t)]=t-32;for(var n=48;n<58;n++)e[n-48]=n;for(var r=1;r<13;r++)e["f"+r]=r+111;for(var o=0;o<10;o++)e["numpad "+o]=o+96;return e}}]),Keys}(),i=function(){function Pattern(e,t){_classCallCheck(this,Pattern),this.pattern=e,this.keys=t,this.active=0}return r(Pattern,[{key:"next",value:function(e){return this.match(e,this.keys[this.active])?this.active<this.keys.length-1?(this.active++,!1):(this.callback({keys:this.keys,pattern:this.pattern}),this.reset(),!0):(this.reset(),!1)}},{key:"match",value:function(e,t){return e===t}},{key:"reset",value:function(){this.active=0}},{key:"do",value:function(e){this.callback=e}}]),Pattern}();t.Keyboard=function(e){function Keyboard(){_classCallCheck(this,Keyboard);var e=_possibleConstructorReturn(this,(Keyboard.__proto__||Object.getPrototypeOf(Keyboard)).call(this));return e.shortcuts=[],e.listen(),e}return _inherits(Keyboard,e),r(Keyboard,[{key:"listen",value:function(){this.keydown=this.keydown.bind(this),this.keyup=this.keyup.bind(this),window&&(window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup))}},{key:"keydown",value:function(e){if(e.keyCode){this.findShortcut(e.keyCode)&&e.preventDefault()}}},{key:"keyup",value:function(e){this.shortcuts.forEach(function(e){e.reset()}),e.preventDefault()}},{key:"findShortcut",value:function(e){return this.shortcuts.find(function(t){return t.next(e)})}},{key:"on",value:function(e){var t=this.find(e.toLowerCase().split("+")),n=new i(e,t);return this.shortcuts.push(n),n}},{key:"off",value:function(){window&&(window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}}]),Keyboard}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Format={camelCase:function(e){return e.replace(/\s(.)/g,function(e){return e.toUpperCase()}).replace(/\s/g,"").replace(/^(.)/,function(e){return e.toUpperCase()})},sentenceCase:function(e){return e?e.split(".").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("."):""},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/\/+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}}},function(e,t){e.exports={table:"Table__table___37tHI",cell:"Table__cell___1ce6E",head:"Table__head___3UKRI","head-cell":"Table__head-cell___2xFap","head-cell-label":"Table__head-cell-label___2MzqB","head-cell-arrow":"Table__head-cell-arrow___1LGkD",row:"Table__row___UCuDx","row-cell-blank":"Table__row-cell-blank___1ygoH","row-selected":"Table__row-selected___16j5O","select-cell":"Table__select-cell___10H9i",select:"Table__select___2ajlq"}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(191),i=function(){function DateTime(e,t){if(_classCallCheck(this,DateTime),e instanceof Date)this.dateObj=e;else if("number"==typeof e)this.dateObj=new Date(e);else if("string"==typeof e)if(t)try{this.dateObj=o.parse(e,t)}catch(e){console.error("Error parsing date")}else{var n=parseInt(e);n.toString()===e?this.dateObj=new Date(n):this.dateObj=new Date(Date.parse(e))}}return r(DateTime,[{key:"format",value:function(e){var t=null;try{t=o.format(this.dateObj,e)}catch(e){console.error("Error formatting date")}return t}},{key:"getDate",value:function(){return this.dateObj}},{key:"isSameDayAs",value:function(e){return!!this.isValid(e)&&(this.dateObj.getFullYear()===e.getFullYear()&&this.dateObj.getMonth()===e.getMonth()&&this.dateObj.getDate()===e.getDate())}},{key:"isValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateObj;return e instanceof Date&&!isNaN(e.getTime())}}]),DateTime}();t.default=i},function(e,t,n){"use strict";t.decode=t.parse=n(211),t.encode=t.stringify=n(212)},function(e,t,n){var r=n(148);Object.create||(Object.create=n(218));var o=function(){r.call(this)};o.prototype=Object.create(r.prototype),o.prototype.emit=function(e){if("error"==e){var t=["__domainError"];if(void 0!==arguments[1]&&t.push(arguments[1]),r.prototype.emit.apply(this,t),this.domain){var n=arguments[1];n||(n=new Error('Uncaught, unspecified "error" event.')),n.domainEmitter=this,n.domain=this.domain,n.domainThrown=!1,this.domain.emit("error",n)}}r.prototype.emit.apply(this,arguments)},e.exports.SCEmitter=o},function(e,t,n){function AuthTokenExpiredError(e,t){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenExpiredError",this.message=e,this.expiry=t}function AuthTokenInvalidError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenInvalidError",this.message=e}function AuthTokenNotBeforeError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenNotBeforeError",this.message=e}function AuthTokenError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="AuthTokenError",this.message=e}function SilentMiddlewareBlockedError(e,t){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="SilentMiddlewareBlockedError",this.message=e,this.type=t}function InvalidActionError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidActionError",this.message=e}function InvalidArgumentsError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidArgumentsError",this.message=e}function InvalidOptionsError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidOptionsError",this.message=e}function InvalidMessageError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="InvalidMessageError",this.message=e}function SocketProtocolError(e,t){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="SocketProtocolError",this.message=e,this.code=t}function ServerProtocolError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ServerProtocolError",this.message=e}function HTTPServerError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="HTTPServerError",this.message=e}function ResourceLimitError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ResourceLimitError",this.message=e}function TimeoutError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="TimeoutError",this.message=e}function BrokerError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="BrokerError",this.message=e}function ProcessExitError(e,t){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="ProcessExitError",this.message=e,this.code=t}function UnknownError(e){Error.captureStackTrace&&!o?Error.captureStackTrace(this,arguments.callee):this.stack=(new Error).stack,this.name="UnknownError",this.message=e}var r=n(149),o=function(){return!this}();AuthTokenExpiredError.prototype=Object.create(Error.prototype),AuthTokenInvalidError.prototype=Object.create(Error.prototype),AuthTokenNotBeforeError.prototype=Object.create(Error.prototype),AuthTokenError.prototype=Object.create(Error.prototype),SilentMiddlewareBlockedError.prototype=Object.create(Error.prototype),InvalidActionError.prototype=Object.create(Error.prototype),InvalidArgumentsError.prototype=Object.create(Error.prototype),InvalidOptionsError.prototype=Object.create(Error.prototype),InvalidMessageError.prototype=Object.create(Error.prototype),SocketProtocolError.prototype=Object.create(Error.prototype),ServerProtocolError.prototype=Object.create(Error.prototype),HTTPServerError.prototype=Object.create(Error.prototype),ResourceLimitError.prototype=Object.create(Error.prototype),TimeoutError.prototype=Object.create(Error.prototype),BrokerError.prototype=Object.create(Error.prototype),ProcessExitError.prototype=Object.create(Error.prototype),UnknownError.prototype=Object.create(Error.prototype),e.exports={AuthTokenExpiredError:AuthTokenExpiredError,AuthTokenInvalidError:AuthTokenInvalidError,AuthTokenNotBeforeError:AuthTokenNotBeforeError,AuthTokenError:AuthTokenError,SilentMiddlewareBlockedError:SilentMiddlewareBlockedError,InvalidActionError:InvalidActionError,InvalidArgumentsError:InvalidArgumentsError,InvalidOptionsError:InvalidOptionsError,InvalidMessageError:InvalidMessageError,SocketProtocolError:SocketProtocolError,ServerProtocolError:ServerProtocolError,HTTPServerError:HTTPServerError,ResourceLimitError:ResourceLimitError,TimeoutError:TimeoutError,BrokerError:BrokerError,ProcessExitError:ProcessExitError,UnknownError:UnknownError},e.exports.socketProtocolErrorStatuses={1001:"Socket was disconnected",1002:"A WebSocket protocol error was encountered",1003:"Server terminated socket because it received invalid data",1005:"Socket closed without status code",1006:"Socket hung up",1007:"Message format was incorrect",1008:"Encountered a policy violation",1009:"Message was too big to process",1010:"Client ended the connection because the server did not comply with extension requirements",1011:"Server encountered an unexpected fatal condition",4e3:"Server ping timed out",4001:"Client pong timed out",4002:"Server failed to sign auth token",4003:"Failed to complete handshake",4004:"Client failed to save auth token",4005:"Did not receive #handshake from client before timeout",4006:"Failed to bind socket to message broker",4007:"Client connection establishment timed out"},e.exports.socketProtocolIgnoreStatuses={1e3:"Socket closed normally",1001:"Socket hung up"};var i={domain:1,domainEmitter:1,domainThrown:1};e.exports.dehydrateError=function(e,t){var n;if(e&&"string"!=typeof e){n={message:e.message},t&&(n.stack=e.stack);for(var o in e)i[o]||(n[o]=e[o])}else n=e;return r.decycle(n)},e.exports.hydrateError=function(e){var t=null;if(null!=e)if("string"==typeof e)t=e;else{t=new Error(e.message);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function loadApis(){return function(e,t){var n=t().app.config,r=n.apis,i=n.auth;if(r){e(setApiStatus(o.STATUS_LOADING));var a=r.length,u=[];r.forEach(function(t){(0,s.default)({api:t}).getCollections().then(function(n){var r=n.collections,l=s.default.getBundler();r.forEach(function(e){var n=(0,s.default)({api:t,collection:e,inBundle:!0}).getConfig();l.add(n)}),l.run().then(function(n){var o=i.host===t.host&&i.port===t.port,s=n.map(function(e,t){return e.apiBridgeError?null:Object.assign({},e,r[t],{_isAuthCollection:o&&i.collection===r[t].slug})}).filter(Boolean).filter(function(e){return!(e.settings.publish&&e.settings.publish.hidden)}),l=Object.assign({},t,{_failedCollections:n.length-s.length,_isAuthApi:o,collections:s});u.push(l),0===--a&&e(setApiList(u))}).catch(function(t){e(setApiStatus(o.STATUS_FAILED))})}).catch(function(t){e(setApiStatus(o.STATUS_FAILED))})})}}}function setApiList(e){return{apis:e,type:a.SET_API_LIST}}function setApi(e){return{api:e,type:a.SET_API}}function setApiStatus(e){return{status:e,type:a.SET_API_STATUS}}function setCurrentCollection(e){return{collectionName:e,type:a.SET_API_CURRENT_COLLECTION}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadApis=loadApis,t.setApiList=setApiList,t.setApi=setApi,t.setApiStatus=setApiStatus,t.setCurrentCollection=setCurrentCollection;var r=n(3),o=_interopRequireWildcard(r),i=n(7),a=_interopRequireWildcard(i),u=n(21),s=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(153),p=_interopRequireDefault(f),d=n(6),h=_interopRequireDefault(d),_=n(114),y=_interopRequireDefault(_),b=(o=r=function(e){function ButtonWithPrompt(e){_classCallCheck(this,ButtonWithPrompt);var t=_possibleConstructorReturn(this,(ButtonWithPrompt.__proto__||Object.getPrototypeOf(ButtonWithPrompt)).call(this,e));return t.state.visible=!1,t.promptRef=null,t.promptInsideClickHandler=t.handlePromptClick.bind(t,!0),t.promptOutsideClickHandler=t.handlePromptClick.bind(t,!1),t}return _inherits(ButtonWithPrompt,e),i(ButtonWithPrompt,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.promptOutsideClickHandler)}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.promptCallToAction,r=e.promptMessage,o=this.state.visible,i=this.props.onClick,u=Object.assign({},this.props,{onClick:this.handleClickHijack.bind(this)});delete u.promptCallToAction,delete u.promptMessage;var s=new c.default(p.default,"prompt").add("prompt-"+String(t));return(0,a.h)("div",{class:p.default.container,ref:this.handlePromptRef.bind(this)},(0,a.h)(h.default,u,this.props.children),o&&(0,a.h)(y.default,{action:n,className:s.getClasses(),onClick:i,position:t},r))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.promptOutsideClickHandler),this.promptRef&&this.promptRef.removeEventListener("click",this.promptInsideClickHandler)}},{key:"handleClickHijack",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"handlePromptClick",value:function(e,t){var n=this.state.visible;e?t.stopPropagation():n&&this.setState({visible:!1})}},{key:"handlePromptRef",value:function(e){this.promptRef||(this.promptRef=e,e.addEventListener("click",this.promptInsideClickHandler))}}]),ButtonWithPrompt}(a.Component),r.propTypes={position:s.default.oneOf(["left","right"]),promptCallToAction:s.default.string,promptMessage:s.default.string},r.defaultProps={position:"right"},o);t.default=b},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(3),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n(6),p=_interopRequireDefault(f),d=n(35),h=_interopRequireDefault(d),_=(o=r=function(e){function ErrorMessage(){return _classCallCheck(this,ErrorMessage),_possibleConstructorReturn(this,(ErrorMessage.__proto__||Object.getPrototypeOf(ErrorMessage)).apply(this,arguments))}return _inherits(ErrorMessage,e),i(ErrorMessage,[{key:"render",value:function(){var e=this.getErrorData();return(0,a.h)(h.default,{title:e.title,subtitle:e.message},e.body||null)}},{key:"getErrorData",value:function(){var e=this.props,t=e.data;switch(e.type){case c.ERROR_DOCUMENT_NOT_FOUND:return{body:t.href&&(0,a.h)(p.default,{accent:"system",href:t.href},"List documents"),message:"You're looking for a document that doesn't seem to exist.",title:"Oops!"};case c.ERROR_ROUTE_NOT_FOUND:return{message:"We couldn't find the page you're looking for, sorry.",title:"404"};case c.STATUS_FAILED:return{body:(0,a.h)(p.default,{accent:"system",href:window.location.pathname},"Try again"),message:"The API doesn't seem to be responding.",title:"API failure"};default:return{message:"Something went wrong, sorry.",title:"Oops!"}}}}]),ErrorMessage}(a.Component),r.propTypes={data:s.default.object,type:s.default.string},r.defaultProps={data:{}},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(164)),f=_interopRequireDefault(c),p=(o=r=function(e){function HeroMessage(){return _classCallCheck(this,HeroMessage),_possibleConstructorReturn(this,(HeroMessage.__proto__||Object.getPrototypeOf(HeroMessage)).apply(this,arguments))}return _inherits(HeroMessage,e),i(HeroMessage,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.subtitle,r=e.title;return(0,a.h)("div",{class:f.default.container},r&&(0,a.h)("h1",{class:f.default.title},r),n&&(0,a.h)("p",{class:f.default.subtitle},n),(0,a.h)("div",{class:f.default.children},t))}}]),HeroMessage}(a.Component),r.propTypes={children:s.default.node,subtitle:s.default.string,title:s.default.string},o);t.default=p},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(61),p=_interopRequireDefault(f),d=(o=r=function(e){function Toolbar(){return _classCallCheck(this,Toolbar),_possibleConstructorReturn(this,(Toolbar.__proto__||Object.getPrototypeOf(Toolbar)).apply(this,arguments))}return _inherits(Toolbar,e),i(Toolbar,[{key:"render",value:function(){var e=this.props.padded,t=new c.default(p.default,"container");return t.addIf("container-padded",e),(0,a.h)("footer",{class:t.getClasses()},this.props.children)}}]),Toolbar}(a.Component),r.propTypes={children:s.default.node,padded:s.default.bool},r.defaultProps={padded:!0},o);t.default=d},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),s=n(1),l=_interopRequireDefault(s),c=(n(8),n(9)),f=n(5),p=n(2),d=_interopRequireDefault(p),h=n(181),_=_interopRequireDefault(h),y=n(3),b=_interopRequireWildcard(y),m=n(12),v=_interopRequireWildcard(m),g=n(15),O=_interopRequireWildcard(g),C=n(23),w=_interopRequireWildcard(C),S=n(81),T=_interopRequireWildcard(S),E=n(38),P=_interopRequireWildcard(E),R=n(21),k=(_interopRequireDefault(R),n(11)),D=n(4),j=n(25),A=n(19),I=n(34),N=_interopRequireDefault(I),U=n(50),q=_interopRequireDefault(U),M=(o=r=function(e){function DocumentEdit(e){_classCallCheck(this,DocumentEdit);var t=_possibleConstructorReturn(this,(DocumentEdit.__proto__||Object.getPrototypeOf(DocumentEdit)).call(this,e));return t.hasFetched=!1,t}return _inherits(DocumentEdit,e),a(DocumentEdit,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.collection,o=n.documentId,i=n.group,a=n.onBuildBaseUrl,u=n.onPageTitle,s=n.referencedField,l=n.section,f=n.state,p=(0,A.getApiForUrlParams)(f.api.apis,{collection:r,group:i}),d=(0,A.getCollectionForUrlParams)(f.api.apis,{collection:r,group:i,referencedField:s,useApi:p}),h=o?"edit":"new";if("function"==typeof u&&u(String(j.Format.sentenceCase(h))+" document"),d){var _=(0,D.filterHiddenFields)(d.fields,"editor"),y=this.groupFields(_);if(l){if(!y.sections.find(function(e){return e.slug===l})){var b=y.sections[0],m=a();return(0,c.route)(k.buildUrl.apply(void 0,_toConsumableArray(m).concat([o,b.slug]))),!1}}}this.currentApi=p,this.currentCollection=d}},{key:"handleRoomChange",value:function(){var e=this.props,t=e.state,n=e.actions,r=e.documentId;r&&t.router.room!==r&&n.roomChange(r)}},{key:"componentWillUpdate",value:function(e,t){this.handleRoomChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.actions,o=n.collection,i=n.documentId,a=n.group,u=n.state,s=u.document,l=e.state.document,c=s.remoteStatus;if(!l.local&&s.local&&s.loadedFromLocalStorage){var f={message:"You have unsaved changes",options:{"Discard them?":r.discardUnsavedChanges.bind(this,{collection:o,group:a})}};r.setNotification(f)}if(!this.hasFetched||c!==b.STATUS_NOT_FOUND){if(!i)return void(!s.local&&this.currentCollection&&r.startNewDocument({collection:o,group:a}));var p=s.remoteStatus===b.STATUS_IDLE,d=s.remote&&i!==s.remote._id,h=!s.remote||d;p&&h&&this.currentCollection&&(this.handleRoomChange(),this.fetchDocument())}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,n=e.collection,r=e.documentId,o=e.group,i=e.referencedField,a=e.state,u=(0,A.getApiForUrlParams)(a.api.apis,{collection:n,group:o}),s=(0,A.getCollectionForUrlParams)(a.api.apis,{collection:n,group:o,referencedField:i,useApi:u});this.currentApi=u,this.currentCollection=s,this.userLeavingDocumentHandler=this.handleUserLeavingDocument.bind(this),window.addEventListener("beforeunload",this.userLeavingDocumentHandler),a.document.remote&&a.document.remote._id!==r&&t.clearRemoteDocument()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.actions;e.documentId;window.removeEventListener("beforeunload",this.userLeavingDocumentHandler),t.roomChange(null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.collection,r=(t.documentId,t.group),o=t.onBuildBaseUrl,i=(t.referencedField,t.section),a=t.state,s=a.document,l=s.remoteStatus;if(l===b.STATUS_NOT_FOUND)return(0,u.h)(N.default,{data:{href:(0,k.buildUrl)(r,n,"documents")},type:b.ERROR_DOCUMENT_NOT_FOUND});if(l===b.STATUS_IDLE&&!this.currentCollection&&this.hasFetched)return(0,u.h)(N.default,{type:b.ERROR_ROUTE_NOT_FOUND});if(l===b.STATUS_LOADING||!s.local)return null;var c=(0,D.filterHiddenFields)(this.currentCollection.fields,"editor"),f=this.groupFields(c),p=f.sections||[{slug:"other",fields:f.other}],h=i||p[0].slug,y=(s.validationErrors,Object.assign({},s.remote,s.local));return(0,u.h)("div",{class:_.default.container},f.sections&&(0,u.h)("div",{class:_.default.navigation},f.sections.map(function(e){var t=h===e.slug,n=o(),r=k.buildUrl.apply(void 0,_toConsumableArray(n).concat([e.slug]));return(0,u.h)(q.default,{active:t,error:e.hasErrors,href:r},e.name)})),p.map(function(t){var n=new d.default(_.default,"section");n.addIf("section-active",t.slug===h);var r={main:t.fields.filter(function(e){return!e.publish||"main"===e.publish.placement}),sidebar:t.fields.filter(function(e){return e.publish&&"sidebar"===e.publish.placement})},o=new d.default(_.default,"main");return o.addIf("main-full",!r.sidebar.length),(0,u.h)("section",{class:n.getClasses()},(0,u.h)("div",{class:o.getClasses()},r.main.map(function(t){return e.renderField(t,y[t._id])})),r.sidebar.length>0&&(0,u.h)("div",{class:_.default.sidebar},r.sidebar.map(function(t){return e.renderField(t,y[t._id])})))}))}},{key:"fetchDocument",value:function(){var e=this.props,t=e.actions,n=e.collection,r=e.documentId,o=e.group,i=e.state,a=(0,A.getCollectionForUrlParams)(i.api.apis,{collection:n,group:o}),u=Object.keys((0,D.filterHiddenFields)(a.fields,"editor")).concat(["createdAt","createdBy","lastModifiedAt","lastModifiedBy"]),s={api:this.currentApi,collection:a,id:r,fields:u};t.fetchDocument(s),this.hasFetched=!0}},{key:"groupFields",value:function(e){var t=this.props.state,n=t.document,r={},o=null,i=[];return Object.keys(e).forEach(function(t){var n=Object.assign({},e[t],{_id:t}),o=n.publish&&n.publish.section;o?(r[o]=r[o]||[],r[o].push(n)):i.push(n)}),Object.keys(r).length&&(o=Object.keys(r).map(function(e){var t=r[e];return{fields:t,hasErrors:n.validationErrors&&t.some(function(e){return n.validationErrors[e._id]}),name:e,slug:j.Format.slugify(e)}})),{sections:o,other:i}}},{key:"handleFieldChange",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.props,o=r.actions,i=r.collection,a=(r.documentId,r.group);o.updateLocalDocument(_defineProperty({},e,t),{collection:i,group:a,persistInLocalStorage:n})}},{key:"handleFieldError",value:function(e,t,n){this.props.actions.setFieldErrorStatus(e,n,t)}},{key:"handleUserLeavingDocument",value:function(){var e=this.props,t=e.actions,n=e.documentId,r=e.group;t.registerUserLeavingDocument({collection:this.currentCollection.name,documentId:n,group:r})}},{key:"renderField",value:function(e,t){var n=this.props,r=n.collection,o=n.documentId,i=n.group,a=n.onBuildBaseUrl,s=n.state,l=s.app,c=s.document,f=Boolean(c.saveAttempts),p=c.validationErrors&&c.validationErrors[e._id],d="string"==typeof p?"This field "+p:p,h=e.publish&&e.publish.subType?e.publish.subType:e.type,y="Field"+String(h),b=P[y]&&P[y].edit;return b?(0,u.h)("div",{class:_.default.field},(0,u.h)(b,{collection:r,config:l.config,currentApi:this.currentApi,currentCollection:this.currentCollection,documentId:o,error:d,forceValidation:f,group:i,onBuildBaseUrl:a,onChange:this.handleFieldChange.bind(this),onError:this.handleFieldError.bind(this),schema:e,value:t})):(console.warn("Unknown field type:",h),null)}}]),DocumentEdit}(u.Component),r.propTypes={actions:l.default.object,collection:l.default.string,documentId:l.default.string,group:l.default.string,onBuildBaseUrl:l.default.func,onPageTitle:l.default.func,referencedField:l.default.string,section:l.default.string,state:l.default.object},o);t.default=(0,D.connectHelper)(function(e){return{api:e.api,app:e.app,document:e.document,user:e.user,router:e.router}},function(e){return(0,f.bindActionCreators)(i({},v,O,w,T),e)})(M)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldString=t.FieldReference=t.FieldPassword=t.FieldNumber=t.FieldImage=t.FieldDateTime=t.FieldBoolean=void 0;var r=n(85),o=_interopRequireWildcard(r),i=n(89),a=_interopRequireWildcard(i),u=n(92),s=_interopRequireWildcard(u),l=n(95),c=_interopRequireWildcard(l),f=n(98),p=_interopRequireWildcard(f),d=n(100),h=_interopRequireWildcard(d),_=n(102),y=_interopRequireWildcard(_);t.FieldBoolean=o,t.FieldDateTime=a,t.FieldImage=s,t.FieldNumber=c,t.FieldPassword=p,t.FieldReference=h,t.FieldString=y},function(e,t,n){"use strict";function batchActions(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{actions:1===t.length?t[0]:t,type:o.BATCH_ACTIONS}}function enableBatching(e){return function batchingReducer(t,n){switch(n.type){case o.BATCH_ACTIONS:return n.actions.reduce(batchingReducer,t);default:return e(t,n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.batchActions=batchActions,t.enableBatching=enableBatching;var r=n(7),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r)},function(e,t,n){"use strict";(function(e){var t=n(220),r=function(){return this.queuedTasks=[],this.listeners={},this.onConnectListeners=[],this.socket=(0,t.connect)({port:location.port||80}),this.registerListeners(),this};r.prototype.registerListeners=function(){this.socket.on("connect",this.onConnect.bind(this)),this.socket.on("error",this.onError.bind(this))},r.prototype.onConnect=function(){var e=this;return this.user&&(this.user.channel=this.room,this.socket.getAuthToken()?this.clearQueued():this.socket.emit("login",{user:this.user},function(t,n){t||e.clearQueued()})),this.onConnectListeners.forEach(function(e){e()}),this},r.prototype.clearQueued=function(){this.queuedTasks.forEach(function(e){e()})},r.prototype.isConnected=function(){return this.socket},r.prototype.setUser=function(e){return this.user=e,this},r.prototype.subscribeToUserChannel=function(){this.socket.authToken&&this.socket.subscribe(this.socket.authToken.username)},r.prototype.getUser=function(){return this.user},r.prototype.onError=function(e){console.log(e)},r.prototype.setRoom=function(e){return this.room===e?this:(this.leaveRoom(),this.room=e,this.socket.getAuthToken()?this.enterRoom():this.queuedTasks.push(this.enterRoom.bind(this)),this)},r.prototype.getRoom=function(){return this.room},r.prototype.leaveRoom=function(){return this.room&&this.socket.unsubscribe(this.room),this},r.prototype.enterRoom=function(){return this.room&&(this.channel=this.socket.subscribe(this.room),this.channel.on("subscribeFail",this.onRoomSubscribeFail.bind(this)),this.channel.on("unsubscribe",this.onRoomUnSubscribe.bind(this)),this.channel.on("subscribe",this.onRoomSubscribe.bind(this)),this.socket.authToken&&this.publishMessage("getUsersInRoom",{channel:this.room,user:this.socket.authToken.username})),this},r.prototype.watchChannel=function(e){return this.listeners[e.type]&&"function"==typeof this.listeners[e.type]&&this.listeners[e.type](e),this},r.prototype.on=function(e,t){return this.listeners[e]=t,this},r.prototype.publishMessage=function(e,t){if(this.channel)return this.channel.publish({data:t,type:e},this.channelDidPublish),this},r.prototype.channelDidPublish=function(){return this},r.prototype.onRoomUnSubscribe=function(){return this.channel&&(this.channel.unwatch(),this.socket.unsubscribe(this.room)),this},r.prototype.onRoomSubscribe=function(){return this.channel&&this.channel.watch(this.watchChannel.bind(this)),this},r.prototype.onRoomSubscribeFail=function(e){return console.log("ROOM SUBSCRIBE FAIL",e),this},e.exports=function(){return new r},e.Socket=r}).call(t,n(27)(e))},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(150),p=_interopRequireDefault(f),d=(o=r=function(e){function Banner(){return _classCallCheck(this,Banner),_possibleConstructorReturn(this,(Banner.__proto__||Object.getPrototypeOf(Banner)).apply(this,arguments))}return _inherits(Banner,e),i(Banner,[{key:"render",value:function(){var e=new c.default(p.default,"banner").add("banner-"+String(this.props.accent));return(0,a.h)("p",{class:e.getClasses()},this.props.children)}}]),Banner}(a.Component),r.propTypes={accent:s.default.oneOf(["error"]),children:s.default.node},r.defaultProps={accent:"error"},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(152),p=_interopRequireDefault(f),d=n(6),h=_interopRequireDefault(d),_=n(46),y=_interopRequireDefault(_),b=n(47),m=_interopRequireDefault(b),v=n(48),g=_interopRequireDefault(v),O=(o=r=function(e){function ButtonWithOptions(e){_classCallCheck(this,ButtonWithOptions);var t=_possibleConstructorReturn(this,(ButtonWithOptions.__proto__||Object.getPrototypeOf(ButtonWithOptions)).call(this,e));return t.state.open=!1,t.toggleExpandedStateHandler=function(e){t.setState({open:!1})},t}return _inherits(ButtonWithOptions,e),i(ButtonWithOptions,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.toggleExpandedStateHandler)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.toggleExpandedStateHandler)}},{key:"render",value:function(){var e=this.props,t=e.accent,n=e.children,r=e.disabled,o=e.href,i=e.onClick,u=e.options,s=e.type,l=this.state.open,f=new c.default(p.default,"launcher").add("launcher-"+String(t)).addIf("launcher-disabled",r);return(0,a.h)("div",{class:p.default.container},(0,a.h)(h.default,{accent:t,disabled:r,href:o,inGroup:"left",onClick:i,type:s},n),(0,a.h)(h.default,{accent:"inherit",disabled:r,className:f.getClasses(),inGroup:"right",onClick:this.toggleOptions.bind(this)},(0,a.h)(g.default,{direction:l?"down":"up",width:10,height:6})),l&&!r&&(0,a.h)("div",{class:p.default.options},(0,a.h)(y.default,{tooltip:"right"},Object.keys(u).map(function(e){return(0,a.h)(m.default,{onClick:u[e]},e)}))))}},{key:"toggleOptions",value:function(e){e.stopPropagation(),this.setState({open:!this.state.open})}}]),ButtonWithOptions}(a.Component),r.propTypes={accent:s.default.oneOf(["system"]),children:s.default.node,disabled:s.default.bool,href:s.default.string,onClick:s.default.func,options:s.default.object,type:s.default.oneOf(["button","submit"])},r.defaultProps={type:"button"},o);t.default=O},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(154)),f=_interopRequireDefault(c),p=(o=r=function(e){function Checkbox(){return _classCallCheck(this,Checkbox),_possibleConstructorReturn(this,(Checkbox.__proto__||Object.getPrototypeOf(Checkbox)).apply(this,arguments))}return _inherits(Checkbox,e),i(Checkbox,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.onChange,r=e.value;return(0,a.h)("input",{checked:r,class:f.default.checkbox,id:t,onChange:n,type:"checkbox"})}}]),Checkbox}(a.Component),r.propTypes={id:s.default.string,onChange:s.default.func,value:s.default.bool},o);t.default=p},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(28),c=_interopRequireDefault(l),f=1e3,p=60*f,d=60*p,h=24*d,_=7*h,y=365*h,b=y/12,m=(o=r=function(e){function DateTime(e){_classCallCheck(this,DateTime);var t=e.relative,n=_possibleConstructorReturn(this,(DateTime.__proto__||Object.getPrototypeOf(DateTime)).call(this,e));return t&&n.resetInterval(f),n}return _inherits(DateTime,e),i(DateTime,[{key:"resetInterval",value:function(){clearInterval(this.interval),this.interval=setInterval(this.forceUpdate.bind(this),this.updateInterval)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.date;n.relative;r!==e.date&&this.setUpdateInterval(f)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.format,r=e.fromFormat,o=e.relative,i=new c.default(t,r);return i.isValid()?o?this.getRelativeDate(i.getDate()):i.format(n):null}},{key:"getRelativeDate",value:function(e){var t=(new Date).getTime(),n=t-e.getTime();return n<50*f?(this.setUpdateInterval(10*f),"just now"):n<2*p?(this.setUpdateInterval(30*f),"a minute ago"):n<d?(this.setUpdateInterval(p),String(Math.floor(n/p))+" minutes ago"):n<2*d?(this.setUpdateInterval(30*p),"an hour ago"):n<h?(this.setUpdateInterval(d),String(Math.floor(n/d))+" hours ago"):n<2*h?(this.setUpdateInterval(d),"yesterday"):n<_?(this.setUpdateInterval(h),String(Math.floor(n/h))+" days ago"):n<2*_?(this.setUpdateInterval(h),"a week ago"):n<b?(this.setUpdateInterval(h),String(Math.floor(n/_))+" weeks ago"):n<2*b?(this.setUpdateInterval(h),"a month ago"):n<y?(this.setUpdateInterval(h),String(Math.floor(n/b))+" months ago"):(this.setUpdateInterval(h),String(Math.floor(n/y))+" years ago")}},{key:"setUpdateInterval",value:function(e){e!==this.updateInterval&&(clearInterval(this.interval),this.interval=setInterval(this.forceUpdate.bind(this),e),this.updateInterval=e)}}]),DateTime}(a.Component),r.propTypes={date:s.default.oneOfType([s.default.object,s.default.number,s.default.string]),format:s.default.string,fromFormat:s.default.string,relative:s.default.bool},r.defaultProps={format:"default",fromFormat:null,relative:!1},o);t.default=m},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(155),p=_interopRequireDefault(f),d=n(28),h=_interopRequireDefault(d),_=(o=r=function(e){function DateTimePicker(e){_classCallCheck(this,DateTimePicker);var t=_possibleConstructorReturn(this,(DateTimePicker.__proto__||Object.getPrototypeOf(DateTimePicker)).call(this,e));return t.TIME_PICKER_HOUR_SUBDIVISIONS=2,t.hoursContainerRef=null,t.hoursRefs=[],t.state.monthOffset=0,t.state.pickingTime=!1,t}return _inherits(DateTimePicker,e),i(DateTimePicker,[{key:"componentWillUpdate",value:function(e,t){var n=this.props.date;n&&e.date&&n.getTime()!==e.date.getTime()&&this.setState({monthOffset:0})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.pickingTime;if(!t.pickingTime&&n){var r=this.getInternalDate(),o=void 0;this.hoursRefs.some(function(e){if(e.date.getTime()>r.getTime())return!0;o=e});var i=o&&o.element.offsetTop;this.hoursContainerRef&&(this.hoursContainerRef.scrollTop=i-this.hoursContainerRef.clientHeight/2)}}},{key:"render",value:function(){for(var e=this.props.className,t=this.props.date,n=this.state,r=(n.monthOffset,n.pickingTime),o=new c.default(p.default,"container").addResolved(e),i=(t||new Date,this.getInternalDate()),u=new h.default(i),s=new Date(i.getFullYear(),i.getMonth(),1),l=new Date(i.getFullYear(),i.getMonth()+1,0),f=s.getDay(),d=new Date(i.getFullYear(),i.getMonth(),0),_=Math.ceil((l.getDate()-s.getDate()+1+f)/7),y=1,b=[],m=0;m<_;m++){for(var v=[],g=1;g<=7;g++)0==m&&g<=f?v.push(this.renderDay(d.getDate()-f+g,-1)):y>l.getDate()?v.push(this.renderDay(y++-d.getDate()+1,1)):v.push(this.renderDay(y++));b.push((0,a.h)("tr",null,v))}return(0,a.h)("div",{class:o.getClasses()},(0,a.h)("div",{class:p.default.head},(0,a.h)("button",{class:p.default.arrow,onClick:this.handleMonthChange.bind(this,-1),type:"button"},""),(0,a.h)("p",{class:p.default["current-date"]},u.format("MMMM YYYY")),(0,a.h)("button",{class:p.default.arrow,onClick:this.handleMonthChange.bind(this,1),type:"button"},"")),(0,a.h)("table",{class:p.default.calendar},(0,a.h)("thead",null,(0,a.h)("tr",null,(0,a.h)("th",{class:p.default["calendar-head"]},"Su"),(0,a.h)("th",{class:p.default["calendar-head"]},"Mo"),(0,a.h)("th",{class:p.default["calendar-head"]},"Tu"),(0,a.h)("th",{class:p.default["calendar-head"]},"We"),(0,a.h)("th",{class:p.default["calendar-head"]},"Th"),(0,a.h)("th",{class:p.default["calendar-head"]},"Fr"),(0,a.h)("th",{class:p.default["calendar-head"]},"Sa"))),(0,a.h)("tbody",null,b)),(0,a.h)("button",{class:p.default["hours-launcher"],onClick:this.handleTimeToggle.bind(this),type:"button"},u.format("HH:mm")),r&&this.renderHours())}},{key:"getInternalDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.monthOffset,n=this.props.date||new Date;if(!new h.default(n).isValid())return null;var r=e.year,o=e.month,i=e.day,a=e.hours,u=e.minutes;return new Date(void 0!==r?r:n.getFullYear(),void 0!==o?o:n.getMonth()+t,void 0!==i?i:n.getDate(),void 0!==a?a:n.getHours(),void 0!==u?u:n.getMinutes())}},{key:"handleDatePick",value:function(e){var t=this.props.onChange;"function"==typeof t&&t.call(this,e)}},{key:"handleMonthChange",value:function(e){var t=this.state.monthOffset;this.setState({monthOffset:t+e})}},{key:"handleTimeToggle",value:function(){var e=this.state.pickingTime;this.setState({pickingTime:!e})}},{key:"renderDay",value:function(e,t){var n=this.props.date,r=this.getInternalDate({day:e},t),o=new h.default(r),i=e>=10?e:"0"+e,u=new c.default(p.default,"calendar-day").addIf("calendar-day-faded",void 0!==t).addIf("calendar-day-current",o.isSameDayAs(new Date)).addIf("calendar-day-active",o.isSameDayAs(n));return(0,a.h)("td",null,(0,a.h)("button",{type:"button",onClick:this.handleDatePick.bind(this,r),class:u.getClasses()},i))}},{key:"renderHours",value:function(){for(var e=this,t=[],n=0;n<24*this.TIME_PICKER_HOUR_SUBDIVISIONS;n++)!function(n){var r=e.getInternalDate({hours:0,minutes:30*n});t.push((0,a.h)("li",null,(0,a.h)("button",{class:p.default.hour,onClick:e.handleDatePick.bind(e,r),ref:function(t){e.hoursRefs[n]={date:r,element:t}},type:"button"},new h.default(r).format("HH:mm"))))}(n);return(0,a.h)("div",{class:p.default["hours-container"]},(0,a.h)("ul",{class:p.default.hours,ref:function(t){e.hoursContainerRef=t}},t))}}]),DateTimePicker}(a.Component),r.propTypes={className:s.default.string,date:s.default.object,onChange:s.default.func},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(59),p=_interopRequireDefault(f),d=(o=r=function(e){function Dropdown(){return _classCallCheck(this,Dropdown),_possibleConstructorReturn(this,(Dropdown.__proto__||Object.getPrototypeOf(Dropdown)).apply(this,arguments))}return _inherits(Dropdown,e),i(Dropdown,[{key:"render",value:function(){var e=this.props.tooltip,t=new c.default(p.default,"dropdown");return t.addIf("dropdown-tooltip",e).addIf("dropdown-tooltip-"+String(e),e),(0,a.h)("ul",{class:t.getClasses()},this.props.children)}}]),Dropdown}(a.Component),r.propTypes={children:s.default.node,tooltip:s.default.oneOf(["left","right"])},r.defaultProps={tooltip:null},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(59),p=_interopRequireDefault(f),d=(o=r=function(e){function DropdownItem(e){return _classCallCheck(this,DropdownItem),_possibleConstructorReturn(this,(DropdownItem.__proto__||Object.getPrototypeOf(DropdownItem)).call(this,e))}return _inherits(DropdownItem,e),i(DropdownItem,[{key:"handleClick",value:function(e){this.props.onClick&&this.props.onClick(e)}}]),i(DropdownItem,[{key:"render",value:function(){var e=new c.default(p.default,"dropdown-item");return e.addIf("dropdown-item-active",this.props.active),this.props.href?(0,a.h)("li",null,(0,a.h)("a",{class:e.getClasses(),href:this.props.href,onClick:this.handleClick.bind(this)},this.props.children)):(0,a.h)("li",null,(0,a.h)("button",{class:e.getClasses(),type:"button",onClick:this.handleClick.bind(this)},this.props.children))}}]),DropdownItem}(a.Component),r.propTypes={active:s.default.bool,href:s.default.string,onClick:s.default.func,children:s.default.node},r.defaultProps={active:!1,href:!1},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(165)),f=_interopRequireDefault(c),p=(o=r=function(e){function IconArrow(){return _classCallCheck(this,IconArrow),_possibleConstructorReturn(this,(IconArrow.__proto__||Object.getPrototypeOf(IconArrow)).apply(this,arguments))}return _inherits(IconArrow,e),i(IconArrow,[{key:"render",value:function(){var e=this.props.direction,t=parseInt(this.props.width),n=parseInt(this.props.height),r=void 0,o=void 0;switch(e){case"up":r=[0,t/2,n,t/2],o=2;break;case"down":r=[n,t/2,0,t/2],o=0;break;case"left":r=[n/2,t,n/2,0],o=1;break;case"right":r=[t/2,0,t/2,n],o=3}var i=r.map(function(e){return e+"px"}).join(" "),u=[0,1,2,3].map(function(e){return e===o?"currentColor":"transparent"}).join(" "),s="border-width: "+String(i)+";border-color: "+String(u)+";",l=[f.default.icon];return this.props.class&&l.push(this.props.class),(0,a.h)("span",{class:l.join(" "),style:s})}}]),IconArrow}(a.Component),r.propTypes={direction:s.default.oneOf(["down","left","right","up"]),height:s.default.number,width:s.default.number,class:s.default.string},r.defaultProps={class:null,direction:"up",width:10,height:10},o);t.default=p},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(177),p=_interopRequireDefault(f),d=n(6),h=_interopRequireDefault(d),_=(o=r=function(e){function Peer(e){return _classCallCheck(this,Peer),_possibleConstructorReturn(this,(Peer.__proto__||Object.getPrototypeOf(Peer)).call(this,e))}return _inherits(Peer,e),i(Peer,[{key:"render",value:function(){var e=this.props.peer,t=e.name.charAt(0),n=new c.default(p.default,"avatar").addIf("active",!0);return(0,a.h)(h.default,{accent:"data",className:n.getClasses(),type:"mock"},t)}}]),Peer}(a.Component),r.propTypes={peer:s.default.object},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(179),p=_interopRequireDefault(f),d=(o=r=function(e){function SubNavItem(e){return _classCallCheck(this,SubNavItem),_possibleConstructorReturn(this,(SubNavItem.__proto__||Object.getPrototypeOf(SubNavItem)).call(this,e))}return _inherits(SubNavItem,e),i(SubNavItem,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.error,r=e.href,o=new c.default(p.default,"sub-nav-item");return o.addIf("sub-nav-item-active",t),o.addIf("sub-nav-item-error",n),(0,a.h)("a",{class:o.getClasses(),href:r},this.props.children)}}]),SubNavItem}(a.Component),r.propTypes={active:s.default.bool,error:s.default.bool,href:s.default.string,children:s.default.node},r.defaultProps={active:!1,error:!1},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(26),p=_interopRequireDefault(f),d=n(48),h=_interopRequireDefault(d),_=(o=r=function(e){function TableHeadCell(){return _classCallCheck(this,TableHeadCell),_possibleConstructorReturn(this,(TableHeadCell.__proto__||Object.getPrototypeOf(TableHeadCell)).apply(this,arguments))}return _inherits(TableHeadCell,e),i(TableHeadCell,[{key:"render",value:function(){var e=this.props.arrow,t=new c.default(p.default,"cell","head-cell");return t.addIf("select-cell",this.props.select),(0,a.h)("th",{class:t.getClasses()},e&&(0,a.h)(h.default,{class:p.default["head-cell-arrow"],width:10,height:10,direction:e}),(0,a.h)("span",{class:p.default["head-cell-label"]},this.props.children))}}]),TableHeadCell}(a.Component),r.propTypes={arrow:s.default.oneOf(["down","up"]),children:s.default.node},r.defaultProps={arrow:null},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(26),p=_interopRequireDefault(f),d=(o=r=function(e){function TableRowCell(){return _classCallCheck(this,TableRowCell),_possibleConstructorReturn(this,(TableRowCell.__proto__||Object.getPrototypeOf(TableRowCell)).apply(this,arguments))}return _inherits(TableRowCell,e),i(TableRowCell,[{key:"render",value:function(){var e=this.props.children,t=new c.default(p.default,"cell");return t.addIf("select-cell",this.props.select),!e.length&&this.props.fillBlanks&&(e=(0,a.h)("span",{class:p.default["row-cell-blank"]},"None")),(0,a.h)("td",{class:t.getClasses()},e)}}]),TableRowCell}(a.Component),r.propTypes={fillBlanks:s.default.bool,select:s.default.bool},r.defaultProps={fillBlanks:!1,select:!1},o);t.default=d},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),s=n(1),l=_interopRequireDefault(s),c=n(2),f=(_interopRequireDefault(c),n(182)),p=_interopRequireDefault(f),d=n(3),h=_interopRequireWildcard(d),_=n(24),y=n(12),b=_interopRequireWildcard(y),m=n(15),v=_interopRequireWildcard(m),g=n(23),O=_interopRequireWildcard(g),C=n(5),w=n(11),S=n(4),T=n(19),E=n(9),P=n(42),R=_interopRequireDefault(P),k=n(33),D=_interopRequireDefault(k),j=n(44),A=_interopRequireDefault(j),I=n(49),N=_interopRequireDefault(I),U=n(36),q=_interopRequireDefault(U),M=(o=r=function(e){function DocumentEditToolbar(e){_classCallCheck(this,DocumentEditToolbar);var t=_possibleConstructorReturn(this,(DocumentEditToolbar.__proto__||Object.getPrototypeOf(DocumentEditToolbar)).call(this,e));return t.keyboard=new _.Keyboard,t.onSave=null,t}return _inherits(DocumentEditToolbar,e),a(DocumentEditToolbar,[{key:"componentDidMount",value:function(){this.keyboard.on("cmd+s").do(this.handleSave.bind(this,"save"))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.actions,o=n.collection,i=n.group,a=n.state,u=a.document,s=e.state.document,l=u.remoteStatus,c=!s.validationErrors&&u.validationErrors;s.remoteStatus===h.STATUS_SAVING&&l===h.STATUS_IDLE&&"function"==typeof this.onSave.callback&&this.onSave.callback(a.document.remote._id),(s.saveAttempts<u.saveAttempts||c&&u.saveAttempts>0)&&this.saveDocument(),s.remote&&!u.remote&&((0,E.route)((0,w.buildUrl)(i,o,"documents")),r.setNotification({message:"The documents have been deleted"}))}},{key:"render",value:function(){var e=this.props,t=e.documentId,n=e.state,r=n.document.remote,o=n.app.networkStatus!==h.NETWORK_OK&&Object.keys(r.validationErrors).filter(function(e){return r.validationErrors[e]}).length,i=n.document.validationErrors,a=i&&Object.keys(i).filter(function(e){return i[e]}).length,s=t?"edit":"new",l=n.document.peers,c={"Save and create new":this.handleSave.bind(this,"saveAndCreateNew"),"Save and go back":this.handleSave.bind(this,"saveAndGoBack")};return"edit"===s&&(c["Save as duplicate"]=this.handleSave.bind(this,"saveAsDuplicate")),(0,u.h)(q.default,null,l&&l.length>0&&(0,u.h)("div",{class:p.default.peers},l.map(function(e){return(0,u.h)(N.default,{peer:e})})),(0,u.h)("div",{class:p.default.metadata},r&&r.createdAt&&(0,u.h)("p",null,(0,u.h)("span",null,"Created "),(0,u.h)(A.default,{date:r.createdAt,relative:!0})),r&&r.lastModifiedAt&&(0,u.h)("p",{class:p.default["metadata-emphasis"]},(0,u.h)("span",null,"Last updated "),(0,u.h)(A.default,{date:r.lastModifiedAt,relative:!0}))),(0,u.h)("div",{class:p.default.buttons},(0,u.h)("div",{class:p.default.button},(0,u.h)(D.default,{accent:"destruct",className:p.default.button,disabled:o,onClick:this.handleDelete.bind(this),promptCallToAction:"Yes, delete it.",promptMessage:"Are you sure you want to delete this document?"},"Delete")),(0,u.h)("div",{class:p.default.button},(0,u.h)(R.default,{accent:"save",disabled:o||a,onClick:this.handleSave.bind(this,"save"),options:c},"Save and continue"))))}},{key:"componentWillUnmount",value:function(){this.keyboard.off()}},{key:"handleDelete",value:function(){var e=this.props,t=e.actions,n=e.collection,r=e.group,o=e.referencedField,i=e.state,a=i.document.remote,u=(0,T.getApiForUrlParams)(i.api.apis,{collection:n,group:r}),s=(0,T.getCollectionForUrlParams)(i.api.apis,{collection:n,group:r,referencedField:o,useApi:u}),l={api:u,collection:s,ids:[a._id]};a._id&&t.deleteDocuments(l)}},{key:"handleSave",value:function(e){var t=this.props,n=t.actions,r=t.collection,o=t.group,i=t.section,a=(t.state,!Boolean(this.props.documentId));switch(e){case"save":this.onSave={callback:function(e){(0,E.route)((0,w.buildUrl)(o,r,"document","edit",e,i)),n.setNotification({message:"The document has been "+(a?"created":"updated")})}};break;case"saveAndCreateNew":this.onSave={callback:function(e){(0,E.route)((0,w.buildUrl)(o,r,"document","new")),n.setNotification({message:"The document has been "+(a?"created":"updated")}),n.clearRemoteDocument()}};break;case"saveAndGoBack":this.onSave={callback:function(e){(0,E.route)((0,w.buildUrl)(o,r,"documents")),n.setNotification({message:"The document has been "+(a?"created":"updated")})}};break;case"saveAsDuplicate":this.onSave={callback:function(e){(0,E.route)((0,w.buildUrl)(o,r,"document","edit",e,i)),n.setNotification({message:"The document has been created"})},createNew:!0}}n.registerSaveAttempt()}},{key:"saveDocument",value:function(){var e=this.props,t=e.actions,n=e.collection,r=e.documentId,o=e.group,i=e.referencedField,a=e.state,u=this.onSave&&this.onSave.createNew,s=a.document.validationErrors;if(s&&!Object.keys(s).filter(function(e){return s[e]}).length){var l=(0,T.getApiForUrlParams)(a.api.apis,{collection:n,group:o}),c=(0,T.getCollectionForUrlParams)(a.api.apis,{collection:n,group:o,referencedField:i,useApi:l}),f=a.document.local;u&&(f=Object.assign({},a.document.remote,a.document.local)),t.saveDocument({api:l,collection:c,document:f,documentId:u?null:r,group:o,urlCollection:n})}}}]),DocumentEditToolbar}(u.Component),r.propTypes={actions:l.default.object,collection:l.default.string,documentId:l.default.string,group:l.default.string,referencedField:l.default.string,section:l.default.string,state:l.default.object},o);t.default=(0,S.connectHelper)(function(e){return{api:e.api,app:e.app,document:e.document}},function(e){return(0,C.bindActionCreators)(i({},b,v,O),e)})(M)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),s=n(1),l=_interopRequireDefault(s),c=(n(8),n(5)),f=n(9),p=n(24),d=n(3),h=_interopRequireWildcard(d),_=n(12),y=_interopRequireWildcard(_),b=n(15),m=_interopRequireWildcard(b),v=n(23),g=_interopRequireWildcard(v),O=n(38),C=_interopRequireWildcard(O),w=n(21),S=(_interopRequireDefault(w),n(11)),T=n(4),E=n(19),P=n(6),R=_interopRequireDefault(P),k=n(34),D=_interopRequireDefault(k),j=n(35),A=_interopRequireDefault(j),I=n(115),N=_interopRequireDefault(I),U=(o=r=function(e){function DocumentList(e){_classCallCheck(this,DocumentList);var t=_possibleConstructorReturn(this,(DocumentList.__proto__||Object.getPrototypeOf(DocumentList)).call(this,e));return t.keyboard=new p.Keyboard,t}return _inherits(DocumentList,e),a(DocumentList,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onBuildBaseUrl,n=e.page,r=(e.state,Number(n)),o=r+1,i=Math.abs(r-1);this.keyboard.on("cmd+right").do(function(e){return(0,f.route)(S.buildUrl.apply(void 0,_toConsumableArray(t()).concat([o])))}),this.keyboard.on("cmd+left").do(function(e){return(0,f.route)(S.buildUrl.apply(void 0,_toConsumableArray(t()).concat([i])))})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.actions,r=t.referencedField,o=t.state,i=o.documents.list,a=e.state.router.locationBeforeTransitions.key,u=o.router.locationBeforeTransitions.key,s=a===u,l=status===h.STATUS_IDLE,c=e.state.documents.status,f=c===h.STATUS_LOADING;if(r&&f&&l){var p=Object.assign({},o.document.remote,o.document.local),d=p[r];d&&d._id&&n.setDocumentSelection([d._id])}i&&s||this.checkStatusAndFetch()}},{key:"render",value:function(){var e=this.props,t=e.collection,n=(e.filter,e.group),r=(e.order,e.referencedField),o=(e.sort,e.state),i=o.documents;return this.currentCollection=(0,E.getCollectionForUrlParams)(o.api.apis,{collection:t,group:n,referencedField:r}),i.status===h.STATUS_NOT_FOUND?(0,u.h)(D.default,{type:h.ERROR_ROUTE_NOT_FOUND}):i.list&&i.status!==h.STATUS_LOADING&&this.currentCollection?i.list.results.length||i.query?this.renderDocumentList():(0,u.h)(A.default,{title:"No documents yet.",subtitle:"Once created, they will appear here."},!r&&(0,u.h)(R.default,{accent:"save",href:(0,S.buildUrl)(n,t,"document","new")},"Create new document")):null}},{key:"componentWillMount",value:function(){this.checkStatusAndFetch()}},{key:"checkStatusAndFetch",value:function(){var e=this.props.state,t=e.documents,n=(t.list,t.status);e.app.config&&e.api.apis.length&&e.user&&n===h.STATUS_IDLE&&this.fetchDocuments()}},{key:"componentWillUnmount",value:function(){var e=this.props.actions;this.keyboard.off(),e.clearDocumentList()}},{key:"fetchDocuments",value:function(){var e=this.props,t=e.actions,n=e.collection,r=(e.filter,e.group),o=e.order,i=e.page,a=e.parentDocumentId,u=e.referencedField,s=e.sort,l=e.state,c=(0,E.getApiForUrlParams)(l.api.apis,{collection:n,group:r}),f=(0,E.getCollectionForUrlParams)(l.api.apis,{collection:n,group:r,referencedField:u,useApi:c});if(!f)return void t.setDocumentListStatus(h.STATUS_NOT_FOUND);var p=f.settings&&f.settings.count||20,d=l.router.params?l.router.params.filter:null,_=u&&(0,E.getCollectionForUrlParams)(l.api.apis,{collection:n,group:r,useApi:c});t.fetchDocuments({api:c,collection:f,count:p,filters:d,page:i,parentDocumentId:a,parentCollection:_,referencedField:u,sortBy:s,sortOrder:o})}},{key:"getSelectedRows",value:function(){var e=this.props.state,t=e.documents.list.results,n=e.documents.selected,r={};return t.forEach(function(e,t){n.includes(e._id)&&(r[t]=!0)}),r}},{key:"handleAnchorRender",value:function(e,t,n,r){var o=this.props,i=o.collection,a=o.group,s=o.referencedField,l=o.state;if(s)return e;var c=(0,E.getCollectionForUrlParams)(l.api.apis,{collection:i,group:a}),f=c.fields[n.id],p=this.renderField(n.id,f,e);return 0===r?(0,u.h)("a",{href:(0,S.buildUrl)(a,i,"document/edit",t._id)},p):p}},{key:"handleRowSelect",value:function(e){var t=this.props,n=t.actions,r=t.state,o=r.documents.list.results,i=r.documents.selected,a=i.filter(function(e){return!o.find(function(t){return t._id===e})}),u=Object.keys(e).filter(function(t){return e[t]}).map(function(e){return o[e]._id}),s=a.concat(u);n.setDocumentSelection(s)}},{key:"handleTableSort",value:function(e,t,n){return(0,u.h)("a",{href:(0,S.createRoute)({params:{sort:t,order:n},update:!0})},e)}},{key:"renderDocumentList",value:function(){var e=this,t=this.props,n=t.collection,r=t.group,o=t.referencedField,i=t.onPageTitle,a=t.order,s=t.sort,l=t.state,c=l.documents.list.results,f=this.getSelectedRows(),p=1/0;if(o){var d=(0,E.getCollectionForUrlParams)(l.api.apis,{collection:n,group:r}),h=d.fields[o],_=h.publish&&h.publish.subType||h.type,y="Field"+String(_),b=C[y].referenceSelect;if(h.settings&&h.settings.limit&&h.settings.limit>0&&(p=h.settings.limit),b)return(0,u.h)(b,{data:c,onSelect:this.handleRowSelect.bind(this),onSort:this.handleTableSort.bind(this),selectedRows:f,selectLimit:p,sortBy:s,sortOrder:a});i("Select "+String((h.label||o).toLowerCase()))}else i(this.currentCollection.settings.description||this.currentCollection.name);var m=Object.keys((0,T.filterHiddenFields)(this.currentCollection.fields,"list")).map(function(t){return{id:t,label:e.currentCollection.fields[t].label}});return c.length>0?(0,u.h)(N.default,{columns:m,data:c,onRender:this.handleAnchorRender.bind(this),onSelect:this.handleRowSelect.bind(this),onSort:this.handleTableSort.bind(this),selectedRows:f,selectLimit:p,sortable:!0,sortBy:s,sortOrder:a}):(0,u.h)(A.default,{title:"No documents found.",subtitle:"We can't find anything matching those filters."},(0,u.h)(R.default,{accent:"system",href:(0,S.buildUrl)(r,n,"documents")},"Clear filters"))}},{key:"renderField",value:function(e,t,n){var r=t.publish&&t.publish.subType?t.publish.subType:t.type,o="Field"+String(r),i=C[o]&&C[o].list;return i?(0,u.h)(i,{schema:t,value:n}):n}}]),DocumentList}(u.Component),r.propTypes={actions:l.default.object,collection:l.default.string,filter:l.default.string,group:l.default.string,onBuildBaseUrl:l.default.func,onPageTitle:l.default.func,order:l.default.oneOf(["asc","desc"]),page:l.default.number,parentDocumentId:l.default.string,referencedField:l.default.string,sort:l.default.string,state:l.default.object},r.defaultProps={onPageTitle:function(){}},o);t.default=(0,T.connectHelper)(function(e){return{api:e.api,app:e.app,document:e.document,documents:e.documents,router:e.router,user:e.user}},function(e){return(0,c.bindActionCreators)(i({},y,m,g),e)})(U)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),s=n(1),l=_interopRequireDefault(s),c=n(2),f=(_interopRequireDefault(c),n(183)),p=_interopRequireDefault(f),d=n(3),h=_interopRequireWildcard(d),_=n(12),y=_interopRequireWildcard(_),b=n(15),m=_interopRequireWildcard(b),v=n(23),g=_interopRequireWildcard(v),O=n(5),C=n(11),w=n(4),S=n(25),T=n(19),E=n(9),P=n(6),R=_interopRequireDefault(P),k=n(33),D=_interopRequireDefault(k),j=n(43),A=(_interopRequireDefault(j),n(113)),I=_interopRequireDefault(A),N=n(36),U=_interopRequireDefault(N),q=n(119),M=_interopRequireDefault(q),L=(o=r=function(e){function DocumentListToolbar(e){_classCallCheck(this,DocumentListToolbar);var t=_possibleConstructorReturn(this,(DocumentListToolbar.__proto__||Object.getPrototypeOf(DocumentListToolbar)).call(this,e));return t.BULK_ACTIONS_PLACEHOLDER="BULK_ACTIONS_PLACEHOLDER",t.state.bulkActionSelected=t.BULK_ACTIONS_PLACEHOLDER,t}return _inherits(DocumentListToolbar,e),a(DocumentListToolbar,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.actions,o=n.state,i=o.documents,a=(i.list,i.status),u=a===h.STATUS_IDLE,s=e.state.documents.status;u&&s===h.STATUS_DELETING_SINGLE&&r.setNotification({message:"The document has been deleted"}),u&&s===h.STATUS_DELETING_MULTIPLE&&r.setNotification({message:"The documents have been deleted"})}},{key:"render",value:function(){var e=this.props,t=(e.collection,e.group,e.onBuildBaseUrl,e.referencedField),n=e.state,r=n.documents.list;if(!r)return null;var o=r.metadata;return(0,u.h)(U.default,null,(0,u.h)("div",{class:p.default.section},(0,u.h)("div",{class:p.default.information},o.totalCount>o.limit&&(0,u.h)(M.default,{className:p.default["page-input"],onChange:this.handleGoToPage.bind(this),size:"small",placeholder:"Go to page"}),o.totalCount>1&&(0,u.h)("span",{class:p.default["count-label"]},(0,u.h)("span",null,"Showing "),(0,u.h)("strong",null,String(o.offset+1)+"-"+String(Math.min(o.offset+o.limit,o.totalCount))+" "),"of ",(0,u.h)("strong",null,o.totalCount)))),(0,u.h)("div",{class:p.default.section},(0,u.h)(I.default,{currentPage:o.page,linkCallback:this.handleBuildPageUrl.bind(this),maxPages:8,totalPages:o.totalPages})),(0,u.h)("div",{class:p.default.section},Boolean(t)?this.renderReferencedDocumentActions():this.renderBulkActions()))}},{key:"renderBulkActions",value:function(){var e=this.state.bulkActionSelected,t=this.props.state,n=t.documents.selected;return(0,u.h)("div",{class:p.default.actions},(0,u.h)("select",{class:p.default.select,onChange:this.handleBulkActionSelect.bind(this),value:e},(0,u.h)("option",{disabled:!0,value:this.BULK_ACTIONS_PLACEHOLDER},"With selected..."),(0,u.h)("option",{value:"delete"},"Delete")),(0,u.h)(D.default,{accent:"data",className:p.default["select-button"],disabled:e===this.BULK_ACTIONS_PLACEHOLDER||!n.length,onClick:this.handleBulkActionApply.bind(this),promptCallToAction:"Yes, delete them.",promptMessage:"Are you sure you want to delete the selected documents?",size:"small"},"Apply"))}},{key:"renderReferencedDocumentActions",value:function(){var e=this.props.state,t=e.documents.selected,n=t.length>1?"Add selected documents":"Add selected document";return(0,u.h)("div",{class:p.default.actions},(0,u.h)(R.default,{accent:"save",disabled:!t.length,onClick:this.handleReferencedDocumentSelect.bind(this)},n))}},{key:"handleBuildPageUrl",value:function(e){var t=this.props,n=t.onBuildBaseUrl,r=t.referencedField;return r?C.buildUrl.apply(void 0,_toConsumableArray(n()).concat(["select",r,e])):C.buildUrl.apply(void 0,_toConsumableArray(n()).concat([e]))}},{key:"handleBulkActionApply",value:function(e){var t=this.state.bulkActionSelected;if(t&&t!==this.BULK_ACTIONS_PLACEHOLDER){var n=this.props,r=n.actions,o=n.collection,i=n.group,a=n.state,u=(0,T.getApiForUrlParams)(a.api.apis,{collection:o,group:i}),s=(0,T.getCollectionForUrlParams)(a.api.apis,{collection:o,group:i,useApi:u});"delete"===t&&r.deleteDocuments({api:u,collection:s,ids:a.documents.selected})}}},{key:"handleBulkActionSelect",value:function(e){this.setState({bulkActionSelected:e.target.value})}},{key:"handleGoToPage",value:function(e){var t=this.props,n=(t.collection,t.group,t.onBuildBaseUrl,t.state),r=n.documents.list,o=r.metadata,i=e.target.value,a=parseInt(i);if(!r)return null;a.toString()!==i||a<=0||a>o.totalPages||(0,E.route)(this.handleBuildPageUrl(a))}},{key:"handleReferencedDocumentSelect",value:function(){var e=this.props,t=e.actions,n=e.collection,r=e.group,o=e.onBuildBaseUrl,i=(e.parentDocumentId,e.referencedField),a=e.state,u=a.documents.list.results,s=a.documents.selected.map(function(e){return u.find(function(t){return t._id===e})}).filter(Boolean);t.updateLocalDocument(_defineProperty({},i,s),{collection:n,group:r});var l=(0,T.getCollectionForUrlParams)(a.api.apis,{collection:n,group:r}),c=l.fields[i],f=c&&c.publish&&c.publish.section&&S.Format.slugify(c.publish.section);(0,E.route)(C.buildUrl.apply(void 0,_toConsumableArray(o({section:f}))))}}]),DocumentListToolbar}(u.Component),r.propTypes={actions:l.default.object,collection:l.default.string,group:l.default.string,onBuildBaseUrl:l.default.func,referencedField:l.default.string,state:l.default.object},o);t.default=(0,w.connectHelper)(function(e){return{api:e.api,documents:e.documents}},function(e){return(0,O.bindActionCreators)(i({},y,m,g),e)})(L)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(5),c=n(11),f=n(32),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(4),h=n(25),_=n(19),y=n(2),b=(_interopRequireDefault(y),n(187)),m=_interopRequireDefault(b),v=n(6),g=_interopRequireDefault(v),O=(o=r=function(e){function ReferencedDocumentHeader(){return _classCallCheck(this,ReferencedDocumentHeader),_possibleConstructorReturn(this,(ReferencedDocumentHeader.__proto__||Object.getPrototypeOf(ReferencedDocumentHeader)).apply(this,arguments))}return _inherits(ReferencedDocumentHeader,e),i(ReferencedDocumentHeader,[{key:"render",value:function(){var e=this.props,t=e.collection,n=e.group,r=e.onBuildBaseUrl,o=(e.parentDocumentId,e.referencedField),i=e.state,u=(0,_.getCollectionForUrlParams)(i.api.apis,{collection:t,group:n});if(!u)return null;var s=u.fields[o];if(!s)return null;var l=s.label||o,f=s.publish&&s.publish.section&&h.Format.slugify(s.publish.section),p=c.buildUrl.apply(void 0,_toConsumableArray(r({section:f})));return(0,a.h)("div",{class:m.default.container},(0,a.h)("p",null,(0,a.h)("strong",null,l),(0,a.h)("span",null,"  choose document to reference")),(0,a.h)(g.default,{accent:"destruct",href:p,size:"small"},"Nevermind, back to document"))}}]),ReferencedDocumentHeader}(a.Component),r.propTypes={actions:s.default.object,collection:s.default.string,group:s.default.string,onBuildBaseUrl:s.default.func,referencedField:s.default.string,state:s.default.object},o);t.default=(0,d.connectHelper)(function(e){return{api:e.api}},function(e){return(0,l.bindActionCreators)(p,e)})(O)},function(e,t,n){"use strict";function urlHelper(){return{paramsToObject:function(e){if(!e||void 0===e)return null;var t=JSON.parse('{"'+decodeURI(e.replace(/^(\?)/,"")).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');return Object.keys(t).forEach(function(e){try{t[e]=JSON.parse(t[e])}catch(e){return}}),t},paramsToString:function(e){return Object.keys(e).filter(function(t){return e[t]}).map(function(t){if("object"!==r(e[t]))return t+"="+e[t];try{return t+"="+JSON.stringify(e[t])}catch(n){return t+"="+e[t]}}).join("&")}}}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.urlHelper=urlHelper},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function(){function Validation(e,t){_classCallCheck(this,Validation)}return r(Validation,[{key:"email",value:function(e){return!!e&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}}]),Validation}();t.default=o},function(e,t){e.exports={dropdown:"Dropdown__dropdown___h0uLL","dropdown-tooltip":"Dropdown__dropdown-tooltip___1vxI7","dropdown-tooltip-left":"Dropdown__dropdown-tooltip-left___3loJA","dropdown-tooltip-right":"Dropdown__dropdown-tooltip-right___eF2mD","dropdown-item":"Dropdown__dropdown-item___nHBIx","dropdown-item-active":"Dropdown__dropdown-item-active___3BmXP"}},function(e,t){e.exports={picker:"FieldDateTime__picker___3rzV7"}},function(e,t){e.exports={container:"Toolbar__container___mE4Sx","container-padded":"Toolbar__container-padded___aV_7C",input:"Toolbar__input___2Xnqv"}},function(e,t,n){"use strict";t.__esModule=!0;t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},t.stripPrefix=function(e,t){return 0===e.indexOf(t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),t=decodeURI(t),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,o=encodeURI(t||"/");return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(e,t,n){"use strict";var r=n(205),o=r.a.Symbol;t.a=o},function(e,t,n){"use strict";function isPlainObject(e){if(!n.i(i.a)(e)||n.i(r.a)(e)!=a)return!1;var t=n.i(o.a)(e);if(null===t)return!0;var u=c.call(t,"constructor")&&t.constructor;return"function"==typeof u&&u instanceof u&&l.call(u)==f}var r=n(199),o=n(201),i=n(206),a="[object Object]",u=Function.prototype,s=Object.prototype,l=u.toString,c=s.hasOwnProperty,f=l.call(Object);t.a=isPlainObject},function(e,t,n){"use strict";function compose(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],o=t.slice(0,-1);return function(){return o.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.a=compose},function(e,t,n){"use strict";function createStore(e,t,o){function ensureCanMutateNextListeners(){f===c&&(f=c.slice())}function getState(){return l}function subscribe(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return ensureCanMutateNextListeners(),f.push(e),function(){if(t){t=!1,ensureCanMutateNextListeners();var n=f.indexOf(e);f.splice(n,1)}}}function dispatch(e){if(!n.i(r.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,l=s(l,e)}finally{p=!1}for(var t=c=f,o=0;o<t.length;o++)t[o]();return e}function replaceReducer(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,dispatch({type:a.INIT})}function observable(){var e,t=subscribe;return e={subscribe:function(e){function observeState(){e.next&&e.next(getState())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return observeState(),{unsubscribe:t(observeState)}}},e[i.a]=function(){return this},e}var u;if("function"==typeof t&&void 0===o&&(o=t,t=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(createStore)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,l=t,c=[],f=c,p=!1;return dispatch({type:a.INIT}),u={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer},u[i.a]=observable,u}var r=n(64),o=n(225),i=n.n(o);n.d(t,"b",function(){return a}),t.a=createStore;var a={INIT:"@@redux/INIT"}},function(e,t,n){"use strict";function warning(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=warning},function(e,t,n){var r=n(31),o=r.InvalidActionError,i=function(e,t){this.socket=e,this.id=t,this.sent=!1};i.prototype._respond=function(e){if(this.sent)throw new o("Response "+this.id+" has already been sent");this.sent=!0,this.socket.send(this.socket.encode(e))},i.prototype.end=function(e){if(this.id){var t={rid:this.id};void 0!==e&&(t.data=e),this._respond(t)}},i.prototype.error=function(e,t){if(this.id){var n=r.dehydrateError(e),o={rid:this.id,error:n};void 0!==t&&(o.data=t),this._respond(o)}},i.prototype.callback=function(e,t){e?this.error(e,t):this.end(t)},e.exports.Response=i},function(e,t,n){(function(t){var r=n(30).SCEmitter,o=n(217).SCChannel,i=(n(68).Response,n(221).AuthEngine),a=n(219),u=n(223).SCTransport,s=n(29),l=n(198),c=n(147),f=n(207),p=n(31),d=p.InvalidArgumentsError,h=p.InvalidMessageError,_=p.SocketProtocolError,y=p.TimeoutError,b="undefined"!=typeof window,m=function(e){var n=this;r.call(this),this.id=null,this.state=this.CLOSED,this.authState=this.PENDING,this.signedAuthToken=null,this.authToken=null,this.pendingReconnect=!1,this.pendingReconnectTimeout=null,this.pendingConnectCallback=!1,this.connectTimeout=e.connectTimeout,this.ackTimeout=e.ackTimeout,this.channelPrefix=e.channelPrefix||null,this.disconnectOnUnload=null==e.disconnectOnUnload||e.disconnectOnUnload,this.pingTimeout=this.ackTimeout;var o=Math.pow(2,31)-1,u=function(e){if(n[e]>o)throw new d("The "+e+" value provided exceeded the maximum amount allowed")};if(u("connectTimeout"),u("ackTimeout"),u("pingTimeout"),this._localEvents={connect:1,connectAbort:1,disconnect:1,message:1,error:1,raw:1,fail:1,kickOut:1,subscribe:1,unsubscribe:1,subscribeStateChange:1,authStateChange:1,authenticate:1,deauthenticate:1,removeAuthToken:1,subscribeRequest:1},this.connectAttempts=0,this._emitBuffer=new l,this._channels={},this.options=e,this._cid=1,this.options.callIdGenerator=function(){return n._callIdGenerator()},this.options.autoReconnect){null==this.options.autoReconnectOptions&&(this.options.autoReconnectOptions={});var c=this.options.autoReconnectOptions;null==c.initialDelay&&(c.initialDelay=1e4),null==c.randomness&&(c.randomness=1e4),null==c.multiplier&&(c.multiplier=1.5),null==c.maxDelay&&(c.maxDelay=6e4)}if(null==this.options.subscriptionRetryOptions&&(this.options.subscriptionRetryOptions={}),this.options.authEngine?this.auth=this.options.authEngine:this.auth=new i,this.options.codecEngine?this.codec=this.options.codecEngine:this.codec=a,this.options.path=this.options.path.replace(/\/$/,"")+"/",this.options.query=e.query||{},"string"==typeof this.options.query&&(this.options.query=s.parse(this.options.query)),this.options.autoConnect&&this.connect(),this._channelEmitter=new r,b&&this.disconnectOnUnload){var f=function(){n.disconnect()};t.attachEvent?t.attachEvent("onunload",f):t.addEventListener&&t.addEventListener("beforeunload",f,!1)}};m.prototype=Object.create(r.prototype),m.CONNECTING=m.prototype.CONNECTING=u.prototype.CONNECTING,m.OPEN=m.prototype.OPEN=u.prototype.OPEN,m.CLOSED=m.prototype.CLOSED=u.prototype.CLOSED,m.AUTHENTICATED=m.prototype.AUTHENTICATED="authenticated",m.UNAUTHENTICATED=m.prototype.UNAUTHENTICATED="unauthenticated",m.PENDING=m.prototype.PENDING="pending",m.ignoreStatuses=p.socketProtocolIgnoreStatuses,m.errorStatuses=p.socketProtocolErrorStatuses,m.prototype._privateEventHandlerMap={"#publish":function(e){var t=this._undecorateChannelName(e.channel);this.isSubscribed(t,!0)&&this._channelEmitter.emit(t,e.data)},"#kickOut":function(e){var t=this._undecorateChannelName(e.channel),n=this._channels[t];n&&(r.prototype.emit.call(this,"kickOut",e.message,t),n.emit("kickOut",e.message,t),this._triggerChannelUnsubscribe(n))},"#setAuthToken":function(e,t){var n=this;if(e){var r=function(r){r?(t.error(r),n._onSCError(r)):(n._changeToAuthenticatedState(e.token),t.end())};this.auth.saveToken(this.options.authTokenName,e.token,{},r)}else t.error(new h("No token data provided by #setAuthToken event"))},"#removeAuthToken":function(e,t){var n=this;this.auth.removeToken(this.options.authTokenName,function(e,o){e?(t.error(e),n._onSCError(e)):(r.prototype.emit.call(n,"removeAuthToken",o),n._changeToUnauthenticatedState(),t.end())})},"#disconnect":function(e){this.transport.close(e.code,e.data)}},m.prototype._callIdGenerator=function(){return this._cid++},m.prototype.getState=function(){return this.state},m.prototype.getBytesReceived=function(){return this.transport.getBytesReceived()},m.prototype.deauthenticate=function(e){var t=this;this.auth.removeToken(this.options.authTokenName,function(n,o){n?t._onSCError(n):(t.emit("#removeAuthToken"),r.prototype.emit.call(t,"removeAuthToken",o),t._changeToUnauthenticatedState()),e&&e(n)})},m.prototype.connect=m.prototype.open=function(){var e=this;this.state==this.CLOSED&&(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this.state=this.CONNECTING,r.prototype.emit.call(this,"connecting"),this._changeToPendingAuthState(),this.transport&&this.transport.off(),this.transport=new u(this.auth,this.codec,this.options),this.transport.on("open",function(t){e.state=e.OPEN,e._onSCOpen(t)}),this.transport.on("error",function(t){e._onSCError(t)}),this.transport.on("close",function(t,n){e.state=e.CLOSED,e._onSCClose(t,n)}),this.transport.on("openAbort",function(t,n){e.state=e.CLOSED,e._onSCClose(t,n,!0)}),this.transport.on("event",function(t,n,r){e._onSCEvent(t,n,r)}))},m.prototype.reconnect=function(){this.disconnect(),this.connect()},m.prototype.disconnect=function(e,t){if("number"!=typeof(e=e||1e3))throw new d("If specified, the code argument must be a number");this.state==this.OPEN||this.state==this.CONNECTING?this.transport.close(e,t):(this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef))},m.prototype._changeToPendingAuthState=function(){if(this.authState!=this.PENDING){var e=this.authState;this.authState=this.PENDING;var t={oldState:e,newState:this.authState};r.prototype.emit.call(this,"authStateChange",t)}},m.prototype._changeToUnauthenticatedState=function(){if(this.authState!=this.UNAUTHENTICATED){var e=this.authState;this.authState=this.UNAUTHENTICATED,this.signedAuthToken=null,this.authToken=null;var t={oldState:e,newState:this.authState};r.prototype.emit.call(this,"authStateChange",t),e==this.AUTHENTICATED&&r.prototype.emit.call(this,"deauthenticate"),r.prototype.emit.call(this,"authTokenChange",this.signedAuthToken)}},m.prototype._changeToAuthenticatedState=function(e){if(this.signedAuthToken=e,this.authToken=this._extractAuthTokenData(e),this.authState!=this.AUTHENTICATED){var t=this.authState;this.authState=this.AUTHENTICATED;var n={oldState:t,newState:this.authState,signedAuthToken:e,authToken:this.authToken};this.processPendingSubscriptions(),r.prototype.emit.call(this,"authStateChange",n),r.prototype.emit.call(this,"authenticate",e)}r.prototype.emit.call(this,"authTokenChange",e)},m.prototype.decodeBase64=function(e){var n;if("undefined"==typeof Buffer)n=t.atob?t.atob(e):c.decode(e);else{n=new Buffer(e,"base64").toString("utf8")}return n},m.prototype.encodeBase64=function(e){var n;if("undefined"==typeof Buffer)n=t.btoa?t.btoa(e):c.encode(e);else{n=new Buffer(e,"utf8").toString("base64")}return n},m.prototype._extractAuthTokenData=function(e){var t=(e||"").split("."),n=t[1];if(null!=n){var r=n;try{return r=this.decodeBase64(r),JSON.parse(r)}catch(e){return r}}return null},m.prototype.getAuthToken=function(){return this.authToken},m.prototype.getSignedAuthToken=function(){return this.signedAuthToken},m.prototype.authenticate=function(e,t){var n=this;this._changeToPendingAuthState(),this.emit("#authenticate",e,function(r,o){o&&o.authError&&(o.authError=p.hydrateError(o.authError)),r?(n._changeToUnauthenticatedState(),t&&t(r,o)):n.auth.saveToken(n.options.authTokenName,e,{},function(r){t&&t(r,o),r?(n._changeToUnauthenticatedState(),n._onSCError(r)):o.isAuthenticated?n._changeToAuthenticatedState(e):n._changeToUnauthenticatedState()})})},m.prototype._tryReconnect=function(e){var t,n=this,r=this.connectAttempts++,o=this.options.autoReconnectOptions;if(null==e||r>0){var i=Math.round(o.initialDelay+(o.randomness||0)*Math.random());t=Math.round(i*Math.pow(o.multiplier,r))}else t=e;t>o.maxDelay&&(t=o.maxDelay),clearTimeout(this._reconnectTimeoutRef),this.pendingReconnect=!0,this.pendingReconnectTimeout=t,this._reconnectTimeoutRef=setTimeout(function(){n.connect()},t)},m.prototype._onSCOpen=function(e){var t=this;e?(this.id=e.id,this.pingTimeout=e.pingTimeout,this.transport.pingTimeout=this.pingTimeout,e.isAuthenticated?this._changeToAuthenticatedState(e.authToken):this._changeToUnauthenticatedState()):this._changeToUnauthenticatedState(),this.connectAttempts=0,this.options.autoProcessSubscriptions?this.processPendingSubscriptions():this.pendingConnectCallback=!0,r.prototype.emit.call(this,"connect",e,function(){t.processPendingSubscriptions()}),this._flushEmitBuffer()},m.prototype._onSCError=function(e){var t=this;setTimeout(function(){if(t.listeners("error").length<1)throw e;r.prototype.emit.call(t,"error",e)},0)},m.prototype._suspendSubscriptions=function(){var e,t;for(var n in this._channels)this._channels.hasOwnProperty(n)&&(e=this._channels[n],t=e.state==e.SUBSCRIBED||e.state==e.PENDING?e.PENDING:e.UNSUBSCRIBED,this._triggerChannelUnsubscribe(e,t))},m.prototype._onSCClose=function(e,t,n){var o=this;if(this.id=null,this.transport&&this.transport.off(),this.pendingReconnect=!1,this.pendingReconnectTimeout=null,clearTimeout(this._reconnectTimeoutRef),this._changeToPendingAuthState(),this._suspendSubscriptions(),this.options.autoReconnect&&(4e3==e||4001==e||1005==e?this._tryReconnect(0):1e3!=e&&e<4500&&this._tryReconnect()),n?r.prototype.emit.call(o,"connectAbort",e,t):r.prototype.emit.call(o,"disconnect",e,t),!m.ignoreStatuses[e]){var i;i=t?"Socket connection failed: "+t:"Socket connection failed for unknown reasons";var a=new _(m.errorStatuses[e]||i,e);this._onSCError(a)}},m.prototype._onSCEvent=function(e,t,n){var o=this._privateEventHandlerMap[e];o?o.call(this,t,n):r.prototype.emit.call(this,e,t,function(){n&&n.callback.apply(n,arguments)})},m.prototype.decode=function(e){return this.transport.decode(e)},m.prototype.encode=function(e){return this.transport.encode(e)},m.prototype._flushEmitBuffer=function(){for(var e,t=this._emitBuffer.head;t;){e=t.next;var n=t.data;t.detach(),this.transport.emitObject(n),t=e}},m.prototype._handleEventAckTimeout=function(e,t){t&&t.detach();var n=e.callback;if(n){delete e.callback;var r=new y("Event response for '"+e.event+"' timed out");n.call(e,r,e)}},m.prototype._emit=function(e,t,n){var r=this;this.state==this.CLOSED&&this.connect();var o={event:e,data:t,callback:n},i=new l.Item;this.options.cloneData?i.data=f(o):i.data=o,o.timeout=setTimeout(function(){r._handleEventAckTimeout(o,i)},this.ackTimeout),this._emitBuffer.append(i),this.state==this.OPEN&&this._flushEmitBuffer()},m.prototype.send=function(e){this.transport.send(e)},m.prototype.emit=function(e,t,n){null==this._localEvents[e]?this._emit(e,t,n):r.prototype.emit.call(this,e,t)},m.prototype.publish=function(e,t,n){var r={channel:this._decorateChannelName(e),data:t};this.emit("#publish",r,n)},m.prototype._triggerChannelSubscribe=function(e,t){var n=e.name;if(e.state!=e.SUBSCRIBED){var o=e.state;e.state=e.SUBSCRIBED;var i={channel:n,oldState:o,newState:e.state,subscriptionOptions:t};e.emit("subscribeStateChange",i),e.emit("subscribe",n,t),r.prototype.emit.call(this,"subscribeStateChange",i),r.prototype.emit.call(this,"subscribe",n,t)}},m.prototype._triggerChannelSubscribeFail=function(e,t,n){var o=t.name,i=!t.waitForAuth||this.authState==this.AUTHENTICATED;t.state!=t.UNSUBSCRIBED&&i&&(t.state=t.UNSUBSCRIBED,t.emit("subscribeFail",e,o,n),r.prototype.emit.call(this,"subscribeFail",e,o,n))},m.prototype._cancelPendingSubscribeCallback=function(e){null!=e._pendingSubscriptionCid&&(this.transport.cancelPendingResponse(e._pendingSubscriptionCid),delete e._pendingSubscriptionCid)},m.prototype._decorateChannelName=function(e){return this.channelPrefix&&(e=this.channelPrefix+e),e},m.prototype._undecorateChannelName=function(e){return this.channelPrefix&&0==e.indexOf(this.channelPrefix)?e.replace(this.channelPrefix,""):e},m.prototype._trySubscribe=function(e){var t=this,n=!e.waitForAuth||this.authState==this.AUTHENTICATED;if(this.state==this.OPEN&&!this.pendingConnectCallback&&null==e._pendingSubscriptionCid&&n){var o={noTimeout:!0},i={channel:this._decorateChannelName(e.name)};e.waitForAuth&&(o.waitForAuth=!0,i.waitForAuth=o.waitForAuth),e.data&&(i.data=e.data),e._pendingSubscriptionCid=this.transport.emit("#subscribe",i,o,function(n){delete e._pendingSubscriptionCid,n?t._triggerChannelSubscribeFail(n,e,i):t._triggerChannelSubscribe(e,i)}),r.prototype.emit.call(this,"subscribeRequest",e.name,i)}},m.prototype.subscribe=function(e,t){var n=this._channels[e];return n?t&&n.setOptions(t):(n=new o(e,this,t),this._channels[e]=n),n.state==n.UNSUBSCRIBED&&(n.state=n.PENDING,this._trySubscribe(n)),n},m.prototype._triggerChannelUnsubscribe=function(e,t){var n=e.name,o=e.state;if(e.state=t||e.UNSUBSCRIBED,this._cancelPendingSubscribeCallback(e),o==e.SUBSCRIBED){var i={channel:n,oldState:o,newState:e.state};e.emit("subscribeStateChange",i),e.emit("unsubscribe",n),r.prototype.emit.call(this,"subscribeStateChange",i),r.prototype.emit.call(this,"unsubscribe",n)}},m.prototype._tryUnsubscribe=function(e){if(this.state==this.OPEN){var t={noTimeout:!0};this._cancelPendingSubscribeCallback(e);var n=this._decorateChannelName(e.name);this.transport.emit("#unsubscribe",n,t)}},m.prototype.unsubscribe=function(e){var t=this._channels[e];t&&t.state!=t.UNSUBSCRIBED&&(this._triggerChannelUnsubscribe(t),this._tryUnsubscribe(t))},m.prototype.channel=function(e,t){var n=this._channels[e];return n||(n=new o(e,this,t),this._channels[e]=n),n},m.prototype.destroyChannel=function(e){var t=this._channels[e];t.unwatch(),t.unsubscribe(),delete this._channels[e]},m.prototype.subscriptions=function(e){var t,n=[];for(var r in this._channels)this._channels.hasOwnProperty(r)&&(t=this._channels[r],(e?t&&(t.state==t.SUBSCRIBED||t.state==t.PENDING):t&&t.state==t.SUBSCRIBED)&&n.push(r));return n},m.prototype.isSubscribed=function(e,t){var n=this._channels[e];return t?!!n&&(n.state==n.SUBSCRIBED||n.state==n.PENDING):!!n&&n.state==n.SUBSCRIBED},m.prototype.processPendingSubscriptions=function(){var e=this;this.pendingConnectCallback=!1;for(var t in this._channels)this._channels.hasOwnProperty(t)&&function(t){t.state==t.PENDING&&e._trySubscribe(t)}(this._channels[t])},m.prototype.watch=function(e,t){if("function"!=typeof t)throw new d("No handler function was provided");this._channelEmitter.on(e,t)},m.prototype.unwatch=function(e,t){t?this._channelEmitter.removeListener(e,t):this._channelEmitter.removeAllListeners(e)},m.prototype.watchers=function(e){return this._channelEmitter.listeners(e)},e.exports=m}).call(t,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise(function(n,r){function response(){var e,t=[],n=[],r={};return o.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,i,a){t.push(i=i.toLowerCase()),n.push([i,a]),e=r[i],r[i]=e?e+","+a:a}),{ok:1==(o.status/200|0),status:o.status,statusText:o.statusText,url:o.responseURL,clone:response,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(o.responseXML)},blob:function(){return Promise.resolve(new Blob([o.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}var o=new XMLHttpRequest;o.open(t.method||"get",e);for(var i in t.headers)o.setRequestHeader(i,t.headers[i]);o.withCredentials="include"==t.credentials,o.onload=function(){n(response())},o.onerror=r,o.send(t.body)})};t.default=r},function(e,t,n){"use strict";var r=function(){};"production"!=={NODE_ENV:"production"}.NODE_ENV&&(r=function(e,t,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var o=2;o<r;o++)n[o-2]=arguments[o];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var i=0,a="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}}),e.exports=r},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(0),a=n(9),u=(n(8),n(5)),s=n(40),l=_interopRequireDefault(s),c=n(16),f=_interopRequireWildcard(c),p=n(32),d=_interopRequireWildcard(p),h=n(12),_=_interopRequireWildcard(h),y=n(15),b=_interopRequireWildcard(y),m=n(3),v=_interopRequireWildcard(m),g=n(18),O=(_interopRequireDefault(g),n(17)),C=(_interopRequireDefault(O),n(137)),w=_interopRequireDefault(C),S=n(138),T=_interopRequireDefault(S),E=n(139),P=_interopRequireDefault(E),R=n(140),k=_interopRequireDefault(R),D=n(141),j=_interopRequireDefault(D),A=n(142),I=_interopRequireDefault(A),N=n(144),U=_interopRequireDefault(N),q=n(145),M=_interopRequireDefault(q),L=n(143),F=_interopRequireDefault(L),x=n(146),B=_interopRequireDefault(x),H=n(4),W=n(130),V=_interopRequireDefault(W),G=n(21),K=_interopRequireDefault(G),$=function(e){function App(e){_classCallCheck(this,App);var t=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,e)),n=t.props;n.actions,n.state;return t.socket=(new l.default).on("userListChange",t.handleUserListChange.bind(t)),t}return _inherits(App,e),o(App,[{key:"handleUserListChange",value:function(e){var t=this.props,n=t.state,r=t.actions;n.user&&n.user.remote&&r.setDocumentPeers(e.body.users.filter(function(e){return e.handle!==n.user.remote.handle}))}},{key:"componentWillMount",value:function(){var e=this.props.actions;K.default.registerProgressCallback(e.registerNetworkCall),(0,V.default)(2e3).registerStatusChangeCallback(e.setNetworkStatus),e.loadUserFromSession()}},{key:"componentDidMount",value:function(){var e=this.props.actions;window.addEventListener("resize",(0,H.debounce)(function(){e.setScreenWidth(window.innerWidth)},500)),document.addEventListener("dragstart",this.handleDragDropEvents,!1),document.addEventListener("dragend",this.handleDragDropEvents,!1),document.addEventListener("dragover",this.handleDragDropEvents,!1),document.addEventListener("dragenter",this.handleDragDropEvents,!1),document.addEventListener("dragleave",this.handleDragDropEvents,!1),document.addEventListener("drop",this.handleDragDropEvents,!1)}},{key:"handleDragDropEvents",value:function(e){e.preventDefault()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.state,r=t.actions,o=e.state,i=o.router.room;n.user.remote&&n.app.status===v.STATUS_IDLE&&!n.app.config&&r.loadAppConfig(),!o.app.config&&n.app.config&&r.loadApis(),this.socket.getRoom()!==i&&this.socket.setRoom(i),o.user.remote&&!o.user.remote.error&&o.user.remote!==this.socket.getUser()&&this.socket.setUser(o.user.remote)}},{key:"render",value:function(){var e=this.props,t=e.history;return e.state.api.status===v.STATUS_FAILED?(0,i.h)(k.default,{type:v.STATUS_FAILED}):(0,i.h)(a.Router,{history:t},(0,i.h)(B.default,{authenticate:!0,component:j.default,path:"/"}),(0,i.h)(B.default,{component:I.default,path:"/reset"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:group/:collection/document/edit/:documentId?/select/:referencedField?/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:collection/document/edit/:documentId?/select/:referencedField?/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:T.default,path:"/:group/:collection/document/edit/:documentId?/:section?"}),(0,i.h)(B.default,{authenticate:!0,component:T.default,path:"/:collection/document/edit/:documentId?/:section?"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:group/:collection/document/new/:section?/:referencedField?/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:collection/document/new/:section?/:referencedField?/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:w.default,path:"/:group/:collection/document/new/:section?"}),(0,i.h)(B.default,{authenticate:!0,component:w.default,path:"/:collection/document/new/:section?"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:group/:collection/documents/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:P.default,path:"/:collection/documents/:page?"}),(0,i.h)(B.default,{authenticate:!0,component:F.default,path:"/profile/:section?"}),(0,i.h)(B.default,{authenticate:!0,component:F.default,path:"/profile/select/:referencedField?/:page?"}),(0,i.h)(B.default,{component:U.default,path:"/sign-in/:token?"}),(0,i.h)(B.default,{component:M.default,path:"/sign-out"}),(0,i.h)(B.default,{authenticate:!0,component:k.default,default:!0,type:v.ERROR_ROUTE_NOT_FOUND}))}}]),App}(i.Component);t.default=(0,H.connectHelper)(function(e){return e},function(e){return(0,u.bindActionCreators)(r({},d,_,b,f),e)})($)},function(e,t,n){"use strict";function syncRouteWithStore(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.selectLocationState,s=void 0===o?u:o;if(void 0===s(t.getState()))throw new Error("state.router missing");var l=void 0,c=void 0,f=void 0,p=function(e){return s(t.getState()).locationBeforeTransitions||(e?c:void 0)},d=function(n){if(!f&&(l=n,c||(c=n,!p()))){var r=(0,a.urlHelper)().paramsToObject(e.location.search);t.dispatch({action:e.action,locationBeforeTransitions:e.location,params:r,type:i.LOCATION_CHANGE})}},h=function(){var t=p(!0);t&&!Object.is(t,l||c)&&(f=!0,e.push(t),f=!1)};return t.subscribe(h),h(),c=p(),e.listen(d),e.location&&d(e.location),r({},e,{listen:function(e){var n=p(!0),r=!1,o=t.subscribe(function(){var t=p(!0);t!==n&&(n=t,r||e(n))});return e(n),function(){r=!0,o()}}})}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=syncRouteWithStore;var o=n(7),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a=n(57),u=function(e){return e.router}},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.user=t.router=t.documents=t.document=t.app=t.api=void 0;var r=n(131),o=_interopRequireDefault(r),i=n(132),a=_interopRequireDefault(i),u=n(133),s=_interopRequireDefault(u),l=n(134),c=_interopRequireDefault(l),f=n(135),p=_interopRequireDefault(f),d=n(136),h=_interopRequireDefault(d);t.api=o.default,t.app=a.default,t.document=s.default,t.documents=c.default,t.router=p.default,t.user=h.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(71),a=_interopRequireDefault(i),u=n(196),s=_interopRequireDefault(u),l=n(194),c=n(62),f=n(195),p=_interopRequireDefault(f),d=n(193),h=function(){try{return window.history.state||{}}catch(e){return{}}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(d.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,d.supportsHistory)(),i=!(0,d.supportsPopStateOnHashChange)(),u=e.forceRefresh,f=void 0!==u&&u,_=e.getUserConfirmation,y=void 0===_?d.getConfirmation:_,b=e.keyLength,m=void 0===b?6:b,v=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",g=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname,u=i.search,s=i.hash,l=a+u+s;return v&&(l=(0,c.stripPrefix)(l,v)),o({},(0,c.parsePath)(l),{state:r,key:n})},O=function(){return Math.random().toString(36).substr(2,m)},C=(0,p.default)(),w=function(e){o(H,e),H.length=t.length,C.notifyListeners(H.location,H.action)},S=function(e){(0,d.isExtraneousPopstateEvent)(e)||P(g(e.state))},T=function(){P(g(h()))},E=!1,P=function(e){if(E)E=!1,w();else{C.confirmTransitionTo(e,"POP",y,function(t){t?w({action:"POP",location:e}):R(e)})}},R=function(e){var t=H.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(E=!0,N(o))},k=g(h()),D=[k.key],j=function(e){return v+(0,c.createPath)(e)},A=function(e,o){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,l.createLocation)(e,o,O(),H.location);C.confirmTransitionTo(i,"PUSH",y,function(e){if(e){var r=j(i),o=i.key,u=i.state;if(n)if(t.pushState({key:o,state:u},null,r),f)window.location.href=r;else{var s=D.indexOf(H.location.key),l=D.slice(0,-1===s?0:s+1);l.push(i.key),D=l,w({action:"PUSH",location:i})}else(0,a.default)(void 0===u,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},I=function(e,o){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,l.createLocation)(e,o,O(),H.location);C.confirmTransitionTo(i,"REPLACE",y,function(e){if(e){var r=j(i),o=i.key,u=i.state;if(n)if(t.replaceState({key:o,state:u},null,r),f)window.location.replace(r);else{var s=D.indexOf(H.location.key);-1!==s&&(D[s]=i.key),w({action:"REPLACE",location:i})}else(0,a.default)(void 0===u,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},N=function(e){t.go(e)},U=function(){return N(-1)},q=function(){return N(1)},M=0,L=function(e){M+=e,1===M?((0,d.addEventListener)(window,"popstate",S),i&&(0,d.addEventListener)(window,"hashchange",T)):0===M&&((0,d.removeEventListener)(window,"popstate",S),i&&(0,d.removeEventListener)(window,"hashchange",T))},F=!1,x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=C.setPrompt(e);return F||(L(1),F=!0),function(){return F&&(F=!1,L(-1)),t()}},B=function(e){var t=C.appendListener(e);return L(1),function(){L(-1),t()}},H={length:t.length,action:"POP",location:k,createHref:j,push:A,replace:I,go:N,goBack:U,goForward:q,block:x,listen:B};return H};t.default=_},function(e,t,n){"use strict";function createThunkMiddleware(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}t.__esModule=!0;var r=createThunkMiddleware();r.withExtraArgument=createThunkMiddleware,t.default=r},function(e,t,n){"use strict";const r=function(e){this.options=e,this.reservedProperties=["_id","apiVersion","createdBy","createdAt","lastModifiedAt","lastModifiedBy","v","history","composed"]};n(79)(r),n(78)(r),n(80)(r),e.exports=r},function(e,t,n){"use strict";e.exports=function(e){e.prototype.fromEndpoint=function(e){return this.endpoint=e,this},e.prototype.goToPage=function(e){return this.page=e,this},e.prototype.in=function(e){return this.collection=e,this},e.prototype.inMedia=function(e){return e=e||!0,this.mediaBucket=e,this},e.prototype.limitTo=function(e){return this.limit=e,this},e.prototype.sortBy=function(e,t){return this.sort=this.sort||{},this.sort[e]="desc"===t?-1:1,this},e.prototype.useDatabase=function(e){return this.customDatabase=e,this},e.prototype.useFields=function(e){if(void 0!==e){var t={};e.forEach(function(e){t[e]=1}),this.fields=JSON.stringify(t)}return this},e.prototype.useVersion=function(e){return this.customVersion=e,this},e.prototype.where=function(e){return this.query=e,this},e.prototype.whereFieldBeginsWith=function(e,t){return this._addToQuery(e,"$regex","^"+t),this},e.prototype.whereFieldContains=function(e,t){return this._addToQuery(e,"$regex",t),this},e.prototype.whereFieldDoesNotContain=function(e,t){return this._addToQuery(e,"$not","/"+t+"/i"),this},e.prototype.whereFieldDoesNotExist=function(e){return this._addToQuery(e,"$eq",null),this},e.prototype.whereFieldEndsWith=function(e,t){return this._addToQuery(e,"$regex",t+"$"),this},e.prototype.whereFieldExists=function(e){return this._addToQuery(e,"$ne",null),this},e.prototype.whereFieldIsEqualTo=function(e,t){return this._addToQuery(e,t),this},e.prototype.whereFieldIsGreaterThan=function(e,t){return this._addToQuery(e,"$gt",t),this},e.prototype.whereFieldIsGreaterThanOrEqualTo=function(e,t){return this._addToQuery(e,"$gte",t),this},e.prototype.whereFieldIsLessThan=function(e,t){return this._addToQuery(e,"$lt",t),this},e.prototype.whereFieldIsLessThanOrEqualTo=function(e,t){return this._addToQuery(e,"$lte",t),this},e.prototype.whereFieldIsNotEqualTo=function(e,t){return isNaN(t)?this._addToQuery(e,"$not","/^"+t+"$/i"):this._addToQuery(e,"$ne",t),this},e.prototype.whereFieldIsNotOneOf=function(e,t){return this._addToQuery(e,"$nin",t),this},e.prototype.whereFieldIsOneOf=function(e,t){return this._addToQuery(e,"$in",t),this},e.prototype.withComposition=function(e){return this.compose=!1!==e,this},e.prototype.includeHistory=function(e){return this.history=!1!==e,this}}},function(e,t,n){"use strict";const r=n(29),o=n(208);e.exports=function(e){e.prototype._addToQuery=function(e,t,n){void 0===this.query&&(this.query={}),void 0===this.query[e]&&(this.query[e]={}),void 0===n?this.query[e]=t:this.query[e][t]=n},e.prototype._buildURL=function(e){e=e||{};let t="";if(t+=this.options.uri,t+=":"+this.options.port,this.mediaBucket?t+="/media"+("string"==typeof this.mediaBucket?"/"+this.mediaBucket:""):this.collection||this.endpoint?(t+="/"+(void 0!==this.customVersion?this.customVersion:this.options.version),this.collection?(t+="/"+(void 0!==this.customDatabase?this.customDatabase:this.options.database),t+="/"+this.collection):t+="/"+this.endpoint):t+="/api",e.signUrl&&(t+="/sign"),e.config&&(t+="/config"),e.status&&(t+="/status"),e.collections&&(t+="/collections"),e.stats&&(t+="/stats"),this.count&&(t+="/count"),e.useParams){let e={};this.query&&(e.filter=JSON.stringify(this.query)),this.fields&&(e.fields=this.fields),isNaN(parseInt(this.limit))||(e.count=this.limit),this.page&&(e.page=this.page),this.hasOwnProperty("compose")&&(e.compose=this.compose),void 0!==this.history&&(e.includeHistory=this.history),this.sort&&(e.sort=JSON.stringify(this.sort));const n=decodeURIComponent(r.stringify(e));n&&(t+="?"+n)}return e.id&&(t+="/"+e.id),t},e.prototype._createRequestObject=function(e){const t=o.parse(e.uri),n=Object.assign({},e,{uri:{href:decodeURIComponent(t.href),hostname:t.hostname,path:decodeURIComponent(t.path),port:t.port,protocol:t.protocol}});return"function"==typeof this.options.callback?this.options.callback(n):n},e.prototype._log=function(e){console&&console.log&&console.log(`[DADI API Wrapper] ${e}`)},e.prototype._reset=function(){this.params={},this.customVersion=void 0,this.customDatabase=void 0},e.prototype._stripReservedProperties=function(e){let t={};return Object.keys(e).forEach(n=>{-1===this.reservedProperties.indexOf(n)&&(t[n]=e[n])}),t}}},function(e,t,n){"use strict";e.exports=function(e){e.prototype.create=function(e){const t=e instanceof Array?e.map(this._stripReservedProperties.bind(this)):this._stripReservedProperties(e);return this._createRequestObject({body:t,method:"POST",uri:this._buildURL()})},e.prototype.delete=function(){if(void 0===this.query)throw new Error("Unable to find query for delete");return this._createRequestObject({body:{query:this.query},method:"DELETE",uri:this._buildURL()})},e.prototype.find=function(e){return e&&e.extractMetadata&&(this.count=!0),this._createRequestObject({method:"GET",uri:this._buildURL({useParams:!0})})},e.prototype.getCollections=function(){return this._createRequestObject({method:"GET",uri:this._buildURL({collections:!0})})},e.prototype.getConfig=function(){return this._createRequestObject({method:"GET",uri:this._buildURL({config:!0})})},e.prototype.getSignedUrl=function(e){return this._createRequestObject({body:e,method:"POST",uri:this._buildURL({signUrl:!0})})},e.prototype.getStats=function(){return this._createRequestObject({method:"GET",uri:this._buildURL({stats:!0})})},e.prototype.getStatus=function(){return this._createRequestObject({method:"POST",uri:this._buildURL({status:!0})})},e.prototype.setConfig=function(e){return this._createRequestObject({body:e,method:"POST",uri:this._buildURL({config:!0})})},e.prototype.update=function(e){if(void 0===this.query)throw new Error("Unable to find query for update");return this._createRequestObject({body:{query:this.query,update:this._stripReservedProperties(e)},method:"PUT",uri:this._buildURL()})}}},function(e,t,n){"use strict";function locationChange(e,t,n){return{action:n,locationBeforeTransitions:e,params:t,type:o.LOCATION_CHANGE}}function roomChange(e){return{room:e,type:o.ROOM_CHANGE}}Object.defineProperty(t,"__esModule",{value:!0}),t.locationChange=locationChange,t.roomChange=roomChange;var r=n(7),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(38),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),f=n(2),p=_interopRequireDefault(f),d=n(156),h=_interopRequireDefault(d),_=n(6),y=_interopRequireDefault(_),b=(o=r=function(e){function DocumentFilter(){return _classCallCheck(this,DocumentFilter),_possibleConstructorReturn(this,(DocumentFilter.__proto__||Object.getPrototypeOf(DocumentFilter)).apply(this,arguments))}return _inherits(DocumentFilter,e),i(DocumentFilter,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.field,r=e.fields,o=e.filters,i=e.index,u=e.onUpdate,s=e.type,l=e.value,f=new p.default(h.default,"control","control-button"),d=new p.default(h.default,"control","control-field","select"),_=new p.default(h.default,"select","control","control-analyser"),b=new p.default(h.default,"input","control","control-value"),m=r[n],v="Field"+String(m.type),g=c[v]&&c[v].filter,O=(this.handleChange.bind(this,"type"),this.handleChange.bind(this,"value"),Object.keys(r).filter(function(e){return e===n||!o.find(function(t){return t.field===e})}));return(0,a.h)("div",{class:h.default.filter},(0,a.h)("select",{class:d.getClasses(),onChange:this.handleChange.bind(this,"field")},(0,a.h)("option",{disabled:!0,selected:!0,value:!0},"Select a field"),O.map(function(e){return(0,a.h)("option",{selected:n===e,key:e,value:e},r[e].label)})),n&&s&&(0,a.h)(g,{analyserStyles:_.getClasses(),config:t,containerStyles:h.default["filter-container"],index:i,onUpdate:u,valueStyles:b.getClasses(),type:s,value:l}),(0,a.h)("div",{class:f.getClasses()},(0,a.h)(y.default,{className:h.default["small-button"],onClick:this.handleRemove.bind(this)},"-")))}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.index;r(_defineProperty({},e,t.target.value),o)}},{key:"handleRemove",value:function(){var e=this.props,t=e.index,n=e.onRemove;"function"==typeof n&&n(t)}}]),DocumentFilter}(a.Component),r.propTypes={config:s.default.object,field:s.default.string,fields:s.default.object,filters:s.default.object,index:s.default.number,onRemove:s.default.func,onUpdate:s.default.func,type:s.default.oneOf(["$eq","$ne","$nin","$in","$gt","$gte","$lt","$lte"]),value:s.default.string},o);t.default=b},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(157)),f=_interopRequireDefault(c),p=n(4),d=n(24),h=n(82),_=_interopRequireDefault(h),y=n(6),b=_interopRequireDefault(y),m=(o=r=function(e){function DocumentFilters(e){_classCallCheck(this,DocumentFilters);var t=_possibleConstructorReturn(this,(DocumentFilters.__proto__||Object.getPrototypeOf(DocumentFilters)).call(this,e)),n=(t.props.collection,t.getFiltersFromParams());return t.keyboard=new d.Keyboard,t.state={dirty:!1,filters:n},t}return _inherits(DocumentFilters,e),i(DocumentFilters,[{key:"getFiltersFromParams",value:function(){var e=this.props.filters;return(e?(0,p.objectToArray)(e,"field"):[]).map(this.deconstructFilters.bind(this))}},{key:"componentDidMount",value:function(){var e=this;this.keyboard.on("cmd+f").do(function(t){var n=e.props,r=n.collection,o=n.filters;o||e.setState({filters:[e.createDefaultFilter(r,o)]})})}},{key:"componentWillUpdate",value:function(e,t){var n=this.props.collection,r=e.newFilter;e.collection!==n?this.setState({filters:[]}):this.createOrAppendFilters(r)}},{key:"createOrAppendFilters",value:function(e){var t=this.props,n=t.collection,r=t.filters,o=this.getFiltersFromParams();e&&o.push(this.createDefaultFilter(n,r)),this.setState({filters:o})}},{key:"componentWillUnmount",value:function(){this.keyboard.off()}},{key:"createDefaultFilter",value:function(e,t){return{field:Object.keys(e.fields).filter(function(e){return!t||!Object.keys(t).find(function(t){return t===e})})[0],type:"$eq",value:null}}},{key:"render",value:function(){var e=this,t=this.state,n=t.dirty,r=t.filters,o=(t.newFilter,this.props),i=o.collection,u=o.config;return(0,a.h)("form",{class:f.default.filters,onSubmit:function(e){return e.preventDefault()}},r&&i&&r.map(function(t,n){return(0,a.h)(_.default,{config:u,field:t.field,fields:i.fields,filters:r,index:n,onUpdate:e.handleUpdateFilter.bind(e),onRemove:e.handleRemoveFilter.bind(e),type:t.type,value:t.value})}),r&&i&&r.length>0&&(0,a.h)("div",{class:f.default.submit},(0,a.h)(b.default,{accent:"data",disabled:!n,onClick:this.updateUrl.bind(this),type:"submit"},"Update")))}},{key:"deconstructFilters",value:function(e){if("string"==typeof e.value)return Object.assign(e,{type:"$eq"});var t=Object.keys(e.value)[0],n=e.value[t];return Object.assign(e,{type:t,value:n})}},{key:"constructFilters",value:function(e){return e.map(function(e){return Object.assign({},e,{value:_defineProperty({},e.type,e.value)})})}},{key:"handleRemoveFilter",value:function(e){var t=this.state.filters,n=(this.props.collection,[].concat(_toConsumableArray(t)));n.splice(e,1),this.setState({filters:n}),this.updateUrl(!n.length)}},{key:"handleUpdateFilter",value:function(e,t){var n=this.state.filters,r=Object.assign({},n[t],e),o=[].concat(_toConsumableArray(n));Object.assign(o[t],r),this.setState({filters:o}),void 0!==r.value&&this.setState({dirty:!0})}},{key:"updateUrl",value:function(e){var t=this.state.filters,n=this.props.updateUrlParams,r=t.filter(function(e){return Object.keys(e).filter(function(t){return!e[t]}).length<1}),o=this.constructFilters(r),i=(0,p.arrayToObject)(o,"field");(i||e)&&n(i),this.setState({dirty:!1})}},{key:"addFilter",value:function(){var e=this.state.filters;this.setState({filters:[].concat(_toConsumableArray(e),[{field:null,value:null,type:"$eq"}])})}}]),DocumentFilters}(a.Component),r.propTypes={collection:s.default.object,config:s.default.object,filter:s.default.string,newFilter:s.default.bool},o);t.default=m},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(10),c=_interopRequireDefault(l),f=(o=r=function(e){function DocumentSearch(e){_classCallCheck(this,DocumentSearch);var t=_possibleConstructorReturn(this,(DocumentSearch.__proto__||Object.getPrototypeOf(DocumentSearch)).call(this,e));return t.state.value="",t}return _inherits(DocumentSearch,e),i(DocumentSearch,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.collection,r=this.state.value;return(0,a.h)(c.default,{className:t,onChange:this.handleSearchChange.bind(this),placeholder:"Search in "+String(n.name)+"...",type:"search",value:r})}},{key:"handleSearchChange",value:function(e){this.setState({value:e.target.value}),console.log("* Search:",e.target.value)}}]),DocumentSearch}(a.Component),r.propTypes={className:s.default.string,collection:s.default.object},o);t.default=f},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.list=t.filter=t.edit=void 0;var r=n(86),o=_interopRequireDefault(r),i=n(87),a=_interopRequireDefault(i),u=n(88),s=_interopRequireDefault(u);t.edit=o.default,t.filter=a.default,t.list=s.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(43),c=_interopRequireDefault(l),f=n(14),p=_interopRequireDefault(f),d=(o=r=function(e){function FieldBooleanEdit(){return _classCallCheck(this,FieldBooleanEdit),_possibleConstructorReturn(this,(FieldBooleanEdit.__proto__||Object.getPrototypeOf(FieldBooleanEdit)).apply(this,arguments))}return _inherits(FieldBooleanEdit,e),i(FieldBooleanEdit,[{key:"render",value:function(){var e=this.props,t=(e.onChange,e.value),n=e.schema;return(0,a.h)(p.default,{compact:!0,label:n.label},(0,a.h)(c.default,{onChange:this.handleOnChange.bind(this),value:t}))}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.onChange,r=t.schema;"function"==typeof n&&n.call(this,r._id,e.target.checked)}}]),FieldBooleanEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},r.defaultProps={value:!1},o);t.default=d},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=(o=r=function(e){function FieldBooleanFilter(e){return _classCallCheck(this,FieldBooleanFilter),_possibleConstructorReturn(this,(FieldBooleanFilter.__proto__||Object.getPrototypeOf(FieldBooleanFilter)).call(this,e))}return _inherits(FieldBooleanFilter,e),i(FieldBooleanFilter,[{key:"render",value:function(){var e=this.props,t=e.analyserStyles,n=e.containerStyles,r=(e.onUpdate,e.value);return(0,a.h)("div",{class:n},(0,a.h)("select",{class:t,onChange:this.handleChange.bind(this,"value")},(0,a.h)("option",{selected:!0===r,value:"true"},"Yes"),(0,a.h)("option",{selected:!1===r,value:"false"},"No"),"))}"))}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.index;r(_defineProperty({},e,!Boolean(t.target.selectedIndex)),o)}}]),FieldBooleanFilter}(a.Component),r.propTypes={analyserStyles:s.default.string,containerStyles:s.default.string,index:s.default.number,onUpdate:s.default.func,value:s.default.string},o);t.default=l},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=(o=r=function(e){function FieldBooleanList(){return _classCallCheck(this,FieldBooleanList),_possibleConstructorReturn(this,(FieldBooleanList.__proto__||Object.getPrototypeOf(FieldBooleanList)).apply(this,arguments))}return _inherits(FieldBooleanList,e),i(FieldBooleanList,[{key:"render",value:function(){return this.props.value?"Yes":"No"}}]),FieldBooleanList}(a.Component),r.propTypes={value:s.default.bool,schema:s.default.object},o);t.default=l},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filter=t.edit=void 0;var r=n(90),o=_interopRequireDefault(r),i=n(91),a=_interopRequireDefault(i);t.edit=o.default,t.filter=a.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(60)),f=_interopRequireDefault(c),p=n(45),d=_interopRequireDefault(p),h=n(14),_=_interopRequireDefault(h),y=n(10),b=_interopRequireDefault(y),m=n(28),v=_interopRequireDefault(m),g=(o=r=function(e){function FieldDateTimeEdit(e){_classCallCheck(this,FieldDateTimeEdit);var t=_possibleConstructorReturn(this,(FieldDateTimeEdit.__proto__||Object.getPrototypeOf(FieldDateTimeEdit)).call(this,e));return t.state.pickerVisible=!1,t.picker=!1,t.pickerEventHandler=t.handlePickerClick.bind(t,!0),t.pickerOutsideEventHandler=t.handlePickerClick.bind(t,!1),t.losingFocusTimeout=null,t}return _inherits(FieldDateTimeEdit,e),i(FieldDateTimeEdit,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.error,r=e.schema,o=e.value,i=this.state.pickerVisible,u=r.publish||{},s=null;if(o){var l=new v.default(o);l.isValid()&&(s=l)}return(0,a.h)(_.default,{error:n,errorMessage:"string"==typeof n?n:null,label:r.label,comment:r.required&&"Required"},(0,a.h)(b.default,{onBlur:this.handleFocus.bind(this,!1),onChange:this.handleChange.bind(this),onFocus:this.handleFocus.bind(this,!0),readonly:!0===u.readonly,type:"text",value:s&&s.format(t.formats.date.long)}),(0,a.h)("div",{ref:this.handlePickerRef.bind(this)},i&&(0,a.h)(d.default,{className:f.default.picker,date:s&&s.getDate(),onChange:this.handlePickerChange.bind(this)})))}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.pickerOutsideEventHandler)}},{key:"componentWillUnmount",value:function(){this.picker&&this.picker.removeEventListener("click",this.pickerEventHandler),clearTimeout(this.losingFocusTimeout)}},{key:"handleChange",value:function(e){var t=this.props,n=t.config,r=t.onChange,o=t.schema,i=t.value,a=new v.default(e.target.value,n.formats.date.long),u=null;e.target.value.length>0&&(u=a.isValid()?a.getDate().toISOString():i),"function"==typeof r&&r.call(this,o._id,u)}},{key:"handleFocus",value:function(e){var t=this,n=this.state.pickerVisible;this.hasFocus=e,n||this.setState({pickerVisible:!0}),!e&&n&&(clearTimeout(this.losingFocusTimeout),this.losingFocusTimeout=setTimeout(function(){t.setState({pickerVisible:!1})},200))}},{key:"handlePickerChange",value:function(e){var t=this.props,n=t.onChange,r=t.schema;"function"==typeof n&&n.call(this,r._id,e.toISOString())}},{key:"handlePickerClick",value:function(e,t){var n=this.state.pickerVisible;e?(t.stopPropagation(),clearTimeout(this.losingFocusTimeout)):n&&!this.hasFocus&&this.setState({pickerVisible:!1})}},{key:"handlePickerRef",value:function(e){this.picker||(e.addEventListener("click",this.pickerEventHandler),this.picker=e)}}]),FieldDateTimeEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},o);t.default=g},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(28),c=_interopRequireDefault(l),f=n(2),p=(_interopRequireDefault(f),n(60)),d=(_interopRequireDefault(p),n(45)),h=(_interopRequireDefault(d),n(10)),_=_interopRequireDefault(h),y=(o=r=function(e){function FieldDateTimeFilter(e){_classCallCheck(this,FieldDateTimeFilter);var t=_possibleConstructorReturn(this,(FieldDateTimeFilter.__proto__||Object.getPrototypeOf(FieldDateTimeFilter)).call(this,e));return t.filterTypes={$gt:"After",$lt:"Before"},t}return _inherits(FieldDateTimeFilter,e),i(FieldDateTimeFilter,[{key:"render",value:function(){var e=this,t=this.props,n=t.analyserStyles,r=t.containerStyles,o=t.type,i=t.value,u=t.valueStyles;return(0,a.h)("div",{class:r},(0,a.h)("select",{class:n,onChange:this.handleChange.bind(this,"type")},(0,a.h)("option",{disabled:!0,selected:!0,value:!0},"Select a type"),Object.keys(this.filterTypes).map(function(t){return(0,a.h)("option",{selected:o===t,key:t,value:t},e.filterTypes[t])})),(0,a.h)(_.default,{className:u,onChange:this.handleChange.bind(this,"value"),onKeyUp:this.handleChange.bind(this,"value"),placeholder:"Search value",type:"date",value:i}))}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.config,o=n.onUpdate,i=n.index,a=new c.default(t.target.value,r.formats.date.long),u=null;t.target.value.length>0&&a.isValid()&&(u=a.getDate().toISOString()),o(_defineProperty({},e,u),i)}}]),FieldDateTimeFilter}(a.Component),r.propTypes={analyserStyles:s.default.string,config:s.default.object,containerStyles:s.default.string,index:s.default.number,onUpdate:s.default.func,type:s.default.string,value:s.default.string,valueStyles:s.default.string},o);t.default=y},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.referenceSelect=t.edit=void 0;var r=n(93),o=_interopRequireDefault(r),i=n(94),a=_interopRequireDefault(i);t.edit=o.default,t.referenceSelect=a.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u);n(22);var l=n(11),c=n(2),f=(_interopRequireDefault(c),n(158)),p=_interopRequireDefault(f),d=n(6),h=_interopRequireDefault(d),_=n(106),y=_interopRequireDefault(_),b=n(14),m=_interopRequireDefault(b),v=n(122),g=_interopRequireDefault(v),O=(o=r=function(e){function FieldImageEdit(e){_classCallCheck(this,FieldImageEdit);var t=_possibleConstructorReturn(this,(FieldImageEdit.__proto__||Object.getPrototypeOf(FieldImageEdit)).call(this,e));return t.state.signedUrl=null,t}return _inherits(FieldImageEdit,e),i(FieldImageEdit,[{key:"render",value:function(){var e=this,t=this.props,n=(t.collection,t.config),r=(t.documentId,t.group,t.onBuildBaseUrl),o=t.schema,i=t.value,u=o.label||o._id,s=o.publish&&o.publish.subType?o.publish.subType:o.type,c=l.buildUrl.apply(void 0,_toConsumableArray(r()).concat(["select",o._id])),f=(o.type,o.settings&&1===o.settings.limit),d=i&&!Array.isArray(i)?[i]:i;return(0,a.h)(m.default,{label:u},d&&(0,a.h)("div",{class:p.default["value-container"]},(0,a.h)("div",{class:p.default.thumbnails},d.map(function(t){return(0,a.h)(g.default,{styles:p.default.thumbnail,src:e.getImageSrc(t)})})),(0,a.h)(h.default,{accent:"destruct",size:"small",className:p.default["remove-existing"],onClick:this.handleRemoveFile.bind(this)},"Delete")),!d&&(0,a.h)("div",null,(0,a.h)("div",{class:p.default.placeholder},(0,a.h)(h.default,{accent:"data",size:"small",href:c,className:p.default["select-existing"]},"Select existing ",s.toLowerCase())),(0,a.h)("div",{class:p.default["upload-options"]},(0,a.h)(y.default,{allowDrop:!0,accept:n.FieldImage.accept,multiple:!f,onChange:this.handleFileChange.bind(this)}))))}},{key:"getImageSrc",value:function(e){var t=this.props.config;t&&t.cdn;return e?e._previewData?e._previewData:e.url?e.url:void 0:null}},{key:"handleRemoveFile",value:function(){var e=this.props,t=e.onChange,n=e.schema;"function"==typeof t&&t.call(this,n._id,null)}},{key:"handleFileChange",value:function(e){for(var t=this,n=this.props,r=(n.config,n.onChange),o=n.schema,i=o.settings&&1===o.settings.limit,a=[],u=0;u<e.length;u++)!function(n){var u=e[n],s=new FileReader;s.onload=function(l){if(a[n]={_file:u,_previewData:s.result,contentLength:u.size,fileName:u.name,mimetype:u.type},a.length===e.length&&"function"==typeof r){var c=i?a[0]:a;r.call(t,o._id,c)}},s.readAsDataURL(u)}(u)}}]),FieldImageEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onBuildBaseUrl:s.default.func,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},o);t.default=O},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(4),c=n(2),f=_interopRequireDefault(c),p=n(159),d=_interopRequireDefault(p),h=n(192),_=(o=r=function(e){function FieldImageReferenceSelect(e){_classCallCheck(this,FieldImageReferenceSelect);var t=_possibleConstructorReturn(this,(FieldImageReferenceSelect.__proto__||Object.getPrototypeOf(FieldImageReferenceSelect)).call(this,e));return t.debouncedResizeHandler=(0,l.debounce)(t.forceUpdate.bind(t),500),t}return _inherits(FieldImageReferenceSelect,e),i(FieldImageReferenceSelect,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.debouncedResizeHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedResizeHandler)}},{key:"render",value:function(){var e=this,t=this.props.data,n=this.getNumberOfColumns(),r=Array.apply(null,{length:n}).map(function(e){return[]});return t.forEach(function(e,t){r[t%n][t]=e}),(0,a.h)("div",{class:d.default.columns},r.map(function(t){return(0,a.h)("div",{class:d.default.column,style:"width: "+100/n+"%"},t.map(e.renderItem.bind(e)))}))}},{key:"getNumberOfColumns",value:function(){var e=window.innerWidth;return e>800?5:e>550?3:1}},{key:"handleItemSelect",value:function(e,t){var n=this.props,r=n.onSelect,o=n.selectLimit,i=n.selectedRows,a=!Boolean(i[e]),u=(Object.keys(i),{});u=1===o?_defineProperty({},e,!0):Object.assign({},i,_defineProperty({},e,a)),"function"==typeof r&&r.call(this,u)}},{key:"renderItem",value:function(e,t){var n=this.props,r=n.selectedRows,o=n.selectLimit,i=e.height/e.width*100,u=!0===r[t],s=new f.default(d.default,"item").addIf("item-selected",u);return(0,a.h)("div",{class:s.getClasses(),onClick:this.handleItemSelect.bind(this,t)},(0,a.h)("input",{class:d.default["item-select"],checked:u,type:1===o?"radio":"checkbox"}),(0,a.h)("div",{class:d.default["item-image-holder"],style:"padding-bottom: "+i+"%"},(0,a.h)("img",{class:d.default["item-image"],src:e.url})),(0,a.h)("div",{class:d.default["item-overlay"]},(0,a.h)("p",{class:d.default["item-filename"]},e.fileName)),(0,a.h)("div",{class:d.default["item-info"]},(0,a.h)("div",null,(0,a.h)("span",{class:d.default["item-size"]},h(e.contentLength).human("si")),",",(0,a.h)("br",null),(0,a.h)("span",{class:d.default["item-dimensions"]},e.width,"x",e.height)),(0,a.h)("div",null,(0,a.h)("span",{class:d.default["item-mimetype"]},e.mimetype))))}}]),FieldImageReferenceSelect}(a.Component),r.propTypes={value:s.default.bool,schema:s.default.object},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filter=t.edit=void 0;var r=n(96),o=_interopRequireDefault(r),i=n(97),a=_interopRequireDefault(i);t.edit=o.default,t.filter=a.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f=n(10),p=_interopRequireDefault(f),d=(o=r=function(e){function FieldNumberEdit(){return _classCallCheck(this,FieldNumberEdit),_possibleConstructorReturn(this,(FieldNumberEdit.__proto__||Object.getPrototypeOf(FieldNumberEdit)).apply(this,arguments))}return _inherits(FieldNumberEdit,e),i(FieldNumberEdit,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.schema,r=e.value,o=n.publish||{};return(0,a.h)(c.default,{error:t,errorMessage:"string"==typeof t?t:null,label:n.label,comment:n.required&&"Required"},(0,a.h)(p.default,{onChange:this.handleOnChange.bind(this),readonly:!0===o.readonly,type:"number",value:r}))}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.onChange,r=t.schema;"function"==typeof n&&n.call(this,r._id,parseFloat(e.target.value))}}]),FieldNumberEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(10),c=_interopRequireDefault(l),f=(o=r=function(e){function FieldNumberFilter(e){_classCallCheck(this,FieldNumberFilter);var t=_possibleConstructorReturn(this,(FieldNumberFilter.__proto__||Object.getPrototypeOf(FieldNumberFilter)).call(this,e));return t.filterTypes={$eq:"Equals",$gt:"Greater than",$gte:"Greater than or equal to",$lt:"Less than",$lte:"Less than or equal to",$ne:"Is not"},t}return _inherits(FieldNumberFilter,e),i(FieldNumberFilter,[{key:"render",value:function(){var e=this,t=this.props,n=t.analyserStyles,r=t.containerStyles,o=t.type,i=t.value,u=t.valueStyles;return(0,a.h)("div",{class:r},(0,a.h)("select",{class:n,onChange:this.handleChange.bind(this,"type")},(0,a.h)("option",{disabled:!0,selected:!0,value:!0},"Select a type"),Object.keys(this.filterTypes).map(function(t){return(0,a.h)("option",{selected:o===t,key:t,value:t},e.filterTypes[t])})),(0,a.h)(c.default,{type:"number",className:u,value:i,onChange:this.handleChange.bind(this,"value"),onKeyUp:this.handleChange.bind(this,"value"),placeholder:"Numberic value"}))}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.index;r(_defineProperty({},e,isNaN(t.target.value)?0:Number(t.target.value)),o)}}]),FieldNumberFilter}(a.Component),r.propTypes={analyserStyles:s.default.string,containerStyles:s.default.string,index:s.default.number,onUpdate:s.default.func,type:s.default.string,value:s.default.string,valueStyles:s.default.string},o);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edit=void 0;var r=n(99),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.edit=o.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(160)),f=_interopRequireDefault(c),p=n(3),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),h=n(14),_=_interopRequireDefault(h),y=n(10),b=_interopRequireDefault(y),m=(o=r=function(e){function FieldPasswordEdit(e){_classCallCheck(this,FieldPasswordEdit);var t=_possibleConstructorReturn(this,(FieldPasswordEdit.__proto__||Object.getPrototypeOf(FieldPasswordEdit)).call(this,e));return t.state={currentPassword:"",newPassword:"",newPasswordConfirm:""},t}return _inherits(FieldPasswordEdit,e),i(FieldPasswordEdit,[{key:"componentDidMount",value:function(){var e=this.props,t=e.forceValidation,n=e.value;t&&this.validate(n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.forceValidation,o=n.value;!e.forceValidation&&r&&this.validate(o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.schema,o=this.state,i=o.currentPassword,u=(o.forceValidation,o.newPassword),s=o.newPasswordConfirm,l=(r.publish,n&&n.includes(d.ERROR_WRONG_PASSWORD)),c=n&&n.includes(d.ERROR_PASSWORD_MISMATCH),p=n&&n.includes(d.ERROR_MISSING_FIELDS);return(0,a.h)("div",null,(0,a.h)(_.default,{className:f.default.label,error:l||p&&0===i.length,errorMessage:l&&"This password is incorrect",label:"Current "+String(r.label.toLowerCase())},(0,a.h)(b.default,{onChange:this.handleOnChange.bind(this,"currentPassword"),onKeyUp:this.handleKeyUp.bind(this,"currentPassword"),placeholder:r.placeholder,type:"password",value:i})),(0,a.h)(_.default,{className:f.default.label,error:p&&0===u.length,label:"New "+String(r.label.toLowerCase())},(0,a.h)(b.default,{onChange:this.handleOnChange.bind(this,"newPassword"),onKeyUp:this.handleKeyUp.bind(this,"newPassword"),placeholder:r.placeholder,ref:function(t){return e.newPasswordRef=t},type:"password",value:u})),(0,a.h)(_.default,{className:f.default.label,error:c||p&&0===s.length,errorMessage:c&&"The passwords must match",label:"New "+String(r.label.toLowerCase())+" (confirm)"},(0,a.h)(b.default,{onChange:this.handleOnChange.bind(this,"newPasswordConfirm"),onKeyUp:this.handleKeyUp.bind(this,"newPasswordConfirm"),placeholder:r.placeholder,ref:function(t){return e.newPasswordConfirmRef=t},type:"password",value:s})))}},{key:"handleKeyUp",value:function(e,t){var n=this.props,r=n.error,o=n.onError,i=n.schema,a=this.state.newPassword,u=r&&r.includes(d.ERROR_WRONG_PASSWORD);this.setState(_defineProperty({},e,t.target.value)),this.validate(),u&&"currentPassword"===e&&o.call(this,i._id,!1,a)}},{key:"handleOnChange",value:function(e,t){var n=this.props,r=n.onChange,o=n.schema,i=this.state,a=i.currentPassword,u=(i.forceValidation,i.newPassword);i.newPasswordConfirm;if(this.validate(t.target.value),"function"==typeof r){var s=a.length&&u.length?JSON.stringify({current:a,new:u}):null;r.call(this,o._id,s,!1)}}},{key:"validate",value:function(){var e=this.props,t=e.error,n=e.onError,r=e.schema,o=this.state,i=o.currentPassword,a=o.forceValidation,u=o.newPassword,s=o.newPasswordConfirm,l=t&&t.includes(d.ERROR_WRONG_PASSWORD)?[d.ERROR_WRONG_PASSWORD]:[];(a||s.length>0)&&u!==s&&l.push(d.ERROR_PASSWORD_MISMATCH);var c=0;i.length&&c++,u.length&&c++,s.length&&c++,c>0&&c<3&&l.push(d.ERROR_MISSING_FIELDS);var f=l.length>0&&l;"function"==typeof n&&n.call(this,r._id,f,u)}}]),FieldPasswordEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},r.defaultProps={error:!1,forceValidation:!1,value:""},o);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edit=void 0;var r=n(101),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.edit=o.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(11),c=n(4),f=n(2),p=(_interopRequireDefault(f),n(161)),d=_interopRequireDefault(p),h=n(6),_=_interopRequireDefault(h),y=n(14),b=_interopRequireDefault(y),m=n(10),v=(_interopRequireDefault(m),o=r=function(e){function FieldReferenceEdit(){return _classCallCheck(this,FieldReferenceEdit),_possibleConstructorReturn(this,(FieldReferenceEdit.__proto__||Object.getPrototypeOf(FieldReferenceEdit)).apply(this,arguments))}return _inherits(FieldReferenceEdit,e),i(FieldReferenceEdit,[{key:"render",value:function(){var e=this.props,t=(e.collection,e.currentApi),n=(e.currentCollection,e.documentId,e.error,e.group,e.forceValidation,e.onBuildBaseUrl),r=(e.onChange,e.onError,e.value),o=e.schema,i=o.settings&&o.settings.collection;if(!i)return null;var u=t.collections.find(function(e){return e.slug===i});if(!u)return null;var s=o.label||o._id,f=r&&Object.keys((0,c.filterHiddenFields)(u.fields,"list"))[0],p=l.buildUrl.apply(void 0,_toConsumableArray(n()).concat(["select",o._id])),h=!r||r instanceof Array?r:[r];return(0,a.h)(b.default,{label:s},r?(0,a.h)("div",{class:d.default["value-container"]},(0,a.h)("div",null,h.map(function(e){return(0,a.h)("p",{class:d.default.value},f&&e[f])})),(0,a.h)(_.default,{accent:"destruct",onClick:this.handleRemove.bind(this),size:"small"},"Remove")):(0,a.h)("div",{class:d.default.placeholder},(0,a.h)(_.default,{accent:"data",href:p,size:"small"},"Select existing ",s.toLowerCase())))}},{key:"handleRemove",value:function(){var e=this.props,t=e.onChange,n=e.schema;"function"==typeof t&&t.call(this,n._id,null)}}]),FieldReferenceEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onBuildBaseUrl:s.default.func,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},o);t.default=v},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.list=t.filter=t.edit=void 0;var r=n(103),o=_interopRequireDefault(r),i=n(104),a=_interopRequireDefault(i),u=n(105),s=_interopRequireDefault(u);t.edit=o.default,t.filter=a.default,t.list=s.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(162),p=_interopRequireDefault(f),d=n(14),h=_interopRequireDefault(d),_=n(10),y=_interopRequireDefault(_),b=(o=r=function(e){function FieldStringEdit(e){return _classCallCheck(this,FieldStringEdit),_possibleConstructorReturn(this,(FieldStringEdit.__proto__||Object.getPrototypeOf(FieldStringEdit)).call(this,e))}return _inherits(FieldStringEdit,e),i(FieldStringEdit,[{key:"componentDidMount",value:function(){var e=this.props,t=e.forceValidation,n=e.value;t&&this.validate(n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.forceValidation,o=n.value;!e.forceValidation&&r&&this.validate(o)}},{key:"render",value:function(){return(this.props.schema.publish||{}).options?this.renderAsDropdown():this.renderAsFreeInput()}},{key:"renderAsFreeInput",value:function(){var e=this.props,t=e.error,n=e.value,r=e.schema,o=r.publish||{},i=o.multiline?"multiline":"text",u=!0===o.readonly;return(0,a.h)(h.default,{error:t,errorMessage:"string"==typeof t?t:null,label:r.label,comment:r.required&&"Required"},(0,a.h)(y.default,{onChange:this.handleOnChange.bind(this),onKeyUp:this.handleOnKeyUp.bind(this),placeholder:r.placeholder,readonly:u,type:i,value:n}))}},{key:"renderAsDropdown",value:function(){var e=this.props,t=e.error,n=e.value,r=e.schema,o=r.publish||{},i=o.options,u=n||r.default||null,s=!0===o.multiple,l=!0===o.readonly,f=new c.default(p.default,"dropdown").addIf("dropdown-error",t).addIf("dropdown-multiple",s);return(0,a.h)(h.default,{error:t,errorMessage:"string"==typeof t?t:null,label:r.label,comment:r.required&&"Required"},(0,a.h)("select",{class:f.getClasses(),onChange:this.handleOnChange.bind(this),multiple:s,disabled:l,ref:s&&this.selectDropdownOptions.bind(this),value:u},!s&&(0,a.h)("option",{class:p.default["dropdown-option"],disabled:!0,selected:null===u},"Please select"),i.map(function(e){return(0,a.h)("option",{class:p.default["dropdown-option"],value:e.value},e.label)})))}},{key:"getValueOfInput",value:function(e){switch(e.nodeName.toUpperCase()){case"SELECT":var t=Array.prototype.slice.call(e.options),n=t.filter(function(e){return e.selected}).map(function(e){return e.value});return e.attributes.multiple?n:n[0];default:return e.value}}},{key:"findValidationErrorsInValue",value:function(e){var t=this.props,n=(t.error,t.schema),r="string"==typeof e?e.length:0;if(0===r&&n.default)return!1;var o=n&&n.validation||{},i="string"==typeof n.message&&n.message.length?n.message:null,a=!1;return o&&Object.keys(o).forEach(function(t){switch(t){case"minLength":r<o.minLength&&(a=i||!0);break;case"maxLength":r>o.maxLength&&(a=i||!0);break;case"regex":new RegExp(o.regex.pattern,o.regex.flags).test(e)||(a=i||!0)}}),a}},{key:"handleOnChange",value:function(e){var t=this.props,n=t.onChange,r=t.schema,o=this.getValueOfInput(e.target);this.validate(o),"function"==typeof n&&n.call(this,r._id,o)}},{key:"handleOnKeyUp",value:function(e){var t=this.getValueOfInput(e.target);this.validate(t)}},{key:"selectDropdownOptions",value:function(e){var t=this.props.value;if(e&&e.options)for(var n=0;n<e.options.length;n++)t.includes(e.options[n].value)&&(e.options[n].selected=!0)}},{key:"validate",value:function(e){var t=this,n=this.props,r=n.onError,o=n.schema,i=!1;if(Array.isArray(e)){if(!(i=o.required&&0===e.length)){var a=e.filter(function(e){return t.findValidationErrorsInValue(e)});i=a[0]||!1}}else{var u="string"==typeof e?e.trim():"";i=o.required&&!o.default&&0===u.length,i=i||this.findValidationErrorsInValue(u)}"function"==typeof r&&r.call(this,o._id,i,e)}}]),FieldStringEdit}(a.Component),r.propTypes={collection:s.default.string,config:s.default.object,currentApi:s.default.object,currentCollection:s.default.object,documentId:s.default.string,error:s.default.string,forceValidation:s.default.bool,group:s.default.string,onChange:s.default.string,onError:s.default.string,schema:s.default.object,value:s.default.bool},r.defaultProps={error:!1,forceValidation:!1,value:""},o);t.default=b},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(10),c=_interopRequireDefault(l),f=(o=r=function(e){function FieldStringFilter(e){_classCallCheck(this,FieldStringFilter);var t=_possibleConstructorReturn(this,(FieldStringFilter.__proto__||Object.getPrototypeOf(FieldStringFilter)).call(this,e));return t.filterTypes={$eq:"Equals",$ne:"Is not",$regex:"Contains"},t}return _inherits(FieldStringFilter,e),i(FieldStringFilter,[{key:"render",value:function(){var e=this,t=this.props,n=t.analyserStyles,r=t.containerStyles,o=t.type,i=t.value,u=t.valueStyles;return(0,a.h)("div",{class:r},(0,a.h)("select",{class:n,onChange:this.handleChange.bind(this,"type")},(0,a.h)("option",{disabled:!0,selected:!0,value:!0},"Select a type"),Object.keys(this.filterTypes).map(function(t){return(0,a.h)("option",{selected:o===t,key:t,value:t},e.filterTypes[t])})),(0,a.h)(c.default,{className:u,onChange:this.handleChange.bind(this,"value"),onKeyUp:this.handleChange.bind(this,"value"),placeholder:"Search value",value:i}))}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.index;r(_defineProperty({},e,t.target.value),o)}}]),FieldStringFilter}(a.Component),r.propTypes={analyserStyles:s.default.string,containerStyles:s.default.string,index:s.default.number,onUpdate:s.default.func,type:s.default.string,value:s.default.string,valueStyles:s.default.string},o);t.default=f},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=(o=r=function(e){function FieldStringList(){return _classCallCheck(this,FieldStringList),_possibleConstructorReturn(this,(FieldStringList.__proto__||Object.getPrototypeOf(FieldStringList)).apply(this,arguments))}return _inherits(FieldStringList,e),i(FieldStringList,[{key:"render",value:function(){var e=this.props,t=e.schema,n=e.value;return n?Array.isArray(n)?this.renderOptions(n,t):t.publish&&t.publish.options?this.renderOptions([n],t):this.renderTrimmedValue(n):null}},{key:"renderOptions",value:function(e,t){var n=this,r=this.props,o=r.maxLength,i=r.maxOptions,a=t.publish&&t.publish.options,u=e;a&&(u=e.map(function(e){var t=a.find(function(t){return t.value===e});return t?n.renderTrimmedValue(t.label,o/i):n.renderTrimmedValue(e,o/i)}));var s=e.length-i;return s>0&&(u=u.slice(0,i)),u.join(", ")+(s>0?" + "+s:"")}},{key:"renderTrimmedValue",value:function(e,t){return t=Math.floor(t)||this.props.maxLength,e.length>t?e.slice(0,t-1)+"":e}}]),FieldStringList}(a.Component),r.propTypes={value:s.default.string,schema:s.default.object},r.defaultProps={maxLength:50,maxOptions:1},o);t.default=l},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(163),p=_interopRequireDefault(f),d=n(4),h=n(6),_=_interopRequireDefault(h),y=(o=r=function(e){function FileUpload(e){_classCallCheck(this,FileUpload);var t=_possibleConstructorReturn(this,(FileUpload.__proto__||Object.getPrototypeOf(FileUpload)).call(this,e));return t.state.dragOver=!1,t}return _inherits(FileUpload,e),i(FileUpload,[{key:"componentWillMount",value:function(){this.fileInputId=(0,d.getUniqueId)()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.allowDrop,r=e.multiple,o=this.state.dragOver,i=new c.default(p.default,"container").addIf("dropzone",n).addIf("dropzone-active",o);return(0,a.h)("div",{class:i.getClasses()},n&&(0,a.h)("div",{onDrop:this.handleDrop.bind(this),onDragEnter:this.handleDrag.bind(this),onDragLeave:this.handleDrag.bind(this),onDragOver:this.handleDrag.bind(this)},(0,a.h)("p",null,"Drop files to upload")),n&&(0,a.h)("span",{class:p.default.or},"or"),(0,a.h)("input",{accept:t,class:p.default["file-input"],id:this.fileInputId,multiple:r,type:"file",onChange:this.handleFileSelect.bind(this)}),(0,a.h)(_.default,{accent:"data",forId:this.fileInputId,size:"small"},"Select from device"))}},{key:"handleFileSelect",value:function(e){(0,this.props.onChange)(e.target.files),e.preventDefault()}},{key:"handleDrop",value:function(e){var t=this.props.onChange;this.setState({dragOver:!1}),t(e.dataTransfer.files),e.preventDefault()}},{key:"handleDrag",value:function(e){this.setState({dragOver:"dragleave"!==e.type}),e.preventDefault()}}]),FileUpload}(a.Component),r.propTypes={accept:s.default.string,allowDrop:s.default.bool,multiple:s.default.bool,onChange:s.default.func},r.defaultProps={allowDrop:!1,multiple:!1},o);t.default=y},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(166)),f=_interopRequireDefault(c),p=(o=r=function(e){function IconBurger(){return _classCallCheck(this,IconBurger),_possibleConstructorReturn(this,(IconBurger.__proto__||Object.getPrototypeOf(IconBurger)).apply(this,arguments))}return _inherits(IconBurger,e),i(IconBurger,[{key:"render",value:function(){return(0,a.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 16",class:f.default.icon,width:this.props.width,height:this.props.height},(0,a.h)("title",null,"Menu"),(0,a.h)("path",{d:"M1.178 1h17.69M1.178 8h17.69m-17.69 7h17.69","stroke-width":"2","fill-rule":"evenodd","stroke-linecap":"square"}))}}]),IconBurger}(a.Component),r.propTypes={height:s.default.number,width:s.default.number},r.defaultProps={width:10,height:10},o);t.default=p},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(167)),f=_interopRequireDefault(c),p=(o=r=function(e){function IconCross(){return _classCallCheck(this,IconCross),_possibleConstructorReturn(this,(IconCross.__proto__||Object.getPrototypeOf(IconCross)).apply(this,arguments))}return _inherits(IconCross,e),i(IconCross,[{key:"render",value:function(){return(0,a.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:f.default.icon,width:this.props.width,height:this.props.height},(0,a.h)("title",null,"Close"),(0,a.h)("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}))}}]),IconCross}(a.Component),r.propTypes={height:s.default.number,width:s.default.number},r.defaultProps={width:10,height:10},o);t.default=p},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(169)),f=_interopRequireDefault(c),p=n(84),d=_interopRequireDefault(p),h=(o=r=function(e){function ListController(){return _classCallCheck(this,ListController),_possibleConstructorReturn(this,(ListController.__proto__||Object.getPrototypeOf(ListController)).apply(this,arguments))}return _inherits(ListController,e),i(ListController,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.collection,r=e.search;return(0,a.h)("div",{class:f.default.container},(0,a.h)("div",null,r&&(0,a.h)(d.default,{className:f.default.search,collection:n})),(0,a.h)("div",null,t.map(function(e){return(0,a.h)("div",{class:f.default.control},e)})))}}]),ListController}(a.Component),r.propTypes={children:s.default.node,collection:s.default.object,search:s.default.bool},o);t.default=h},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(46),c=_interopRequireDefault(l),f=n(47),p=_interopRequireDefault(f),d=n(111),h=_interopRequireDefault(d),_=n(2),y=(_interopRequireDefault(_),n(172)),b=_interopRequireDefault(y),m=(o=r=function(e){function Nav(){return _classCallCheck(this,Nav),_possibleConstructorReturn(this,(Nav.__proto__||Object.getPrototypeOf(Nav)).apply(this,arguments))}return _inherits(Nav,e),i(Nav,[{key:"render",value:function(){var e=this.props,t=e.currentRoute,n=e.items,r=e.mobile;return(0,a.h)("nav",{class:b.default.nav},(0,a.h)("ul",null,n.map(function(e){var n=1===t.indexOf(e.id),o=null;if(e.subItems){var i=e.subItems.map(function(e){var o=1===t.indexOf(e.id);return r?(0,a.h)(h.default,{href:e.href,text:e.label,mobile:!0}):(o&&(n=!0),(0,a.h)(p.default,{active:o,href:e.href},e.label))});o=r?(0,a.h)("ul",{class:b.default.children},i):(0,a.h)(c.default,null,i)}return(0,a.h)(h.default,{active:n,href:e.href,text:e.label,mobile:r},o)})))}}]),Nav}(a.Component),r.propTypes={items:s.default.array,mobile:s.default.bool},r.defaultProps={items:[],mobile:!1},o);t.default=m},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(173),p=_interopRequireDefault(f),d=(o=r=function(e){function NavItem(e){_classCallCheck(this,NavItem);var t=_possibleConstructorReturn(this,(NavItem.__proto__||Object.getPrototypeOf(NavItem)).call(this,e));return t.state.expanded=!1,t}return _inherits(NavItem,e),i(NavItem,[{key:"render",value:function(){var e=new c.default(p.default,"container"),t=new c.default(p.default,"nav-item");return e.addIf("container-desktop",!this.props.mobile),e.addIf("container-expanded",this.state.expanded),t.addIf("nav-item-active",this.props.active),(0,a.h)("li",{class:e.getClasses(),onMouseEnter:this.toggleExpanded.bind(this,!0),onMouseLeave:this.toggleExpanded.bind(this,!1),onClick:this.toggleExpanded.bind(this,!1)},(0,a.h)("a",{class:t.getClasses(),href:this.props.href},this.props.text),this.props.children.length?(0,a.h)("div",{class:p.default.children},this.props.children):null)}},{key:"toggleExpanded",value:function(e,t){this.setState({expanded:e})}}]),NavItem}(a.Component),r.propTypes={active:s.default.bool,href:s.default.string,mobile:s.default.bool},r.defaultProps={active:!1,mobile:!1},r.defaultProps={mobile:!1},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(174),p=_interopRequireDefault(f),d=(o=r=function(e){function Notification(){return _classCallCheck(this,Notification),_possibleConstructorReturn(this,(Notification.__proto__||Object.getPrototypeOf(Notification)).apply(this,arguments))}return _inherits(Notification,e),i(Notification,[{key:"render",value:function(){var e=this,t=this.props,n=t.accent,r=t.message,o=(t.onHover,t.onOptionClick),i=t.options,u=t.visible,s=new c.default(p.default,"container").addIf("container-visible",u),l=new c.default(p.default,"notification").add("notification-"+String(n));return(0,a.h)("div",{class:s.getClasses()},(0,a.h)("div",{class:l.getClasses(),onMouseEnter:this.handleOnHover.bind(this)},(0,a.h)("span",null,r),i&&Object.keys(i).map(function(t){return"string"==typeof i[t]?(0,a.h)("a",{class:p.default.option,href:i[t],onClick:o.bind(e,i[t])},t):(0,a.h)("button",{class:p.default.option,onClick:o.bind(e,i[t])},t)})))}},{key:"handleOnHover",value:function(){var e=this.props,t=e.onHover,n=e.options;"function"!=typeof t||Object.keys(n).length||t()}}]),Notification}(a.Component),r.propTypes={accent:s.default.oneOf(["destruct","save","system"]),message:s.default.string,onHover:s.default.func,onOptionClick:s.default.func,options:s.default.object,visible:s.default.bool},r.defaultProps={accent:"system",visible:!0},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(11),c=n(2),f=_interopRequireDefault(c),p=n(176),d=_interopRequireDefault(p),h=n(6),_=_interopRequireDefault(h),y=(o=r=function(e){function Paginator(){return _classCallCheck(this,Paginator),_possibleConstructorReturn(this,(Paginator.__proto__||Object.getPrototypeOf(Paginator)).apply(this,arguments))}return _inherits(Paginator,e),i(Paginator,[{key:"renderPageNumber",value:function(e){var t=this.props,n=t.currentPage,r=t.linkCallback,o="function"==typeof r?r.call(this,e):null;new f.default(d.default,"page","page-active");return e===n?(0,a.h)(_.default,{accent:"data",className:d.default.page,type:"mock"},e):(0,a.h)(_.default,{href:(0,l.createRoute)({path:o,update:!0}),className:d.default.page},e)}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.linkCallback,r=e.maxPages,o=e.prevNext,i=e.totalPages,u=Math.floor((r-1)/2),s=Math.ceil((r-1)/2);if(t<=u){var c=u-t+1;u-=c,s+=c}if(t+s>i){var p=t+s-i,h=t-1;u+=Math.min(p,h),s-=p}for(var y=[],b=Math.max(1,t-u),m=t+s,v=b;v<=m;v++)y.push(this.renderPageNumber(v));var g="function"==typeof n&&n(t+1),O="function"==typeof n&&n(t-1),C=new f.default(d.default,"page","page-secondary");return y.length<2?null:(0,a.h)("div",null,y,o&&t>1&&(0,a.h)(_.default,{className:C.getClasses(),href:(0,l.createRoute)({path:O,update:!0})},"Prev"),o&&t<i&&(0,a.h)(_.default,{className:C.getClasses(),href:(0,l.createRoute)({path:g,update:!0})},"Next"))}}]),Paginator}(a.Component),r.propTypes={currentPage:s.default.number,linkCallback:s.default.func,maxPages:s.default.number,prevNext:s.default.bool,totalPages:s.default.number},r.defaultProps={maxPages:10,prevNext:!0},o);t.default=y},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(178),p=_interopRequireDefault(f),d=n(6),h=_interopRequireDefault(d),_=(o=r=function(e){function Prompt(){return _classCallCheck(this,Prompt),_possibleConstructorReturn(this,(Prompt.__proto__||Object.getPrototypeOf(Prompt)).apply(this,arguments))}return _inherits(Prompt,e),i(Prompt,[{key:"render",value:function(){var e=this.props,t=e.accent,n=e.action,r=e.children,o=e.className,i=e.onClick,u=e.position,s=new c.default(p.default,"container").add("container-"+String(t)).add("container-"+String(u)).addResolved(o);return(0,a.h)("div",{class:s.getClasses()},r,(0,a.h)("div",{class:p.default.action},(0,a.h)(h.default,{accent:"destruct",onClick:i,size:"small"},n)))}}]),Prompt}(a.Component),r.propTypes={accent:s.default.oneOf(["data","destruct","inherit","neutral","save","system"]),onClick:s.default.func,position:s.default.oneOf(["left","right"])},r.defaultProps={accent:"destruct",position:"left"},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(116),c=_interopRequireDefault(l),f=n(117),p=_interopRequireDefault(f),d=n(51),h=_interopRequireDefault(d),_=n(118),y=_interopRequireDefault(_),b=n(52),m=_interopRequireDefault(b),v=(o=r=function(e){function SyncTable(){return _classCallCheck(this,SyncTable),_possibleConstructorReturn(this,(SyncTable.__proto__||Object.getPrototypeOf(SyncTable)).apply(this,arguments))}return _inherits(SyncTable,e),i(SyncTable,[{key:"renderRows",value:function(){var e=this,t=this.props,n=t.columns,r=t.data,o=t.onSelect,i=t.onRender;return r.map(function(t){return(0,a.h)(y.default,{onSelect:o},n.map(function(n,r){var o=t[n.id];return"function"==typeof i&&(o=i.call(e,t[n.id],t,n,r)),(0,a.h)(m.default,null,o)}))})}},{key:"render",value:function(){var e=this.props,t=e.columns,n=e.onSelect,r=e.onSort,o=e.selectable,i=e.selectedRows,u=e.selectLimit,s=e.sortBy,l=e.sortOrder;return(0,a.h)(c.default,{onSelect:n,selectable:o,selectLimit:u,selectedRows:i},(0,a.h)(p.default,null,t.map(function(e){var t=e.label,n=null,o="asc";return"function"==typeof r&&(s===e.id&&("desc"===l?(n="down",o="asc"):(n="up",o="desc"),n="desc"===l?"down":"up"),t=r(t,e.id,o)),(0,a.h)(h.default,{arrow:n},t)})),this.renderRows())}}]),SyncTable}(a.Component),r.propTypes={columns:s.default.array,onRender:s.default.func,onSelect:s.default.func,onSort:s.default.func,selectable:s.default.bool,selectedRows:s.default.obj,selectLimit:s.default.number,sortBy:s.default.string,sortOrder:s.default.oneOf(["asc","desc"])},r.defaultProps={columns:[],data:[],onSort:null,selectedRows:{},selectLimit:1/0,selectable:!0,sortBy:null,sortOrder:null},o);t.default=v},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(24),c=n(2),f=(_interopRequireDefault(c),n(26)),p=_interopRequireDefault(f),d=(o=r=function(e){function Table(e){_classCallCheck(this,Table);var t=_possibleConstructorReturn(this,(Table.__proto__||Object.getPrototypeOf(Table)).call(this,e));return t.keyboard=new l.Keyboard,t}return _inherits(Table,e),i(Table,[{key:"componentDidMount",value:function(){var e=this;this.keyboard.on("cmd+a").do(function(t){return e.selectAll()})}},{key:"componentWillUnmount",value:function(){this.keyboard.off()}},{key:"selectAll",value:function(){for(var e=this.props,t=e.children,n=e.onSelect,r={},o=0;o<t.length-1;o++)r[o]=!0;"function"==typeof n&&n.call(this,r)}},{key:"handleHeadSelect",value:function(e){e.target.checked&&this.selectAll()}},{key:"handleRowSelect",value:function(e,t){var n=this.props,r=n.onSelect,o=n.selectLimit,i=n.selectedRows,a=t.target.checked,u=t.shiftKey,s=Object.keys(i),l={};if(1===o)l=_defineProperty({},e,!0);else if(l=Object.assign({},i,_defineProperty({},e,a)),u&&s.length){var c=1/0;s.sort().forEach(function(t){Math.abs(c-e)>Math.abs(t-e)&&(c=t)});for(var f=c>=e,p=f?e:c,d=f?c:e,h=p;h<=d;h++)l[h]=a}"function"==typeof r&&r.call(this,l)}},{key:"groupChildren",value:function(){var e=this,t=this.props,n=t.children,r=t.fillBlanks,o=t.selectable,i=t.selectLimit,a=t.selectedRows,u=Object.keys(a).filter(function(e){return a[e]}),s=[],l=[],c=this.props.children.find(function(e){return e.nodeName&&"TableHead"===e.nodeName.name});return n.forEach(function(t,f){var p=Object.assign({},t.attributes,{fillBlanks:r,selectable:o,selectLimit:i});if(t.nodeName&&"TableHead"===t.nodeName.name)p.allowBulkSelection=i>n.length-1,p.allSelected=u.length===n.length-1,p.onSelect=e.handleHeadSelect.bind(e),t.attributes=p,s.push(t);else{var d=c?f-1:f,h=!0===a[d],_=(c?n.length:n.length,u.length>=i);p.onSelect=e.handleRowSelect.bind(e),p.selected=h,p.tableIndex=d;var y="multi";1===i?y="single":_&&!h&&(y="multiDisabled"),p.selectableMode=y,t.attributes=p,l.push(t)}}),{head:s,body:l}}},{key:"render",value:function(){var e=this.groupChildren();return(0,a.h)("table",{class:p.default.table},e.head,(0,a.h)("tbody",null,e.body))}}]),Table}(a.Component),r.propTypes={children:s.default.node,fillBlanks:s.default.bool,onSelect:s.default.func,selectable:s.default.bool,selectLimit:s.default.number,selectedRows:s.default.obj},r.defaultProps={fillBlanks:!0,selectable:!0,selectLimit:1/0,selectedRows:{}},o);t.default=d},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=(_interopRequireDefault(l),n(26)),f=_interopRequireDefault(c),p=n(51),d=_interopRequireDefault(p),h=(o=r=function(e){function TableHead(){return _classCallCheck(this,TableHead),_possibleConstructorReturn(this,(TableHead.__proto__||Object.getPrototypeOf(TableHead)).apply(this,arguments))}return _inherits(TableHead,e),i(TableHead,[{key:"handleSelectClick",value:function(e){var t=this.props.onSelect;"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this.props,t=e.allowBulkSelection,n=e.allSelected,r=e.selectable;return(0,a.h)("thead",{class:f.default.head},(0,a.h)("tr",null,r&&(0,a.h)(d.default,{select:!0},(0,a.h)("input",{checked:n,class:f.default.select,type:"checkbox",onClick:this.handleSelectClick.bind(this),style:!t&&"display: none;"})),this.props.children))}}]),TableHead}(a.Component),r.propTypes={allowBulkSelection:s.default.bool,allSelected:s.default.bool,selectable:s.default.bool,children:s.default.node},r.defaultProps={allowBulkSelection:!0,allSelected:!1,selectable:!1},o);t.default=h},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(26),p=_interopRequireDefault(f),d=n(52),h=_interopRequireDefault(d),_=(o=r=function(e){function TableRow(){return _classCallCheck(this,TableRow),_possibleConstructorReturn(this,(TableRow.__proto__||Object.getPrototypeOf(TableRow)).apply(this,arguments))}return _inherits(TableRow,e),i(TableRow,[{key:"handleSelectClick",value:function(e){var t=this.props,n=t.onSelect,r=t.tableIndex;"function"==typeof n&&n.call(this,r,e)}},{key:"renderChildren",value:function(){var e=this;return this.props.children.map(function(t){return t&&(t.attributes=t.attributes||{},t.attributes.fillBlanks=t.attributes.fillBlanks||e.props.fillBlanks),t})}},{key:"render",value:function(){var e=this.props,t=e.selectable,n=e.selectableMode,r=e.selected,o=new c.default(p.default,"row");return o.addIf("row-selected",r),(0,a.h)("tr",{class:o.getClasses()},t&&(0,a.h)(h.default,{select:!0},(0,a.h)("input",{checked:r,class:p.default.select,disabled:"multiDisabled"===n,type:"single"===n?"radio":"checkbox",onClick:this.handleSelectClick.bind(this)})),this.renderChildren())}}]),TableRow}(a.Component),r.propTypes={fillBlanks:s.default.bool,onSelect:s.default.func,selectable:s.default.bool,selectableMode:s.default.oneOf(["multi","multiDisabled","single"]),selected:s.default.bool,children:s.default.node},r.defaultProps={fillBlanks:!1,onSelect:null,selectable:!0,selectableMode:"multi",selected:!1},o);t.default=_},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(2),c=_interopRequireDefault(l),f=n(61),p=_interopRequireDefault(f),d=n(10),h=_interopRequireDefault(d),_=(o=r=function(e){function ToolbarTextInput(){return _classCallCheck(this,ToolbarTextInput),_possibleConstructorReturn(this,(ToolbarTextInput.__proto__||Object.getPrototypeOf(ToolbarTextInput)).apply(this,arguments))}return _inherits(ToolbarTextInput,e),i(ToolbarTextInput,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.placeholder,o=new c.default(p.default,"input");return o.addResolved(t),(0,a.h)(h.default,{className:o.getClasses(),onChange:n,placeholder:r})}}]),ToolbarTextInput}(a.Component),r.propTypes={className:s.default.string,onChange:s.default.func,placeholder:s.default.string},o);t.default=_},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(0),a=(n(9),n(8),n(5)),u=n(32),s=_interopRequireWildcard(u),l=n(12),c=_interopRequireWildcard(l),f=n(110),p=function(e){return e&&e.__esModule?e:{default:e}}(f),d=n(11),h=n(4),_=n(25),y=function(e){function CollectionNav(){return _classCallCheck(this,CollectionNav),_possibleConstructorReturn(this,(CollectionNav.__proto__||Object.getPrototypeOf(CollectionNav)).apply(this,arguments))}return _inherits(CollectionNav,e),o(CollectionNav,[{key:"buildCollectionMap",value:function(e){var t={},n={};return e.forEach(function(e){var r={},o={},i=e.collections.filter(function(e){var t=e.settings&&"media"===e.settings.type;return!e._isAuthCollection&&!t});i.forEach(function(t){(e.menu||[]).forEach(function(e){e===t.slug?r[t.slug]=null:e.collections&&e.collections.includes(t.slug)&&(r[t.slug]=e.title)})}),i.forEach(function(e){r[e.slug]=r[e.slug]||null;var t=e.settings&&e.settings.displayName||e.name;o[e.slug]=t}),Object.keys(r).forEach(function(e){var i=r[e];i?(t[i]=t[i]||{},t[i][e]=t[i][e]||[],t[i][e].push(o[e])):(n[e]=n[e]||[],n[e].push(o[e]))})}),{groups:t,ungrouped:n}}},{key:"buildGroups",value:function(e){var t=Object.keys(e.groups).map(function(t){var n=e.groups[t],r=_.Format.slugify(t),o=[];return Object.keys(n).forEach(function(e){n[e].forEach(function(t,n){var i=e+(n>0?"-"+(n+1):"");o.push({id:String(r)+"/"+i,label:t,href:(0,d.buildUrl)(r,i,"documents")})})}),{id:r,label:t,subItems:o,href:o[0].href}}),n=[];return Object.keys(e.ungrouped).forEach(function(t){e.ungrouped[t];e.ungrouped[t].forEach(function(e,r){var o=t+(r>0?"-"+(r+1):"");n.push({id:o,label:e,href:(0,d.buildUrl)(null,o,"documents")})})}),t.concat(n)}},{key:"componentWillUpdate",value:function(){var e=this.props,t=e.state,n=(e.actions,t.api.apis);if(n&&n.length){var r=this.buildCollectionMap(n);this.groups=this.buildGroups(r)}}},{key:"render",value:function(){var e=this.props,t=e.state;e.actions;return this.groups?(0,i.h)(p.default,{currentRoute:t.router.locationBeforeTransitions.pathname,items:this.groups,mobile:null===t.app.breakpoint}):null}}]),CollectionNav}(i.Component);t.default=(0,h.connectHelper)(function(e){return{api:e.api,app:e.app,router:e.router}},function(e){return(0,a.bindActionCreators)(r({},s,c),e)})(y)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=(n(8),n(5)),c=n(3),f=(_interopRequireWildcard(c),n(23)),p=_interopRequireWildcard(f),d=n(11),h=n(4),_=n(19),y=n(6),b=_interopRequireDefault(y),m=n(83),v=_interopRequireDefault(m),g=n(109),O=_interopRequireDefault(g),C=(o=r=function(e){function DocumentListController(){return _classCallCheck(this,DocumentListController),_possibleConstructorReturn(this,(DocumentListController.__proto__||Object.getPrototypeOf(DocumentListController)).apply(this,arguments))}return _inherits(DocumentListController,e),i(DocumentListController,[{key:"render",value:function(){var e=this.props,t=e.collection,n=(e.filter,e.group),r=e.newFilter,o=(e.onAddNewFilter,e.referencedField),i=e.state,u=(0,_.getCollectionForUrlParams)(i.api.apis,{collection:t,group:n,referencedField:o}),s=(i.documents.list&&i.documents.list.results&&i.documents.list.results.length,i.router.params),l=s&&s.filter?s.filter:null;return u?(0,a.h)("div",null,(0,a.h)(O.default,{collection:u},(0,a.h)(b.default,{accent:"data",onClick:this.handleAddNewFilter.bind(this)},"Add Filter"),(0,a.h)(b.default,{accent:"save",href:(0,d.buildUrl)(n,t,"document","new")},"Create new")),(0,a.h)(v.default,{config:i.app.config,filters:l,newFilter:r,collection:u,updateUrlParams:this.updateUrlParams.bind(this)})):null}},{key:"handleAddNewFilter",value:function(){(0,this.props.onAddNewFilter)(!0)}},{key:"handleGoToPage",value:function(e){var t=this.props,n=t.collection,r=t.group,o=t.metadata,i=e.target.value,a=parseInt(i);a.toString()!==i||a<=0||a>o.totalPages||route((0,d.buildUrl)(r,n,"documents",a))}},{key:"updateUrlParams",value:function(e){var t=this.props,n=(t.actions,t.onAddNewFilter);t.state;(0,d.router)({params:{filter:e},update:!0}),n(!1)}}]),DocumentListController}(a.Component),r.propTypes={filter:s.default.string,newFilter:s.default.bool,group:s.default.string,parentDocumentId:s.default.string,referencedField:s.default.string,state:s.default.object,onAddNewFilter:s.default.func},o);t.default=(0,h.connectHelper)(function(e){return{api:e.api,app:e.app,documents:e.documents,router:e.router}},function(e){return(0,l.bindActionCreators)(p,e)})(C)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=(n(8),n(3)),s=_interopRequireWildcard(u),l=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(5),p=n(4),d=n(12),h=_interopRequireWildcard(d),_=(o=r=function(e){function LazyLoader(e){_classCallCheck(this,LazyLoader);var t=_possibleConstructorReturn(this,(LazyLoader.__proto__||Object.getPrototypeOf(LazyLoader)).call(this,e));return t.state={status:s.STATUS_IDLE},t}return _inherits(LazyLoader,e),i(LazyLoader,[{key:"render",value:function(){var e=this.props,t=e.styles,n=e.src,r=this.state.status,o=this.evalLoadingConditions(),i=Object.is(r,s.STATUS_LOADED);Object.is(r,s.STATUS_FAILED);return o?(0,a.h)("img",{src:n,style:!i&&"display: none",class:t,onLoad:this.handleImageLoaded.bind(this),onError:this.handleImageError.bind(this)}):null}},{key:"handleImageLoaded",value:function(){this.setState({status:s.STATUS_LOADED})}},{key:"handleImageError",value:function(){this.setState({status:s.STATUS_FAILED})}},{key:"evalLoadingConditions",value:function(){var e=this.props,t=e.idleOnly,n=e.state;return!t||"STATUS_IDLE"===n.status}}]),LazyLoader}(a.Component),r.propTypes={styles:c.default.string,idleOnly:c.default.bool},r.defaultProps={styles:"",idleOnly:!0},o);t.default=(0,p.connectHelper)(function(e){return e.app},function(e){return(0,f.bindActionCreators)(h,e)})(_)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(5),c=n(12),f=_interopRequireWildcard(c),p=n(4),d=n(3),h=_interopRequireWildcard(d),_=n(2),y=(_interopRequireDefault(_),n(185)),b=_interopRequireDefault(y),m=(o=r=function(e){function LoadingBar(e){_classCallCheck(this,LoadingBar);var t=_possibleConstructorReturn(this,(LoadingBar.__proto__||Object.getPrototypeOf(LoadingBar)).call(this,e));return t.state.percentage=0,t.state.visible=!1,t.intervalBump=null,t.intervalVisible=null,t}return _inherits(LoadingBar,e),i(LoadingBar,[{key:"start",value:function(){this.setState({percentage:0,visible:!0}),clearInterval(this.intervalBump),this.intervalBump=setInterval(this.bump.bind(this),250)}},{key:"bump",value:function(){var e=this.state.percentage,t=0;if(e>=0&&e<.2&&(t=.1),e>=.2&&e<.5&&(t=.04),e>=.5&&e<.8&&(t=.02),e>=.8&&e<.99&&(t=.005),e>=.994)return clearInterval(this.intervalBump);this.setState({percentage:e+t})}},{key:"done",value:function(){var e=this;this.setState({percentage:1}),clearInterval(this.intervalVisible),clearInterval(this.intervalBump),this.intervalVisible=setTimeout(function(){e.setState({visible:!1})},200)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=(n.percentage,n.visible),o=this.props.state,i=Object.is(o.app.status,h.STATUS_LOADING),a=Object.is(e.state.app.status,h.STATUS_LOADING);t.visible&&!r&&this.setState({percentage:0}),!a&&i&&this.start(),a&&!i&&this.done()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalBump),clearInterval(this.intervalVisible)}},{key:"render",value:function(){var e=this.state,t=e.percentage,n=e.visible;return(0,a.h)("div",{class:b.default.bar,style:"transform: translate3d(-"+(100-100*t)+"%, 0, 0); opacity: "+(n?1:0)},(0,a.h)("div",{class:b.default.tip}))}}]),LoadingBar}(a.Component),r.propTypes={actions:s.default.object,state:s.default.object},o);t.default=(0,p.connectHelper)(function(e){return{app:e.app}},function(e){return(0,l.bindActionCreators)(f,e)})(m)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(5),c=n(12),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(4),d=n(112),h=_interopRequireDefault(d),_=(o=r=function(e){function NotificationCentre(e){_classCallCheck(this,NotificationCentre);var t=_possibleConstructorReturn(this,(NotificationCentre.__proto__||Object.getPrototypeOf(NotificationCentre)).call(this,e));return t.enqueuedNotification=null,t.state.visible=!1,t.timeout=null,t}return _inherits(NotificationCentre,e),i(NotificationCentre,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.state.app.notification,n=e.state.app.notification;t&&n&&t.timestamp!==n.timestamp&&(this.enqueuedNotification=t,this.dismiss())}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.state.app.notification,r=e.state.app.notification;return this.state.visible!==t.visible||(!n||!r||n.timestamp!==r.timestamp)&&void 0}},{key:"componentWillUpdate",value:function(e,t){var n=this.props.state,r=n.app.notification;if(r){var o=(e.state.app.notification,n.router.locationBeforeTransitions.pathname),i=e.state.router.locationBeforeTransitions.pathname;r.dismissAfterRouteChange&&o!==i&&this.dismiss()}}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=e.state.app.notification,o=this.props.state.app.notification;!r&&o&&this.start(),r&&o&&r.timestamp!==o.timestamp&&setTimeout(function(){n.enqueuedNotification=null,n.start()},300)}},{key:"render",value:function(){var e=this.props.state,t=this.state.visible,n=this.enqueuedNotification||e.app.notification;if(!n)return null;var r=(n.dismissAfterRouteChange,n.dismissAfterSeconds,n.message),o=n.options;n.timestamp,n.type;return(0,a.h)(h.default,{message:r,onHover:this.handleOnHover.bind(this),onOptionClick:this.handleOptionClick.bind(this),options:o,visible:t})}},{key:"start",value:function(){var e=this,t=this.props.state.app.notification,n=t.dismissAfterSeconds;clearTimeout(this.timeout),n&&setTimeout(this.dismiss.bind(this),1e3*n),setTimeout(function(){e.setState({visible:!0})},10)}},{key:"dismiss",value:function(){clearTimeout(this.timeout),this.setState({visible:!1})}},{key:"handleOnHover",value:function(){this.props.state.app.notification.dismissOnHover&&this.dismiss()}},{key:"handleOptionClick",value:function(e){"function"==typeof e&&e(),this.dismiss()}}]),NotificationCentre}(a.Component),r.propTypes={actions:s.default.object,state:s.default.object},o);t.default=(0,p.connectHelper)(function(e){return{app:e.app,router:e.router}},function(e){return(0,l.bindActionCreators)(f,e)})(_)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=n(0),u=n(1),s=_interopRequireDefault(u),l=n(3),c=_interopRequireWildcard(l),f=n(4),p=n(5),d=n(16),h=_interopRequireWildcard(d),_=n(37),y=_interopRequireDefault(_),b=n(54),m=_interopRequireDefault(b),v=n(55),g=_interopRequireDefault(v),O=n(18),C=_interopRequireDefault(O),w=n(17),S=_interopRequireDefault(w),T=n(20),E=_interopRequireDefault(T),P=n(126),R=_interopRequireDefault(P),k=n(56),D=_interopRequireDefault(k),j=n(50),A=(_interopRequireDefault(j),o=r=function(e){function ProfileEdit(){return _classCallCheck(this,ProfileEdit),_possibleConstructorReturn(this,(ProfileEdit.__proto__||Object.getPrototypeOf(ProfileEdit)).apply(this,arguments))}return _inherits(ProfileEdit,e),i(ProfileEdit,[{key:"render",value:function(){var e=this.props,t=e.onBuildBaseUrl,n=e.referencedField,r=e.section,o=e.state,i=o.user.remote;return i?n?(0,a.h)(E.default,null,(0,a.h)(D.default,{collection:c.AUTH_COLLECTION,onBuildBaseUrl:t,parentDocumentId:i._id,referencedField:n}),(0,a.h)(S.default,null,(0,a.h)(m.default,{collection:c.AUTH_COLLECTION,documentId:i._id,onBuildBaseUrl:t,referencedField:n,section:r,selectLimit:1}),(0,a.h)(g.default,{collection:c.AUTH_COLLECTION,onBuildBaseUrl:t,referencedField:n}))):(0,a.h)(E.default,null,(0,a.h)(C.default,null),(0,a.h)(S.default,null,(0,a.h)(y.default,{collection:c.AUTH_COLLECTION,documentId:i._id,onBuildBaseUrl:t,section:r}),(0,a.h)(R.default,null))):null}}]),ProfileEdit}(a.Component),r.propTypes={onBuildBaseUrl:s.default.func,referencedField:s.default.string,section:s.default.string,sections:s.default.array},o);t.default=(0,f.connectHelper)(function(e){return{api:e.api,app:e.app,user:e.user}},function(e){return(0,p.bindActionCreators)(h,e)})(A)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(0),s=n(1),l=_interopRequireDefault(s),c=n(2),f=(_interopRequireDefault(c),n(186)),p=_interopRequireDefault(f),d=n(3),h=_interopRequireWildcard(d),_=n(24),y=n(12),b=_interopRequireWildcard(y),m=n(15),v=_interopRequireWildcard(m),g=n(16),O=_interopRequireWildcard(g),C=(n(5),n(11),n(4)),w=n(19),S=(n(9),n(6)),T=_interopRequireDefault(S),E=n(42),P=(_interopRequireDefault(E),n(33)),R=(_interopRequireDefault(P),n(44)),k=(_interopRequireDefault(R),n(49)),D=(_interopRequireDefault(k),n(36)),j=_interopRequireDefault(D),A=a({},b,v,O),I=(o=r=function(e){function ProfileEditToolbar(e){_classCallCheck(this,ProfileEditToolbar);var t=_possibleConstructorReturn(this,(ProfileEditToolbar.__proto__||Object.getPrototypeOf(ProfileEditToolbar)).call(this,e));return t.keyboard=new _.Keyboard,t}return _inherits(ProfileEditToolbar,e),i(ProfileEditToolbar,[{key:"componentDidMount",value:function(){this.keyboard.on("cmd+s").do(this.handleSave.bind(this,"save"))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.dispatch,o=n.state,i=o.document,a=(o.user,e.state.document),u=(e.state.user,i.remoteStatus),s=!a.validationErrors&&i.validationErrors;a.remoteStatus===h.STATUS_SAVING&&u===h.STATUS_IDLE&&r(A.setNotification({message:"Your profile has been updated"})),(a.saveAttempts<i.saveAttempts||s&&i.saveAttempts>0)&&this.saveUser()}},{key:"render",value:function(){var e=this.props.state,t=e.document.remote,n=(e.app.networkStatus!==h.NETWORK_OK&&Object.keys(t.validationErrors).filter(function(e){return t.validationErrors[e]}).length,e.document.validationErrors),r=n&&Object.keys(n).filter(function(e){return n[e]}).length;return(0,u.h)(j.default,null,(0,u.h)("div",{class:p.default.container},(0,u.h)(T.default,{accent:"save",disabled:r,onClick:this.handleSave.bind(this)},"Save settings")))}},{key:"componentWillUnmount",value:function(){this.keyboard.off()}},{key:"handleSave",value:function(){(0,this.props.dispatch)(A.registerSaveAttempt())}},{key:"saveUser",value:function(){var e=this.props,t=e.dispatch,n=e.state,r=n.document.validationErrors;if(r&&!Object.keys(r).filter(function(e){return r[e]}).length){var o=(0,w.getApiForUrlParams)(n.api.apis,{collection:h.AUTH_COLLECTION}),i=(0,w.getCollectionForUrlParams)(n.api.apis,{collection:h.AUTH_COLLECTION,useApi:o});t(A.saveUser({api:o,collection:i,user:n.document.local}))}}}]),ProfileEditToolbar}(u.Component),r.propTypes={collection:l.default.string,dispatch:l.default.func,documentId:l.default.string,group:l.default.string,referencedField:l.default.string,section:l.default.string,state:l.default.object},o);t.default=(0,C.connectHelper)(function(e){return{api:e.api,app:e.app,document:e.document,user:e.user}})(I)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),u=n(0),s=n(1),l=_interopRequireDefault(s),c=n(5),f=(n(8),n(4)),p=(n(9),n(11)),d=n(58),h=_interopRequireDefault(d),_=n(16),y=_interopRequireWildcard(_),b=n(3),m=_interopRequireWildcard(b),v=n(41),g=_interopRequireDefault(v),O=n(6),C=_interopRequireDefault(O),w=n(14),S=_interopRequireDefault(w),T=n(10),E=_interopRequireDefault(T),P=n(188),R=_interopRequireDefault(P),k=(o=r=function(e){function SignIn(e){_classCallCheck(this,SignIn);var t=_possibleConstructorReturn(this,(SignIn.__proto__||Object.getPrototypeOf(SignIn)).call(this,e));return t.validation=new h.default,t.state.isPasswordReset="string"==typeof e.token&&e.token.length,t.state.email="",t.state.password="",t.state.passwordConfirm="",t.state.formDataIsValid=!1,t.state.error=!1,t}return _inherits(SignIn,e),a(SignIn,[{key:"componentWillUpdate",value:function(e,t){var n=this.props,r=(n.actions,n.state),o=r.user,i=r.isPasswordReset,a=e.state.user,u=a.resetSuccess;(0,p.redirectIf)(o.remote,"/"),(0,p.redirectIf)(!o.resetSuccess&&u&&i,"/sign-in"),!o.resetSuccess&&u&&this.setState({isPasswordReset:!1});var s=a.status===m.STATUS_FAILED&&a.failedSignInAttempts>0;a.status===m.STATUS_NOT_FOUND?this.setState({error:"Authentication API unreachable"}):s?this.setState({error:(i?"Passwords don't match or invalid token":"Email not found or password incorrect")+"."}):this.setState({error:!1})}},{key:"render",value:function(){var e=this.props,t=e.state,n=(e.actions,e.setPagetTitle),r=t.app.networkStatus!==m.NETWORK_OK,o=this.state,i=o.formDataIsValid,a=o.error,s=o.isPasswordReset,l=s?"Reset password":"Sign In";return n("Sign In"),(0,u.h)("div",{class:R.default.wrapper},(0,u.h)("div",{class:R.default.overlay},(0,u.h)("div",{class:R.default.container},(0,u.h)("form",{action:"/profile",method:"POST",onSubmit:this.handleSignIn.bind(this)},(0,u.h)("img",{class:R.default.logo,src:"/images/publish.png"}),a&&(0,u.h)(g.default,null,a),(0,u.h)("div",{class:R.default.inputs},!s&&(0,u.h)("div",{class:R.default.input},(0,u.h)(S.default,{label:"Email"},(0,u.h)(E.default,{onChange:this.handleInputChange.bind(this,"email"),onKeyUp:this.handleInputChange.bind(this,"email"),placeholder:"Your email address",validation:this.validation.email,value:this.state.email}))),(0,u.h)("div",{class:R.default.input},(0,u.h)(S.default,{label:s?"New Password":"Password"},(0,u.h)(E.default,{onChange:this.handleInputChange.bind(this,"password"),placeholder:s?"Your new Password":"Your Password",type:"password",value:this.state.password}))),s&&(0,u.h)("div",{class:R.default.input},(0,u.h)(S.default,{label:"Confirm new Password"},(0,u.h)(E.default,{onChange:this.handleInputChange.bind(this,"passwordConfirm"),placeholder:"Confirm new Password",type:"password",value:this.state.passwordConfirm})))),(0,u.h)(C.default,{accent:"system",disabled:r||!i&&!s,type:"submit"},l),!s&&(0,u.h)("a",{class:R.default.link,href:"/reset"},"Reset password")))))}},{key:"handleInputChange",value:function(e,t){var n;this.setState((n={},_defineProperty(n,e,t.target.value),_defineProperty(n,"formDataIsValid",t.isValid),n))}},{key:"handleSignIn",value:function(e){var t=this.props,n=t.actions,r=t.token,o=this.state,i=o.email,a=o.password,u=o.isPasswordReset,s=o.passwordConfirm;u?a===s?n.passwordReset(r,a):this.setState({error:m.PASSWORD_MISMATCH}):n.signIn(i,a),e.preventDefault()}}]),SignIn}(u.Component),r.propTypes={setPagetTitle:l.default.func,token:l.default.string},o);t.default=(0,f.connectHelper)(function(e){return{user:e.user,app:e.app}},function(e){return(0,c.bindActionCreators)(i({},y),e)})(k)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=n(0),o=n(8),i=n(5),a=n(76),u=_interopRequireDefault(a),s=n(39),l=n(75),c=_interopRequireDefault(l),f=n(40),p=(_interopRequireDefault(f),n(73)),d=_interopRequireDefault(p),h=n(74),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),y=n(72),b=_interopRequireDefault(y),m=(0,c.default)(),v=(0,i.combineReducers)(_),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose,O=g((0,i.applyMiddleware)(u.default))(i.createStore)((0,s.enableBatching)(v)),C=(0,d.default)(m,O);(0,r.render)((0,r.h)(o.Provider,{store:O},(0,r.h)(b.default,{history:C})),document.body)},function(e,t,n){"use strict";function clear(e){if(!window.localStorage)return null;try{return window.localStorage.removeItem(e),"development"==={NODE_ENV:"production"}.NODE_ENV&&console.log("Removing from local storage key "+String(e)),!0}catch(e){return!1}}function read(e){if(!window.localStorage)return null;try{var t=window.localStorage.getItem(e),n=JSON.parse(t);return"development"==={NODE_ENV:"production"}.NODE_ENV&&console.log("Reading from local storage with key "+String(e)+":",n),n}catch(e){return null}}function write(e,t){if(!window.localStorage)return!1;try{var n=JSON.stringify(t);return"development"==={NODE_ENV:"production"}.NODE_ENV&&console.log("Writing to local storage with key "+String(e)+":",t),window.localStorage.setItem(e,n),!0}catch(e){return!1}}function clearDocument(e){return clear(e)}function readDocument(e){return read(e)}function writeDocument(e,t){return write(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.clearDocument=clearDocument,t.readDocument=readDocument,t.writeDocument=writeDocument},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isOnline(){return void 0!==window.navigator.onLine||window.navigator.onLine}function isServerOnline(){return fetch("/",{credentials:"same-origin",method:"HEAD"}).then(function(e){return 200===e.status}).catch(function(e){return!1})}function ConnectionMonitor(e){return new a(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();t.isOnline=isOnline,t.isServerOnline=isServerOnline,t.default=ConnectionMonitor,n(22);var o=n(3),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a=function(){function ConnectionStatus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return _classCallCheck(this,ConnectionStatus),this.watch(e),this}return r(ConnectionStatus,[{key:"watch",value:function(e){var t=this;this.monitor=setInterval(function(){isOnline()?isServerOnline().then(function(e){t.status=e?i.NETWORK_OK:i.NETWORK_SERVER_UNRESPONSIVE}):t.status=i.NETWORK_NO_INTERNET_CONNECTION},e)}},{key:"registerStatusChangeCallback",value:function(e){this.callback=e}},{key:"status",get:function(){return this.statusCode},set:function(e){this.statusCode&&e!==this.statusCode&&"function"==typeof this.callback&&this.callback(e),this.statusCode=e}}]),ConnectionStatus}()},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function api(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.SET_API_LIST:return r({},e,{apis:t.apis,status:i.STATUS_IDLE});case u.SET_API_STATUS:return r({},e,{status:t.status});case u.SIGN_OUT:return s;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=api;var o=n(3),i=_interopRequireWildcard(o),a=n(7),u=_interopRequireWildcard(a),s={apis:[],status:i.STATUS_IDLE}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function getActiveBreakpoint(e){var t=null;for(var n in s){if(e<s[n])break;t=n}return t}function app(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.REGISTER_NETWORK_CALL:switch(t.status){case i.STATUS_LOADING:if(null!==f&&clearTimeout(f),e.status!==i.STATUS_LOADING)return r({},e,{status:i.STATUS_LOADING});break;case i.STATUS_IDLE:return e.status===i.STATUS_LOADING&&(null!==f&&clearTimeout(f),f=setTimeout(t.onComplete,l)),e;case i.STATUS_COMPLETE:return r({},e,{status:i.STATUS_IDLE})}return e;case u.SET_APP_CONFIG:return r({},e,{config:t.config});case u.SET_APP_STATUS:return r({},e,{status:t.status});case u.SET_NETWORK_STATUS:return r({},e,{networkStatus:t.networkStatus});case u.SET_NOTIFICATION:return e.notification&&e.notification.timestamp===t.notification.timestamp?e:r({},e,{notification:t.notification});case u.SET_SCREEN_WIDTH:var n=getActiveBreakpoint(t.width);return n===e.breakpoint?e:r({},e,{breakpoint:n});case u.SIGN_OUT:return c;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=app;var o=n(3),i=_interopRequireWildcard(o),a=n(7),u=_interopRequireWildcard(a),s={large:1e3,medium:600},l=200,c={breakpoint:getActiveBreakpoint(window.innerWidth),config:null,networkStatus:i.NETWORK_OK,notification:null,status:i.STATUS_IDLE},f=null},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function document(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.ATTEMPT_SAVE_DOCUMENT:return r({},e,{saveAttempts:e.saveAttempts+1});case u.CLEAR_REMOTE_DOCUMENT:return s;case u.DISCARD_UNSAVED_CHANGES:return r({},e,{loadedFromLocalStorage:!1,local:{},validationErrors:null});case u.DELETE_DOCUMENTS:return e.remote&&t.ids.includes(e.remote._id)?s:e;case u.SAVE_DOCUMENT:return r({},e,{remoteStatus:i.STATUS_IDLE});case u.SET_DOCUMENT_PEERS:return r({},e,{peers:t.peers});case u.SET_ERRORS_FROM_REMOTE_API:var n={};return t.errors.forEach(function(e){n[e.field]=e.message||!0}),r({},e,{validationErrors:r({},e.validationErrors,n)});case u.SET_FIELD_ERROR_STATUS:var o=t.error||null,a=t.field,l=e.validationErrors;return l&&l[a]==o?e:r({},e,{local:r({},e.local,_defineProperty({},a,t.value)),validationErrors:r({},e.validationErrors,_defineProperty({},a,o))});case u.SET_REMOTE_DOCUMENT:var c=t.document;if(!t.forceUpdate&&e.remote&&e.remote._id===c._id)return e;var f=t.clearLocal?{}:e.local||t.fromLocalStorage||{};return r({},e,{fieldsNotPersistedInLocalStorage:t.fieldsNotPersistedInLocalStorage||[],loadedFromLocalStorage:Boolean(t.fromLocalStorage),local:f,remote:t.remote,remoteStatus:i.STATUS_IDLE,saveAttempts:0});case u.SET_REMOTE_DOCUMENT_STATUS:return r({},e,{remoteStatus:t.status});case u.SIGN_OUT:return s;case u.START_NEW_DOCUMENT:var p=Object.keys(t.document).length>0;return r({},e,{fieldsNotPersistedInLocalStorage:[],loadedFromLocalStorage:p,local:t.document,remote:null,remoteStatus:i.STATUS_IDLE});case u.UPDATE_LOCAL_DOCUMENT:var d=e.fieldsNotPersistedInLocalStorage;t.persistInLocalStorage||Object.keys(t.change).forEach(function(e){d.includes(e)||d.push(e)});return r({},e,{fieldsNotPersistedInLocalStorage:d,local:r({},e.local,t.change)});case u.USER_LEAVING_DOCUMENT:default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=document;var o=n(3),i=_interopRequireWildcard(o),a=n(7),u=_interopRequireWildcard(a),s={fieldsNotPersistedInLocalStorage:[],loadedFromLocalStorage:!1,local:null,peers:null,remote:null,remoteStatus:i.STATUS_IDLE,saveAttempts:0,validationErrors:null}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function document(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.DELETE_DOCUMENTS:return s;case u.SET_DOCUMENT_LIST:return r({},e,{list:t.documents,query:t.query,status:i.STATUS_IDLE});case u.CLEAR_DOCUMENT_LIST:return r({},e,{list:null,query:null,selected:[],sortBy:null,sortOrder:null,status:i.STATUS_IDLE});case u.SET_DOCUMENT_LIST_STATUS:return r({},e,{status:t.status});case u.SET_DOCUMENT_SELECTION:return r({},e,{selected:t.selectedDocuments});case u.SIGN_OUT:return s;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=document;var o=n(3),i=_interopRequireWildcard(o),a=n(7),u=_interopRequireWildcard(a),s={list:null,query:null,selected:[],status:i.STATUS_IDLE}},function(e,t,n){"use strict";function router(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,o=t.locationBeforeTransitions,u=t.params,s=t.action,l=t.room;switch(n){case i.LOCATION_CHANGE:return r({},e,{action:s,locationBeforeTransitions:o,params:u||{}});case i.ROOM_CHANGE:return r({},e,{room:l});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=router;var o=n(7),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a={action:null,locationBeforeTransitions:null,params:{},room:null}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function user(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u.REGISTER_FAILED_SIGN_IN:return r({},e,{failedSignInAttempts:e.failedSignInAttempts+1,status:i.STATUS_FAILED});case u.SET_REMOTE_USER:return r({},e,{failedSignInAttempts:0,hasSignedOut:!1,remote:t.user,status:i.STATUS_LOADED});case u.REQUEST_PASSWORD_RESET:return r({},e,{resetEmail:t.resetEmail});case u.REQUEST_PASSWORD_RESET_SUCCESS:return r({},e,{resetError:t.error,resetSuccess:t.success});case u.SET_USER_STATUS:return r({},e,{status:t.status});case u.SIGN_OUT:return r({},s,{hasSignedOut:!0});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=user;var o=n(3),i=_interopRequireWildcard(o),a=n(7),u=_interopRequireWildcard(a),s={failedSignInAttempts:0,hasSignedOut:!1,remote:null,resetEmail:null,resetError:null,resetSuccess:null,status:i.STATUS_IDLE}},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(4),a=n(37),u=_interopRequireDefault(a),s=n(53),l=_interopRequireDefault(s),c=n(18),f=_interopRequireDefault(c),p=n(17),d=_interopRequireDefault(p),h=n(20),_=_interopRequireDefault(h),y=function(e){function DocumentCreateView(){return _classCallCheck(this,DocumentCreateView),_possibleConstructorReturn(this,(DocumentCreateView.__proto__||Object.getPrototypeOf(DocumentCreateView)).apply(this,arguments))}return _inherits(DocumentCreateView,e),r(DocumentCreateView,[{key:"render",value:function(){var e=this.props,t=e.collection,n=(e.documentId,e.group),r=e.section;return(0,o.h)(_.default,null,(0,o.h)(f.default,null),(0,o.h)(d.default,null,(0,o.h)(u.default,{collection:t,group:n,onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),onPageTitle:this.handlePageTitle,section:r})),(0,o.h)(l.default,{collection:t,group:n,section:r}))}},{key:"handleBuildBaseUrl",value:function(){var e=this.props,t=e.collection,n=(e.documentId,e.group);e.section;return[n,t,"document","new"]}},{key:"handlePageTitle",value:function(e){(0,i.setPageTitle)(e)}}]),DocumentCreateView}(o.Component);t.default=y},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(37),a=_interopRequireDefault(i),u=n(53),s=_interopRequireDefault(u),l=n(18),c=_interopRequireDefault(l),f=n(17),p=_interopRequireDefault(f),d=n(20),h=_interopRequireDefault(d),_=n(4),y=function(e){function DocumentEditView(){return _classCallCheck(this,DocumentEditView),_possibleConstructorReturn(this,(DocumentEditView.__proto__||Object.getPrototypeOf(DocumentEditView)).apply(this,arguments))}return _inherits(DocumentEditView,e),r(DocumentEditView,[{key:"render",value:function(){var e=this.props,t=e.collection,n=e.documentId,r=e.group,i=e.referencedField,u=e.section;return(0,o.h)(h.default,null,(0,o.h)(c.default,null),(0,o.h)(p.default,null,(0,o.h)(a.default,{collection:t,documentId:n,group:r,onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),onPageTitle:this.handlePageTitle,referencedField:i,section:u})),(0,o.h)(s.default,{collection:t,documentId:n,group:r,referencedField:i,section:u}))}},{key:"handleBuildBaseUrl",value:function(){var e=this.props,t=e.collection,n=e.documentId,r=e.group;e.section;return[r,t,"document","edit",n]}},{key:"handlePageTitle",value:function(e){(0,_.setPageTitle)(e)}}]),DocumentEditView}(o.Component);t.default=y},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(2),a=(_interopRequireDefault(i),n(189)),u=_interopRequireDefault(a),s=n(4),l=n(54),c=_interopRequireDefault(l),f=n(121),p=_interopRequireDefault(f),d=n(55),h=_interopRequireDefault(d),_=n(18),y=_interopRequireDefault(_),b=n(17),m=_interopRequireDefault(b),v=n(20),g=_interopRequireDefault(v),O=n(56),C=_interopRequireDefault(O),w=function(e){function DocumentListView(e){_classCallCheck(this,DocumentListView);var t=_possibleConstructorReturn(this,(DocumentListView.__proto__||Object.getPrototypeOf(DocumentListView)).call(this,e));return t.state.newFilter=!1,t}return _inherits(DocumentListView,e),r(DocumentListView,[{key:"render",value:function(){var e=this.props,t=e.collection,n=e.documentId,r=e.filter,i=e.group,a=e.order,s=e.page,l=e.referencedField,f=e.sort,d=(e.state,this.state.newFilter);return(0,o.h)(g.default,null,l?(0,o.h)(C.default,{collection:t,group:i,onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),parentDocumentId:n,referencedField:l}):(0,o.h)(y.default,null),(0,o.h)(m.default,null,(0,o.h)("div",{class:u.default.container},(0,o.h)(p.default,{collection:t,group:i,filter:r,newFilter:d,onAddNewFilter:this.handleAddNewFilter.bind(this),parentDocumentId:n,referencedField:l}),(0,o.h)(c.default,{collection:t,filter:r,group:i,onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),onPageTitle:this.handlePageTitle,order:a,page:s,parentDocumentId:n,referencedField:l,sort:f}))),(0,o.h)(h.default,{collection:t,group:i,onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),referencedField:l}))}},{key:"componentDidUpdate",value:function(e,t){e.collection!==this.props.collection&&this.setState({newFilter:!1})}},{key:"handleAddNewFilter",value:function(e){this.setState({newFilter:e})}},{key:"handleBuildBaseUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.collection,r=t.documentId,o=t.group;return t.referencedField?r?[o,n,"document","edit",r,e.section]:[o,n,"document","new",e.section]:[o,n,"documents"]}},{key:"handlePageTitle",value:function(e){(0,s.setPageTitle)(e)}}]),DocumentListView}(o.Component);t.default=w},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=(n(8),n(5)),a=n(4),u=n(18),s=_interopRequireDefault(u),l=n(34),c=_interopRequireDefault(l),f=n(17),p=_interopRequireDefault(f),d=n(20),h=_interopRequireDefault(d),_=function(e){function ErrorView(){return _classCallCheck(this,ErrorView),_possibleConstructorReturn(this,(ErrorView.__proto__||Object.getPrototypeOf(ErrorView)).apply(this,arguments))}return _inherits(ErrorView,e),r(ErrorView,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.type,r=t.app&&t.app.config;return(0,o.h)(h.default,null,(0,o.h)(s.default,null),(0,o.h)(p.default,null,r&&(0,o.h)(c.default,{type:n})))}}]),ErrorView}(o.Component);t.default=(0,a.connectHelper)(function(e){return e},function(e){return(0,i.bindActionCreators)({},e)})(_)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(5),a=n(4),u=n(16),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),l=n(18),c=_interopRequireDefault(l),f=n(35),p=_interopRequireDefault(f),d=n(17),h=_interopRequireDefault(d),_=n(20),y=_interopRequireDefault(_),b=function(e){function HomeView(){return _classCallCheck(this,HomeView),_possibleConstructorReturn(this,(HomeView.__proto__||Object.getPrototypeOf(HomeView)).apply(this,arguments))}return _inherits(HomeView,e),r(HomeView,[{key:"render",value:function(){var e=this.props.state,t=e.user.remote;return t?((0,a.setPageTitle)(),(0,o.h)(y.default,null,(0,o.h)(c.default,null),(0,o.h)(h.default,null,(0,o.h)(p.default,{title:"Welcome, "+String(t&&!t.error?t.first_name:"Guest")+".",subtitle:"You can use the menu to navigate collections and start editing documents."})))):null}}]),HomeView}(o.Component);t.default=(0,a.connectHelper)(function(e){return{user:e.user}},function(e){return(0,i.bindActionCreators)(s,e)})(b)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=(n(8),n(9)),a=n(5),u=n(4),s=n(58),l=_interopRequireDefault(s),c=n(16),f=_interopRequireWildcard(c),p=n(3),d=(_interopRequireWildcard(p),n(41)),h=_interopRequireDefault(d),_=n(6),y=_interopRequireDefault(_),b=n(14),m=_interopRequireDefault(b),v=n(10),g=_interopRequireDefault(v),O=n(190),C=_interopRequireDefault(O),w=function(e){function PasswordResetView(e){_classCallCheck(this,PasswordResetView);var t=_possibleConstructorReturn(this,(PasswordResetView.__proto__||Object.getPrototypeOf(PasswordResetView)).call(this,e));return t.validation=new l.default,t.state.email="",t.state.formDataIsValid=!1,t}return _inherits(PasswordResetView,e),r(PasswordResetView,[{key:"render",value:function(){var e=this.props,t=e.state,n=(e.actions,t.user),r=this.state.formDataIsValid;return n.resetEmail&&n.resetExpiresAt&&(this.error="Please check your inbox for a password reset email."),n.remote?((0,i.route)("/profile/password-reset"),null):((0,u.setPageTitle)("Reset password"),(0,o.h)("div",{class:C.default.wrapper},(0,o.h)("div",{class:C.default.overlay},(0,o.h)("div",{class:C.default.container},(0,o.h)("form",{action:"/profile",method:"POST",onSubmit:this.handleResetPassword.bind(this)},(0,o.h)("img",{class:C.default.logo,src:"/images/publish.png"}),this.error&&(0,o.h)(h.default,null,this.error),(0,o.h)("div",{class:C.default.inputs},(0,o.h)("div",{class:C.default.input},(0,o.h)(m.default,{label:"Email"},(0,o.h)(g.default,{placeholder:"Your email address",onChange:this.handleInputChange.bind(this,"email"),onKeyUp:this.handleInputChange.bind(this,"email"),validation:this.validation.email,value:this.state.email})))),(0,o.h)(y.default,{accent:"system",type:"submit",disabled:!r},"Reset password"),(0,o.h)("a",{class:C.default.link,href:"/sign-in"},"Sign-in"))))))}},{key:"handleInputChange",value:function(e,t){var n;this.setState((n={},_defineProperty(n,e,t.target.value),_defineProperty(n,"formDataIsValid",t.isValid),n))}},{key:"handleResetPassword",value:function(e){var t=this.props.actions,n=this.state.email;t.requestPasswordReset(n),e.preventDefault()}}]),PasswordResetView}(o.Component);t.default=(0,u.connectHelper)(function(e){return{user:e.user}},function(e){return(0,a.bindActionCreators)(f,e)})(w)},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(125),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(4),s=function(e){function ProfileEditView(){return _classCallCheck(this,ProfileEditView),_possibleConstructorReturn(this,(ProfileEditView.__proto__||Object.getPrototypeOf(ProfileEditView)).apply(this,arguments))}return _inherits(ProfileEditView,e),r(ProfileEditView,[{key:"render",value:function(){var e=this.props,t=(e.collection,e.group,e.referencedField),n=e.section;return(0,u.setPageTitle)("Profile"),(0,o.h)(a.default,{onBuildBaseUrl:this.handleBuildBaseUrl.bind(this),referencedField:t,section:n})}},{key:"handleBuildBaseUrl",value:function(){var e=this.props;e.collection,e.documentId,e.group,e.section;return["profile"]}}]),ProfileEditView}(o.Component);t.default=s},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=(n(8),n(4)),a=n(127),u=_interopRequireDefault(a),s=n(18),l=_interopRequireDefault(s),c=n(17),f=_interopRequireDefault(c),p=n(20),d=_interopRequireDefault(p),h=function(e){function SignInView(){return _classCallCheck(this,SignInView),_possibleConstructorReturn(this,(SignInView.__proto__||Object.getPrototypeOf(SignInView)).apply(this,arguments))}return _inherits(SignInView,e),r(SignInView,[{key:"render",value:function(){var e=this.props.token;return(0,o.h)(d.default,null,(0,o.h)(l.default,null),(0,o.h)(f.default,null,(0,o.h)(u.default,{setPagetTitle:this.handlePageTitleChange,token:e})))}},{key:"handlePageTitleChange",value:function(e){(0,i.setPageTitle)(e)}}]),SignInView}(o.Component);t.default=h},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=(n(8),n(9),n(5)),a=n(4),u=n(16),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),l=function(e){function SignOutView(){return _classCallCheck(this,SignOutView),_possibleConstructorReturn(this,(SignOutView.__proto__||Object.getPrototypeOf(SignOutView)).apply(this,arguments))}return _inherits(SignOutView,e),r(SignOutView,[{key:"componentWillMount",value:function(){var e=this.props;e.state;e.actions.signOut()}},{key:"render",value:function(){return null}}]),SignOutView}(o.Component);t.default=(0,a.connectHelper)(function(e){return e.user},function(e){return(0,i.bindActionCreators)(s,e)})(l)},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),i=n(4),a=n(9),u=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),l=function(e){function View(){return _classCallCheck(this,View),_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).apply(this,arguments))}return _inherits(View,e),r(View,[{key:"render",value:function(e){var t=this.props,n=t.authenticate,r=t.state,i=r.user,u=i.status===s.STATUS_IDLE||i.status===s.STATUS_LOADING,l=i.status===s.STATUS_FAILED||i.hasSignedOut,c=e.component;return n&&l?((0,a.route)("/sign-in"),null):n&&u?null:(0,o.h)(c,e)}}]),View}(o.Component);t.default=(0,i.connectHelper)(function(e){return{user:e.user}})(l)},function(e,t,n){(function(e,r){var o;!function(i){var a="object"==typeof t&&t,u=("object"==typeof e&&e&&e.exports,"object"==typeof r&&r);var s=function(e){this.message=e};s.prototype=new Error,s.prototype.name="InvalidCharacterError";var l=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(e){e=String(e).replace(/[\t\n\f\r ]/g,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,i="",a=-1;++a<t;)r=c.indexOf(e.charAt(a)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},p=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,o,i=e.length%3,a="",u=-1,s=e.length-i;++u<s;)t=e.charCodeAt(u)<<16,n=e.charCodeAt(++u)<<8,r=e.charCodeAt(++u),o=t+n+r,a+=c.charAt(o>>18&63)+c.charAt(o>>12&63)+c.charAt(o>>6&63)+c.charAt(63&o);return 2==i?(t=e.charCodeAt(u)<<8,n=e.charCodeAt(++u),o=t+n,a+=c.charAt(o>>10)+c.charAt(o>>4&63)+c.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(u),a+=c.charAt(o>>2)+c.charAt(o<<4&63)+"=="),a},d={encode:p,decode:f,version:"0.1.0"};void 0!==(o=function(){return d}.call(t,n,t,e))&&(e.exports=o)}()}).call(t,n(27)(e),n(13))},function(e,t){function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}e.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){this.off(e,on),t.apply(this,arguments)}return on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(module,exports){var cycle=exports;cycle.decycle=function(e){"use strict";var t=[],n=[];return function derez(e,r){var o,i,a;if(!("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)){for(o=0;o<t.length;o+=1)if(t[o]===e)return{$ref:n[o]};if(t.push(e),n.push(r),"[object Array]"===Object.prototype.toString.apply(e))for(a=[],o=0;o<e.length;o+=1)a[o]=derez(e[o],r+"["+o+"]");else{a={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=derez(e[i],r+"["+JSON.stringify(i)+"]"))}return a}return e}(e,"$")},cycle.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)(item=value[i])&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name])&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item))}($),$}},function(e,t){e.exports={banner:"Banner__banner___2H-0j","banner-error":"Banner__banner-error___3eRVd"}},function(e,t){e.exports={button:"Button__button___1Z7Ge","button-small":"Button__button-small___34Pp6","button-mock":"Button__button-mock___1sHk4","button-inherit":"Button__button-inherit___20zZk","button-in-group-left":"Button__button-in-group-left___282tx","button-in-group-right":"Button__button-in-group-right___3WRJQ","button-in-group-middle":"Button__button-in-group-middle___yh08J","button-system":"Button__button-system___1RSGq","button-destruct":"Button__button-destruct___2w3si","button-save":"Button__button-save___jJpfL","button-data":"Button__button-data___3tFgH","button-neutral":"Button__button-neutral___17efi"}},function(e,t){e.exports={container:"ButtonWithOptions__container___3Eplt",launcher:"ButtonWithOptions__launcher___2uB2w",options:"ButtonWithOptions__options___3wHy6","launcher-system":"ButtonWithOptions__launcher-system___3J5nU","launcher-save":"ButtonWithOptions__launcher-save___2qSXS"}},function(e,t){e.exports={container:"ButtonWithPrompt__container___1p_tE",prompt:"ButtonWithPrompt__prompt___1qpIw","prompt-left":"ButtonWithPrompt__prompt-left___37VkK","prompt-right":"ButtonWithPrompt__prompt-right___1xv-w"}},function(e,t){e.exports={checkbox:"Checkbox__checkbox___2oHX0"}},function(e,t){e.exports={container:"DateTimePicker__container___2PiSU",arrow:"DateTimePicker__arrow___2_Lbg",head:"DateTimePicker__head___2oK3Z","current-date":"DateTimePicker__current-date___1VkZQ",calendar:"DateTimePicker__calendar___2wtZV","calendar-head":"DateTimePicker__calendar-head___7Vu5L","calendar-day":"DateTimePicker__calendar-day___2QacM","calendar-day-current":"DateTimePicker__calendar-day-current___1OhGG","calendar-day-faded":"DateTimePicker__calendar-day-faded___1uJ8c","calendar-day-active":"DateTimePicker__calendar-day-active___3uA1S","hours-launcher":"DateTimePicker__hours-launcher___Fbrtj","hours-container":"DateTimePicker__hours-container___2ZTdS",hours:"DateTimePicker__hours___7wLP7",hour:"DateTimePicker__hour___3ZX7a"}},function(e,t){e.exports={filter:"DocumentFilter__filter___Y3X9z",select:"DocumentFilter__select___2lCIV",input:"DocumentFilter__input___qyYeY","small-button":"DocumentFilter__small-button___3UcHH","control-field":"DocumentFilter__control-field___3kjsG","control-analyser":"DocumentFilter__control-analyser___1kTaB","control-value":"DocumentFilter__control-value___59rzt","filter-container":"DocumentFilter__filter-container___1eid7"}},function(e,t){e.exports={filters:"DocumentFilters__filters___2v5Wt",submit:"DocumentFilters__submit___1cv75"}},function(e,t){e.exports={"value-container":"FieldImage__value-container___1ykda",thumbnails:"FieldImage__thumbnails___1zmgz",thumbnail:"FieldImage__thumbnail___PVBtK",placeholder:"FieldImage__placeholder___3W9nT","upload-options":"FieldImage__upload-options___24iu-"}},function(e,t){e.exports={column:"FieldImageReferenceSelect__column___1on7y",item:"FieldImageReferenceSelect__item___2DXuK","item-image-holder":"FieldImageReferenceSelect__item-image-holder___3-VN9","item-image":"FieldImageReferenceSelect__item-image___2bsmY","item-select":"FieldImageReferenceSelect__item-select___3gTr3","item-overlay":"FieldImageReferenceSelect__item-overlay___1yHNh","item-filename":"FieldImageReferenceSelect__item-filename___c5OsQ","item-info":"FieldImageReferenceSelect__item-info___3INOo","item-selected":"FieldImageReferenceSelect__item-selected___sykkK","item-size":"FieldImageReferenceSelect__item-size___1Bux1","item-mimetype":"FieldImageReferenceSelect__item-mimetype___1o3NC"}},function(e,t){e.exports={label:"FieldPassword__label___QElo6"}},function(e,t){e.exports={"value-container":"FieldReference__value-container___25HbN",value:"FieldReference__value___3tGWj",placeholder:"FieldReference__placeholder___1vZrQ"}},function(e,t){e.exports={dropdown:"FieldString__dropdown___1Spbq","dropdown-multiple":"FieldString__dropdown-multiple___1eDr5","dropdown-error":"FieldString__dropdown-error___Pt05P","dropdown-option":"FieldString__dropdown-option___qjX-y"}},function(e,t){e.exports={container:"FileUpload__container___1jfB-","file-input":"FileUpload__file-input___Bx4MZ",or:"FileUpload__or___1X5U4",dropzone:"FileUpload__dropzone___2O30L","dropzone-active":"FileUpload__dropzone-active___3FyFd"}},function(e,t){e.exports={container:"HeroMessage__container___3s5KP",title:"HeroMessage__title___2mPbs",subtitle:"HeroMessage__subtitle___16Rge",children:"HeroMessage__children___1GWUz"}},function(e,t){e.exports={icon:"IconArrow__icon___1cB12"}},function(e,t){e.exports={icon:"IconBurger__icon___3iUqS"}},function(e,t){e.exports={icon:"IconCross__icon___sQLcl"}},function(e,t){e.exports={container:"Label__container___2aVIp","container-compact":"Label__container-compact___19Idf","container-with-comment":"Label__container-with-comment___172T0","container-error":"Label__container-error___1kkWX","container-error-message":"Label__container-error-message___ZkVDk",label:"Label__label___3lhDs",comment:"Label__comment___2DmNo","error-message":"Label__error-message___2xXtK"}},function(e,t){e.exports={container:"ListController__container___FU2i3",control:"ListController__control___2Sp4C",search:"ListController__search___2ycmy"}},function(e,t){e.exports={main:"Main__main___1b1KR"}},function(e,t){},function(e,t){e.exports={nav:"Nav__nav___dGSsX",children:"Nav__children___1nQKf"}},function(e,t){e.exports={container:"NavItem__container___1wydz","container-desktop":"NavItem__container-desktop___1bFcA","container-expanded":"NavItem__container-expanded___1wyrE","nav-item":"NavItem__nav-item___kFcPi","nav-item-active":"NavItem__nav-item-active___1Mn01",children:"NavItem__children___3_Bp3"}},function(e,t){e.exports={container:"Notification__container___QKQT4","container-visible":"Notification__container-visible___1uOiS",notification:"Notification__notification___3rLf-","notification-visible":"Notification__notification-visible___2FL0C","notification-system":"Notification__notification-system___3rBFC",option:"Notification__option___1B6NC"}},function(e,t){e.exports={container:"Page__container___1Lfji"}},function(e,t){e.exports={page:"Paginator__page___w0PUP","page-secondary":"Paginator__page-secondary___tfx0B"}},function(e,t){e.exports={avatar:"Peer__avatar___3As6-"}},function(e,t){e.exports={container:"Prompt__container___1Y1mT","container-left":"Prompt__container-left___3jKIR","container-right":"Prompt__container-right___2w1ms",action:"Prompt__action___og0gs","container-destruct":"Prompt__container-destruct___2E8Mf"}},function(e,t){e.exports={"sub-nav-item":"SubNavItem__sub-nav-item___15kg3","sub-nav-item-error":"SubNavItem__sub-nav-item-error___3SRd6","sub-nav-item-active":"SubNavItem__sub-nav-item-active___2xMZV"}},function(e,t){e.exports={input:"TextInput__input___3mrPr","input-in-label":"TextInput__input-in-label___2RaVq"}},function(e,t){e.exports={container:"DocumentEdit__container___3VHu7",section:"DocumentEdit__section___1cGS9","section-active":"DocumentEdit__section-active___3Ve8l",navigation:"DocumentEdit__navigation___3h0F1",main:"DocumentEdit__main___PfkXK","main-full":"DocumentEdit__main-full___Igcmw",sidebar:"DocumentEdit__sidebar___2GhUv",field:"DocumentEdit__field___3VIHe"}},function(e,t){e.exports={metadata:"DocumentEditToolbar__metadata___3kdaT","metadata-emphasis":"DocumentEditToolbar__metadata-emphasis___DJAj4",peers:"DocumentEditToolbar__peers___KWI3H",buttons:"DocumentEditToolbar__buttons___UamiO",button:"DocumentEditToolbar__button___2csUA"}},function(e,t){e.exports={information:"DocumentListToolbar__information___3Zb7s","count-label":"DocumentListToolbar__count-label___2G04G",section:"DocumentListToolbar__section___2lf-b",select:"DocumentListToolbar__select___2BcRm","select-button":"DocumentListToolbar__select-button___2fF08","page-input":"DocumentListToolbar__page-input___xumq_",actions:"DocumentListToolbar__actions___2VZRk"}},function(e,t){e.exports={header:"Header__header___3y9Kw",masthead:"Header__masthead___3iRbE",logo:"Header__logo___3lRPD",controls:"Header__controls___1MdBy",signout:"Header__signout___1datp",user:"Header__user___2Bh5K",toggle:"Header__toggle___3D5Cj","toggle-icon":"Header__toggle-icon___1Riwb","toggle-label":"Header__toggle-label___dCu76",content:"Header__content___20M6s","content-compact":"Header__content-compact___1Du2w","content-expanded":"Header__content-expanded___1JQS9"}},function(e,t){e.exports={bar:"LoadingBar__bar___2BSnx",tip:"LoadingBar__tip___1KEYG"}},function(e,t){e.exports={container:"ProfileEditToolbar__container___2ldLJ"}},function(e,t){e.exports={container:"ReferencedDocumentHeader__container___2o6Cu"}},function(e,t){e.exports={wrapper:"SignIn__wrapper___2cSLh",overlay:"SignIn__overlay___vWzEd",container:"SignIn__container___1-lA6",logo:"SignIn__logo___1uT09",inputs:"SignIn__inputs___2tmS2",input:"SignIn__input___2DZO1",link:"SignIn__link___2HDup"}},function(e,t){e.exports={container:"DocumentListView__container___1p1p5"}},function(e,t){e.exports={wrapper:"PasswordResetView__wrapper___10Qc9",overlay:"PasswordResetView__overlay___2ieTS",container:"PasswordResetView__container___2TQ_h",logo:"PasswordResetView__logo___6aNy-",inputs:"PasswordResetView__inputs___2mdGo",input:"PasswordResetView__input___14wHO",link:"PasswordResetView__link___2OmyX"}},function(e,t,n){var r;!function(o){"use strict";function shorten(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push(e[r].substr(0,t));return n}function monthUpdate(e){return function(t,n,r){var o=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~o&&(t.month=o)}}function pad(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var i={},a=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,u=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,s=function(){},l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],f=shorten(c,3),p=shorten(l,3);i.i18n={dayNamesShort:p,dayNames:l,monthNamesShort:f,monthNames:c,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var d={D:function(e){return e.getDate()},DD:function(e){return pad(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return pad(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return pad(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return String(e.getFullYear()).substr(2)},YYYY:function(e){return e.getFullYear()},h:function(e){return e.getHours()%12||12},hh:function(e){return pad(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return pad(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return pad(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return pad(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return pad(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return pad(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},h={D:[/\d\d?/,function(e,t){e.day=t}],Do:[new RegExp(/\d\d?/.source+u.source),function(e,t){e.day=parseInt(t,10)}],M:[/\d\d?/,function(e,t){e.month=t-1}],YY:[/\d\d?/,function(e,t){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);e.year=""+(t>68?r-1:r)+t}],h:[/\d\d?/,function(e,t){e.hour=t}],m:[/\d\d?/,function(e,t){e.minute=t}],s:[/\d\d?/,function(e,t){e.second=t}],YYYY:[/\d{4}/,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[/\d{3}/,function(e,t){e.millisecond=t}],d:[/\d\d?/,s],ddd:[u,s],MMM:[u,monthUpdate("monthNamesShort")],MMMM:[u,monthUpdate("monthNames")],a:[u,function(e,t,n){var r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(e,t){var n,r=(t+"").match(/([\+\-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),e.timezoneOffset="+"===r[0]?n:-n)}]};h.dd=h.d,h.dddd=h.ddd,h.DD=h.D,h.mm=h.m,h.hh=h.H=h.HH=h.h,h.MM=h.M,h.ss=h.s,h.A=h.a,i.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},i.format=function(e,t,n){var r=n||i.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=i.masks[t]||t||i.masks.default;var o=[];return t=t.replace(/\[([^]*?)\]/gm,function(e,t){return o.push(t),"??"}),t=t.replace(a,function(t){return t in d?d[t](e,r):t.slice(1,t.length-1)}),t.replace(/\?\?/g,function(){return o.shift()})},i.parse=function(e,t,n){var r=n||i.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=i.masks[t]||t,e.length>1e3)return!1;var o=!0,u={};if(t.replace(a,function(t){if(h[t]){var n=h[t],i=e.search(n[0]);~i?e.replace(n[0],function(t){return n[1](u,t,r),e=e.substr(i+t.length),t}):o=!1}return h[t]?"":t.slice(1,t.length-1)}),!o)return!1;var s=new Date;!0===u.isPm&&null!=u.hour&&12!=+u.hour?u.hour=+u.hour+12:!1===u.isPm&&12==+u.hour&&(u.hour=0);var l;return null!=u.timezoneOffset?(u.minute=+(u.minute||0)-+u.timezoneOffset,l=new Date(Date.UTC(u.year||s.getFullYear(),u.month||0,u.day||1,u.hour||0,u.minute||0,u.second||0,u.millisecond||0))):l=new Date(u.year||s.getFullYear(),u.month||0,u.day||1,u.hour||0,u.minute||0,u.second||0,u.millisecond||0),l},void 0!==e&&e.exports?e.exports=i:void 0!==(r=function(){return i}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t,n){var r,o,i;!function(n){void 0!==e&&e.exports?e.exports=n():(o=[],r=n,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i))}(function(){function equals(e,t){return e&&e.toLowerCase()===t.toLowerCase()}var e="BKMGTPEZY".split("");return function(t,n){return t="number"==typeof t?t:0,n=n||{},n.fixed="number"==typeof n.fixed?n.fixed:2,n.spacer="string"==typeof n.spacer?n.spacer:" ",n.calculate=function(e){var r,o=equals(e,"si")?["k","B"]:["K","iB"],i=equals(e,"si")?1e3:1024,a=Math.log(t)/Math.log(i)|0,u=t/Math.pow(i,a),s=u.toFixed(n.fixed);return a-1<3&&!equals(e,"si")&&equals(e,"jedec")&&(o[1]="B"),r=a?(o[0]+"MGTPEZY")[a-1]+o[1]:1==(0|s)?"Byte":"Bytes",{suffix:r,magnitude:a,result:u,fixed:s,bits:{result:u/8,fixed:(u/8).toFixed(n.fixed)}}},n.to=function(n,r){var o=equals(r,"si")?1e3:1024,i=e.indexOf("string"==typeof n?n[0].toUpperCase():"B"),a=t;if(-1===i||0===i)return a.toFixed(2);for(;i>0;i--)a/=o;return a.toFixed(2)},n.human=function(e){var t=n.calculate(e);return t.fixed+n.spacer+t.suffix},n}})},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(216),i=_interopRequireDefault(o),a=n(228),u=_interopRequireDefault(a),s=n(62);t.createLocation=function(e,t,n,o){var a=void 0;return"string"==typeof e?(a=(0,s.parsePath)(e),a.state=t):(a=r({},e),void 0===a.pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t)),a.key=n,o&&(a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,i.default)(a.pathname,o.pathname)):a.pathname=o.pathname),a},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,u.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(71),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){var e=null,t=function(t){return(0,o.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,r,i){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,i):((0,o.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},r=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}}};t.default=i},function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,u){if("production"!=={NODE_ENV:"production"}.NODE_ENV&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,u],c=0;s=new Error(t.replace(/%s/g,function(){return l[c++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};e.exports=r},function(e,t,n){"use strict";function List(){if(arguments.length)return List.from(arguments)}function ListItem(){}var r;r="An argument without append, prepend, or detach methods was given to `List";var o;o=List.prototype,List.of=function(){return List.from.call(this,arguments)},List.from=function(e){var t,n,r,o=new this;if(e&&(t=e.length))for(n=-1;++n<t;)null!==(r=e[n])&&void 0!==r&&o.append(r);return o},o.head=null,o.tail=null,o.toArray=function(){for(var e=this.head,t=[];e;)t.push(e),e=e.next;return t},o.prepend=function(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(r+"#prepend`.");var t,n;return t=this,(n=t.head)?n.prepend(e):(e.detach(),e.list=t,t.head=e,e)},o.append=function(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(r+"#append`.");var t,n,o;return t=this,(o=t.tail)?o.append(e):(n=t.head)?n.append(e):(e.detach(),e.list=t,t.head=e,e)},List.Item=ListItem;var i=ListItem.prototype;i.next=null,i.prev=null,i.list=null,i.detach=function(){var e=this,t=e.list,n=e.prev,r=e.next;return t?(t.tail===e&&(t.tail=n),t.head===e&&(t.head=r),t.tail===t.head&&(t.tail=null),n&&(n.next=r),r&&(r.prev=n),e.prev=e.next=e.list=null,e):e},i.prepend=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(r+"Item#prepend`.");var t=this,n=t.list,o=t.prev;return!!n&&(e.detach(),o&&(e.prev=o,o.next=e),e.next=t,e.list=n,t.prev=e,t===n.head&&(n.head=e),n.tail||(n.tail=t),e)},i.append=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(r+"Item#append`.");var t=this,n=t.list,o=t.next;return!!n&&(e.detach(),o&&(e.next=o,o.prev=e),e.prev=t,e.list=n,t.next=e,t!==n.tail&&n.tail||(n.tail=e),e)},e.exports=List},function(e,t,n){"use strict";e.exports=n(197)},function(e,t,n){"use strict";function baseGetTag(e){return null==e?void 0===e?u:a:s&&s in Object(e)?n.i(o.a)(e):n.i(i.a)(e)}var r=n(63),o=n(202),i=n(203),a="[object Null]",u="[object Undefined]",s=r.a?r.a.toStringTag:void 0;t.a=baseGetTag},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(t,n(13))},function(e,t,n){"use strict";var r=n(204),o=n.i(r.a)(Object.getPrototypeOf,Object);t.a=o},function(e,t,n){"use strict";function getRawTag(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0}catch(e){}var r=a.call(e);return t?e[u]=n:delete e[u],r}var r=n(63),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r.a?r.a.toStringTag:void 0;t.a=getRawTag},function(e,t,n){"use strict";function objectToString(e){return o.call(e)}var r=Object.prototype,o=r.toString;t.a=objectToString},function(e,t,n){"use strict";function overArg(e,t){return function(n){return e(t(n))}}t.a=overArg},function(e,t,n){"use strict";var r=n(200),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},function(e,t,n){"use strict";function isObjectLike(e){return null!=e&&"object"==typeof e}t.a=isObjectLike},function(e,t,n){(function(e,n){function addMapEntry(e,t){return e.set(t[0],t[1]),e}function addSetEntry(e,t){return e.add(t),e}function arrayEach(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function arrayPush(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function arrayReduce(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function overArg(e,t){return function(n){return e(t(n))}}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Hash(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hashClear(){this.__data__=le?le(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(le){var n=t[e];return n===o?void 0:n}return G.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return le?void 0!==t[e]:G.call(t,e)}function hashSet(e,t){return this.__data__[e]=le&&void 0===t?o:t,this}function ListCache(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():ee.call(t,n,1),!0)}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?void 0:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,r=assocIndexOf(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function MapCache(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(ie||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var o=n.__data__;if(!ie||o.length<r-1)return o.push([e,t]),this;n=this.__data__=new MapCache(o)}return n.set(e,t),this}function arrayLikeKeys(e,t){var n=ve(e)||isArguments(e)?baseTimes(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!G.call(e,i)||o&&("length"==i||isIndex(i,r))||n.push(i);return n}function assignValue(e,t,n){var r=e[t];G.call(e,t)&&eq(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseClone(e,t,n,r,o,i,u){var s;if(r&&(s=i?r(e,o,i,u):r(e)),void 0!==s)return s;if(!isObject(e))return e;var f=ve(e);if(f){if(s=initCloneArray(e),!t)return copyArray(e,s)}else{var p=me(e),h=p==l||p==c;if(ge(e))return cloneBuffer(e,t);if(p==d||p==a||h&&!i){if(isHostObject(e))return i?e:{};if(s=initCloneObject(h?{}:e),!t)return copySymbols(e,baseAssign(s,e))}else{if(!A[p])return i?e:{};s=initCloneByTag(e,p,baseClone,t)}}u||(u=new Stack);var _=u.get(e);if(_)return _;if(u.set(e,s),!f)var y=n?getAllKeys(e):keys(e);return arrayEach(y||e,function(o,i){y&&(i=o,o=e[i]),assignValue(s,i,baseClone(o,t,n,r,i,e,u))}),s}function baseCreate(e){return isObject(e)?Z(e):{}}function baseGetAllKeys(e,t,n){var r=t(e);return ve(e)?r:arrayPush(r,n(e))}function baseGetTag(e){return K.call(e)}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?$:D).test(toSource(e))}function baseKeys(e){if(!isPrototype(e))return re(e);var t=[];for(var n in Object(e))G.call(e,n)&&"constructor"!=n&&t.push(n);return t}function cloneBuffer(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Q(t).set(new Q(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function cloneMap(e,t,n){return arrayReduce(t?n(mapToArray(e),!0):mapToArray(e),addMapEntry,new e.constructor)}function cloneRegExp(e){var t=new e.constructor(e.source,k.exec(e));return t.lastIndex=e.lastIndex,t}function cloneSet(e,t,n){return arrayReduce(t?n(setToArray(e),!0):setToArray(e),addSetEntry,new e.constructor)}function cloneSymbol(e){return ye?Object(ye.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function copyArray(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function copyObject(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],u=r?r(n[a],e[a],a,n,e):void 0;assignValue(n,a,void 0===u?e[a]:u)}return n}function copySymbols(e,t){return copyObject(e,be(e),t)}function getAllKeys(e){return baseGetAllKeys(e,keys,be)}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function getNative(e,t){var n=getValue(e,t);return baseIsNative(n)?n:void 0}function initCloneArray(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&G.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(J(e))}function initCloneByTag(e,t,n,r){var o=e.constructor;switch(t){case m:return cloneArrayBuffer(e);case u:case s:return new o(+e);case v:return cloneDataView(e,r);case g:case O:case C:case w:case S:case T:case E:case P:case R:return cloneTypedArray(e,r);case f:return cloneMap(e,r,n);case p:case y:return new o(e);case h:return cloneRegExp(e);case _:return cloneSet(e,r,n);case b:return cloneSymbol(e)}}function isIndex(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!W&&W in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||B)}function toSource(e){if(null!=e){try{return V.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function cloneDeep(e){return baseClone(e,!0,!0)}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&G.call(e,"callee")&&(!X.call(e,"callee")||K.call(e)==a)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?K.call(e):"";return t==l||t==c}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function stubArray(){return[]}function stubFalse(){return!1}var r=200,o="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",u="[object Boolean]",s="[object Date]",l="[object Function]",c="[object GeneratorFunction]",f="[object Map]",p="[object Number]",d="[object Object]",h="[object RegExp]",_="[object Set]",y="[object String]",b="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",O="[object Float64Array]",C="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",k=/\w*$/,D=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,A={};A[a]=A["[object Array]"]=A[m]=A[v]=A[u]=A[s]=A[g]=A[O]=A[C]=A[w]=A[S]=A[f]=A[p]=A[d]=A[h]=A[_]=A[y]=A[b]=A[T]=A[E]=A[P]=A[R]=!0,A["[object Error]"]=A[l]=A["[object WeakMap]"]=!1;var I="object"==typeof e&&e&&e.Object===Object&&e,N="object"==typeof self&&self&&self.Object===Object&&self,U=I||N||Function("return this")(),q="object"==typeof t&&t&&!t.nodeType&&t,M=q&&"object"==typeof n&&n&&!n.nodeType&&n,L=M&&M.exports===q,F=Array.prototype,x=Function.prototype,B=Object.prototype,H=U["__core-js_shared__"],W=function(){var e=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),V=x.toString,G=B.hasOwnProperty,K=B.toString,$=RegExp("^"+V.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=L?U.Buffer:void 0,z=U.Symbol,Q=U.Uint8Array,J=overArg(Object.getPrototypeOf,Object),Z=Object.create,X=B.propertyIsEnumerable,ee=F.splice,te=Object.getOwnPropertySymbols,ne=Y?Y.isBuffer:void 0,re=overArg(Object.keys,Object),oe=getNative(U,"DataView"),ie=getNative(U,"Map"),ae=getNative(U,"Promise"),ue=getNative(U,"Set"),se=getNative(U,"WeakMap"),le=getNative(Object,"create"),ce=toSource(oe),fe=toSource(ie),pe=toSource(ae),de=toSource(ue),he=toSource(se),_e=z?z.prototype:void 0,ye=_e?_e.valueOf:void 0;Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var be=te?overArg(te,Object):stubArray,me=baseGetTag;(oe&&me(new oe(new ArrayBuffer(1)))!=v||ie&&me(new ie)!=f||ae&&"[object Promise]"!=me(ae.resolve())||ue&&me(new ue)!=_||se&&"[object WeakMap]"!=me(new se))&&(me=function(e){var t=K.call(e),n=t==d?e.constructor:void 0,r=n?toSource(n):void 0;if(r)switch(r){case ce:return v;case fe:return f;case pe:return"[object Promise]";case de:return _;case he:return"[object WeakMap]"}return t});var ve=Array.isArray,ge=ne||stubFalse;n.exports=cloneDeep}).call(t,n(13),n(27)(e))},function(e,t,n){"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(e,t,n){if(e&&o.isObject(e)&&e instanceof Url)return e;var r=new Url;return r.parse(e,t,n),r}function urlFormat(e){return o.isString(e)&&(e=urlParse(e)),e instanceof Url?e.format():Url.prototype.format.call(e)}function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}var r=n(210),o=n(209);t.parse=urlParse,t.resolve=urlResolve,t.resolveObject=urlResolveObject,t.format=urlFormat,t.Url=Url;var i=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r","\n","\t"],l=["{","}","|","\\","^","`"].concat(s),c=["'"].concat(l),f=["%","/","?",";","#"].concat(c),p=["/","?","#"],d={javascript:!0,"javascript:":!0},h={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(29);Url.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/"),e=l.join(s);var b=e;if(b=b.trim(),!n&&1===e.split("#").length){var m=u.exec(b);if(m)return this.path=b,this.href=b,this.pathname=m[1],m[2]?(this.search=m[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=i.exec(b);if(v){v=v[0];var g=v.toLowerCase();this.protocol=g,b=b.substr(v.length)}if(n||v||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===b.substr(0,2);!O||v&&h[v]||(b=b.substr(2),this.slashes=!0)}if(!h[v]&&(O||v&&!_[v])){for(var C=-1,w=0;w<p.length;w++){var S=b.indexOf(p[w]);-1!==S&&(-1===C||S<C)&&(C=S)}var T,E;E=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C),-1!==E&&(T=b.slice(0,E),b=b.slice(E+1),this.auth=decodeURIComponent(T)),C=-1;for(var w=0;w<f.length;w++){var S=b.indexOf(f[w]);-1!==S&&(-1===C||S<C)&&(C=S)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var R=this.hostname.split(/\./),w=0,k=R.length;w<k;w++){var D=R[w];if(D&&!D.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var j="",A=0,I=D.length;A<I;A++)D.charCodeAt(A)>127?j+="x":j+=D[A];if(!j.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var N=R.slice(0,w),U=R.slice(w+1),q=D.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);q&&(N.push(q[1]),U.unshift(q[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var M=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+M,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!d[g])for(var w=0,k=c.length;w<k;w++){var F=c[w];if(-1!==b.indexOf(F)){var x=encodeURIComponent(F);x===F&&(x=escape(F)),b=b.split(F).join(x)}}var B=b.indexOf("#");-1!==B&&(this.hash=b.substr(B),b=b.slice(0,B));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),_[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",W=this.search||"";this.path=M+W}return this.href=this.format(),this},Url.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var u=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),u=u.replace("#","%23"),t+i+n+u+r},Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()},Url.prototype.resolveObject=function(e){if(o.isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var n=new Url,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var l=u[s];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var p=c[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||h[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var y=n.pathname||"",b=n.search||"";n.path=y+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=v||m||n.host&&e.pathname,O=g,C=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],w=n.protocol&&!_[n.protocol];if(w&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),g=g&&(""===d[0]||""===C[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=d;else if(d.length)C||(C=[]),C.pop(),C=C.concat(d),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(w){n.hostname=n.host=C.shift();var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=C.slice(-1)[0],E=(n.host||e.host||C.length>1)&&("."===T||".."===T)||""===T,P=0,R=C.length;R>=0;R--)T=C[R],"."===T?C.splice(R,1):".."===T?(C.splice(R,1),P++):P&&(C.splice(R,1),P--);if(!g&&!O)for(;P--;P)C.unshift("..");!g||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),E&&"/"!==C.join("/").substr(-1)&&C.push("");var k=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(w){n.hostname=n.host=k?"":C.length?C.shift():"";var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return g=g||n.host&&C.length,g&&!k&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Url.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){(function(e,r){var o;!function(i){function error(e){throw new RangeError(g[e])}function map(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function mapDomain(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(v,"."),r+map(e.split("."),t).join(".")}function ucs2decode(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function ucs2encode(e){return map(e,function(e){var t="";return e>65535&&(e-=65536,t+=w(e>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,n){var r=0;for(e=n?C(e/d):e>>1,e+=C(e/t);e>O*f>>1;r+=l)e=C(e/O);return C(r+(O+1)*e/(e+p))}function decode(e){var t,n,r,o,i,a,u,p,d,b,m=[],v=e.length,g=0,O=_,w=h;for(n=e.lastIndexOf(y),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&error("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=g,a=1,u=l;o>=v&&error("invalid-input"),p=basicToDigit(e.charCodeAt(o++)),(p>=l||p>C((s-g)/a))&&error("overflow"),g+=p*a,d=u<=w?c:u>=w+f?f:u-w,!(p<d);u+=l)b=l-d,a>C(s/b)&&error("overflow"),a*=b;t=m.length+1,w=adapt(g-i,t,0==i),C(g/t)>s-O&&error("overflow"),O+=C(g/t),g%=t,m.splice(g++,0,O)}return ucs2encode(m)}function encode(e){var t,n,r,o,i,a,u,p,d,b,m,v,g,O,S,T=[];for(e=ucs2decode(e),v=e.length,t=_,n=0,i=h,a=0;a<v;++a)(m=e[a])<128&&T.push(w(m));for(r=o=T.length,o&&T.push(y);r<v;){for(u=s,a=0;a<v;++a)(m=e[a])>=t&&m<u&&(u=m);for(g=r+1,u-t>C((s-n)/g)&&error("overflow"),n+=(u-t)*g,t=u,a=0;a<v;++a)if(m=e[a],m<t&&++n>s&&error("overflow"),m==t){for(p=n,d=l;b=d<=i?c:d>=i+f?f:d-i,!(p<b);d+=l)S=p-b,O=l-b,T.push(w(digitToBasic(b+S%O,0))),p=C(S/O);T.push(w(digitToBasic(p,0))),i=adapt(n,g,r==o),n=0,++r}++n,++t}return T.join("")}function toUnicode(e){return mapDomain(e,function(e){return b.test(e)?decode(e.slice(4).toLowerCase()):e})}function toASCII(e){return mapDomain(e,function(e){return m.test(e)?"xn--"+encode(e):e})}var a=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var u,s=2147483647,l=36,c=1,f=26,p=38,d=700,h=72,_=128,y="-",b=/^xn--/,m=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=l-c,C=Math.floor,w=String.fromCharCode;u={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},void 0!==(o=function(){return u}.call(t,n,t,e))&&(e.exports=o)}()}).call(t,n(27)(e),n(13))},function(e,t,n){"use strict";function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var s=0;s<u;++s){var l,c,f,p,d=e[s].replace(/\+/g,"%20"),h=d.indexOf(n);h>=0?(l=d.substr(0,h),c=d.substr(h+1)):(l=d,c=""),f=decodeURIComponent(l),p=decodeURIComponent(c),hasOwnProperty(i,f)?r(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function map(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?map(i(e),function(i){var a=encodeURIComponent(r(i))+n;return o(e[i])?map(e[i],function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[i]))}).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function applyMiddleware(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,i,a){var u=e(n,i,a),s=u.dispatch,l=[],c={getState:u.getState,dispatch:function(e){return s(e)}};return l=t.map(function(e){return e(c)}),s=r.a.apply(void 0,l)(u.dispatch),o({},u,{dispatch:s})}}}var r=n(65);t.a=applyMiddleware;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function bindActionCreator(e,t){return function(){return t(e.apply(void 0,arguments))}}function bindActionCreators(e,t){if("function"==typeof e)return bindActionCreator(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var i=n[o],a=e[i];"function"==typeof a&&(r[i]=bindActionCreator(a,t))}return r}t.a=bindActionCreators},function(e,t,n){"use strict";function getUndefinedStateErrorMessage(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function getUnexpectedStateShapeWarningMessage(e,t,i,a){var u=Object.keys(t),s=i&&i.type===r.b.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===u.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!n.i(o.a)(e))return"The "+s+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+u.join('", "')+'"';var l=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!a[e]});return l.forEach(function(e){a[e]=!0}),l.length>0?"Unexpected "+(l.length>1?"keys":"key")+' "'+l.join('", "')+'" found in '+s+'. Expected to find one of the known reducer keys instead: "'+u.join('", "')+'". Unexpected keys will be ignored.':void 0}function assertReducerSanity(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:r.b.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.b.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function combineReducers(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var a=t[o];"production"!=={NODE_ENV:"production"}.NODE_ENV&&void 0===e[a]&&n.i(i.a)('No reducer provided for key "'+a+'"'),"function"==typeof e[a]&&(r[a]=e[a])}var u=Object.keys(r);if("production"!=={NODE_ENV:"production"}.NODE_ENV)var s={};var l;try{assertReducerSanity(r)}catch(e){l=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(l)throw l;if("production"!=={NODE_ENV:"production"}.NODE_ENV){var o=getUnexpectedStateShapeWarningMessage(e,r,t,s);o&&n.i(i.a)(o)}for(var a=!1,c={},f=0;f<u.length;f++){var p=u[f],d=r[p],h=e[p],_=d(h,t);if(void 0===_){var y=getUndefinedStateErrorMessage(p,t);throw new Error(y)}c[p]=_,a=a||_!==h}return a?c:e}}var r=n(66),o=n(64),i=n(67);t.a=combineReducers},function(e,t,n){"use strict";var r=function(e){return"/"===e.charAt(0)},o=function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&r(e),u=t&&r(t),s=a||u;if(e&&r(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var l=void 0;if(i.length){var c=i[i.length-1];l="."===c||".."===c||""===c}else l=!1;for(var f=0,p=i.length;p>=0;p--){var d=i[p];"."===d?o(i,p):".."===d?(o(i,p),f++):f&&(o(i,p),f--)}if(!s)for(;f--;f)i.unshift("..");!s||""===i[0]||i[0]&&r(i[0])||i.unshift("");var h=i.join("/");return l&&"/"!==h.substr(-1)&&(h+="/"),h};e.exports=i},function(e,t,n){var r=n(30).SCEmitter,o=function(e,t,n){r.call(this),this.PENDING="pending",this.SUBSCRIBED="subscribed",this.UNSUBSCRIBED="unsubscribed",this.name=e,this.state=this.UNSUBSCRIBED,this.client=t,this.options=n||{},this.setOptions(this.options)};o.prototype=Object.create(r.prototype),o.prototype.setOptions=function(e){e||(e={}),this.waitForAuth=e.waitForAuth||!1,void 0!==e.data&&(this.data=e.data)},o.prototype.getState=function(){return this.state},o.prototype.subscribe=function(e){this.client.subscribe(this.name,e)},o.prototype.unsubscribe=function(){this.client.unsubscribe(this.name)},o.prototype.isSubscribed=function(e){return this.client.isSubscribed(this.name,e)},o.prototype.publish=function(e,t){this.client.publish(this.name,e,t)},o.prototype.watch=function(e){this.client.watch(this.name,e)},o.prototype.unwatch=function(e){this.client.unwatch(this.name,e)},o.prototype.watchers=function(){return this.client.watchers(this.name)},o.prototype.destroy=function(){this.client.destroyChannel(this.name)},e.exports.SCChannel=o},function(e,t){e.exports.create=function(){function F(){}return function(e){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return F.prototype=e,new F}}()},function(e,t,n){(function(t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t=new Uint8Array(e),r=t.length,o="",i=0;i<r;i+=3)o+=n[t[i]>>2],o+=n[(3&t[i])<<4|t[i+1]>>4],o+=n[(15&t[i+1])<<2|t[i+2]>>6],o+=n[63&t[i+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},o=function(e,n){if(t.ArrayBuffer&&n instanceof t.ArrayBuffer)return{base64:!0,data:r(n)};if(t.Buffer){if(n instanceof t.Buffer)return{base64:!0,data:n.toString("base64")};if(n&&"Buffer"==n.type&&n.data instanceof Array){var o;return o=t.Buffer.from?t.Buffer.from(n.data):new t.Buffer(n.data),{base64:!0,data:o.toString("base64")}}}return n};e.exports.decode=function(e){if(null==e)return null;if("#1"==e||"#2"==e)return e;var t=e.toString();try{return JSON.parse(t)}catch(e){}return t},e.exports.encode=function(e){return"#1"==e||"#2"==e?e:JSON.stringify(e,o)}}).call(t,n(13))},function(e,t,n){var r=n(69),o=n(222);e.exports.SCSocketCreator=o,e.exports.SCSocket=r,e.exports.SCEmitter=n(30).SCEmitter,e.exports.connect=function(e){return o.connect(e)},e.exports.destroy=function(e){return o.destroy(e)},e.exports.connections=o.connections,e.exports.version="5.3.1"},function(e,t,n){(function(t){var n=function(){this._internalStorage={}};n.prototype._isLocalStorageEnabled=function(){var e;try{t.localStorage,t.localStorage.setItem("__scLocalStorageTest",1),t.localStorage.removeItem("__scLocalStorageTest")}catch(t){e=t}return!e},n.prototype.saveToken=function(e,n,r,o){this._isLocalStorageEnabled()&&t.localStorage?t.localStorage.setItem(e,n):this._internalStorage[e]=n,o&&o(null,n)},n.prototype.removeToken=function(e,n){var r;this.loadToken(e,function(e,t){r=t}),this._isLocalStorageEnabled()&&t.localStorage&&t.localStorage.removeItem(e),delete this._internalStorage[e],n&&n(null,r)},n.prototype.loadToken=function(e,n){var r;r=this._isLocalStorageEnabled()&&t.localStorage?t.localStorage.getItem(e):this._internalStorage[e]||null,n(null,r)},e.exports.AuthEngine=n}).call(t,n(13))},function(e,t,n){(function(t){function getMultiplexId(e){var t=e.secure?"https://":"http://",n="";if(e.query)if("string"==typeof e.query)n=e.query;else{var r=[],o=e.query;for(var i in o)o.hasOwnProperty(i)&&r.push(i+"="+o[i]);r.length&&(n="?"+r.join("&"))}var a;return a=e.host?e.host:e.hostname+":"+e.port,t+a+e.path+n}function isUrlSecure(){return t.location&&"https:"==location.protocol}function getPort(e,n){var r=null==e.secure?n:e.secure;return e.port||(t.location&&location.port?location.port:r?443:80)}function connect(e){if(e=e||{},e.host&&e.port)throw new i("The host option should already include the port number in the format hostname:port - Because of this, the host and port options cannot be specified together; use the hostname option instead");var n=isUrlSecure(),o={port:getPort(e,n),hostname:t.location&&location.hostname,path:"/socketcluster/",secure:n,autoConnect:!0,autoReconnect:!0,autoProcessSubscriptions:!0,connectTimeout:2e4,ackTimeout:1e4,timestampRequests:!1,timestampParam:"t",authEngine:null,authTokenName:"socketCluster.authToken",binaryType:"arraybuffer",multiplex:!0,cloneData:!1};for(var u in e)e.hasOwnProperty(u)&&(o[u]=e[u]);var s=getMultiplexId(o);return!1===o.multiplex?new r(o):(a[s]?a[s].connect():a[s]=new r(o),a[s])}function destroy(e){e=e||{};var n=isUrlSecure(),r={port:getPort(e,n),hostname:t.location&&location.hostname,path:"/socketcluster/",secure:n};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);var i=getMultiplexId(r),u=a[i];u&&u.disconnect(),delete a[i]}var r=n(69),o=n(31),i=o.InvalidArgumentsError,a={};e.exports={connect:connect,destroy:destroy,connections:a}}).call(t,n(13))},function(e,t,n){(function(t){var r,o,i=n(30).SCEmitter,a=n(68).Response,u=n(29);t.WebSocket?(r=t.WebSocket,o=function(e,t){return new r(e)}):(r=n(224),o=function(e,t){return new r(e,null,t)});var s=n(31),l=s.TimeoutError,c=function(e,t,n){this.state=this.CLOSED,this.auth=e,this.codec=t,this.options=n,this.connectTimeout=n.connectTimeout,this.pingTimeout=n.ackTimeout,this.callIdGenerator=n.callIdGenerator,this._pingTimeoutTicker=null,this._callbackMap={},this.open()};c.prototype=Object.create(i.prototype),c.CONNECTING=c.prototype.CONNECTING="connecting",c.OPEN=c.prototype.OPEN="open",c.CLOSED=c.prototype.CLOSED="closed",c.prototype.uri=function(){var e=this.options.query||{},t=this.options.secure?"wss":"ws";this.options.timestampRequests&&(e[this.options.timestampParam]=(new Date).getTime()),e=u.encode(e),e.length&&(e="?"+e);var n;if(this.options.host)n=this.options.host;else{var r="";this.options.port&&("wss"==t&&443!=this.options.port||"ws"==t&&80!=this.options.port)&&(r=":"+this.options.port),n=this.options.hostname+r}return t+"://"+n+this.options.path+e},c.prototype.open=function(){var e=this;this.state=this.CONNECTING;var t=this.uri(),n=o(t,this.options);n.binaryType=this.options.binaryType,this.socket=n,n.onopen=function(){e._onOpen()},n.onclose=function(t){e._onClose(t.code,t.reason)},n.onmessage=function(t,n){e._onMessage(t.data)},n.onerror=function(t){e.state===e.CONNECTING&&e._onClose(1006)},this._connectTimeoutRef=setTimeout(function(){e._onClose(4007),e.socket.close(4007)},this.connectTimeout)},c.prototype._onOpen=function(){var e=this;clearTimeout(this._connectTimeoutRef),this._resetPingTimeout(),this._handshake(function(t,n){t?(e._onError(t),e._onClose(4003),e.socket.close(4003)):(e.state=e.OPEN,i.prototype.emit.call(e,"open",n),e._resetPingTimeout())})},c.prototype._handshake=function(e){var t=this;this.auth.loadToken(this.options.authTokenName,function(n,r){if(n)e(n);else{var o={force:!0};t.emit("#handshake",{authToken:r},o,function(t,n){n&&(n.authToken=r,n.authError&&(n.authError=s.hydrateError(n.authError))),e(t,n)})}})},c.prototype._onClose=function(e,t){delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror,clearTimeout(this._connectTimeoutRef),this.state==this.OPEN?(this.state=this.CLOSED,i.prototype.emit.call(this,"close",e,t)):this.state==this.CONNECTING&&(this.state=this.CLOSED,i.prototype.emit.call(this,"openAbort",e,t))},c.prototype._onMessage=function(e){i.prototype.emit.call(this,"event","message",e);var t=this.decode(e);if("#1"==t)this._resetPingTimeout(),this.socket.readyState==this.socket.OPEN&&this.sendObject("#2");else{var n=t.event;if(n){var r=new a(this,t.cid);i.prototype.emit.call(this,"event",n,t.data,r)}else if(null!=t.rid){var o=this._callbackMap[t.rid];if(o&&(clearTimeout(o.timeout),delete this._callbackMap[t.rid],o.callback)){var u=s.hydrateError(t.error);o.callback(u,t.data)}}else i.prototype.emit.call(this,"event","raw",t)}},c.prototype._onError=function(e){i.prototype.emit.call(this,"error",e)},c.prototype._resetPingTimeout=function(){var e=this;(new Date).getTime();clearTimeout(this._pingTimeoutTicker),this._pingTimeoutTicker=setTimeout(function(){e._onClose(4e3),e.socket.close(4e3)},this.pingTimeout)},c.prototype.getBytesReceived=function(){return this.socket.bytesReceived},c.prototype.close=function(e,t){if(e=e||1e3,this.state==this.OPEN){var n={code:e,data:t};this.emit("#disconnect",n),this._onClose(e,t),this.socket.close(e)}else this.state==this.CONNECTING&&(this._onClose(e,t),this.socket.close(e))},c.prototype.emitObject=function(e){var t={event:e.event,data:e.data};return e.callback&&(t.cid=e.cid=this.callIdGenerator(),this._callbackMap[e.cid]=e),this.sendObject(t),e.cid||null},c.prototype._handleEventAckTimeout=function(e){var t="Event response for '"+e.event+"' timed out",n=new l(t);e.cid&&delete this._callbackMap[e.cid];var r=e.callback;delete e.callback,r.call(e,n,e)},c.prototype.emit=function(e,t,n,r){var o,i,a=this;r?(i=n,o=r):n instanceof Function?(i={},o=n):i=n;var u={event:e,data:t,callback:o};o&&!i.noTimeout&&(u.timeout=setTimeout(function(){a._handleEventAckTimeout(u)},this.options.ackTimeout));var s=null;return(this.state==this.OPEN||i.force)&&(s=this.emitObject(u)),s},c.prototype.cancelPendingResponse=function(e){delete this._callbackMap[e]},c.prototype.decode=function(e){return this.codec.decode(e)},c.prototype.encode=function(e){return this.codec.encode(e)},c.prototype.send=function(e){this.socket.readyState!=this.socket.OPEN?this._onClose(1005):this.socket.send(e)},c.prototype.serializeObject=function(e){var t,n;try{t=this.encode(e)}catch(e){n=e,this._onError(n)}return n?null:t},c.prototype.sendObject=function(e){var t=this.serializeObject(e);null!=t&&this.send(t)},e.exports.SCTransport=c}).call(t,n(13))},function(e,t){function ws(e,t,n){return t?new r(e,t):new r(e)}var n;n="undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof window&&window||function(){return this}();var r=n.WebSocket||n.MozWebSocket;r&&(ws.prototype=r.prototype),e.exports=r?ws:null},function(e,t,n){e.exports=n(226)},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(227),a=function(e){return e&&e.__esModule?e:{default:e}}(i);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var u=(0,a.default)(o);t.default=u}).call(t,n(13),n(27)(e))},function(e,t,n){"use strict";function symbolObservablePonyfill(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=symbolObservablePonyfill},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function valueEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return valueEqual(e,t[n])});var n=void 0===e?"undefined":r(e);if(n!==(void 0===t?"undefined":r(t)))return!1;if("object"===n){var o=e.valueOf(),i=t.valueOf();if(o!==e||i!==t)return valueEqual(o,i);var a=Object.keys(e),u=Object.keys(t);return a.length===u.length&&a.every(function(n){return valueEqual(e[n],t[n])})}return!1};t.default=o}]);